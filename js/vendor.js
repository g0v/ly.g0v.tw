(function(){"use strict";var e="undefined"!=typeof window?window:global;if("function"!=typeof e.require){var t={},n={},i=function(e,t){return{}.hasOwnProperty.call(e,t)},o=function(e,t){var n,i,o=[];n=/^\.\.?(\/|$)/.test(t)?[e,t].join("/").split("/"):t.split("/");for(var r=0,a=n.length;a>r;r++)i=n[r],".."===i?o.pop():"."!==i&&""!==i&&o.push(i);return o.join("/")},r=function(e){return e.split("/").slice(0,-1).join("/")},a=function(t){return function(n){var i=r(t),a=o(i,n);return e.require(a)}},s=function(e,t){var i={id:e,exports:{}};t(i.exports,a(e),i);var o=n[e]=i.exports;return o},l=function(e){var r=o(e,".");if(i(n,r))return n[r];if(i(t,r))return s(r,t[r]);var a=o(r,"./index");if(i(n,a))return n[a];if(i(t,a))return s(a,t[a]);throw Error('Cannot find module "'+e+'"')},c=function(e,n){if("object"==typeof e)for(var o in e)i(e,o)&&(t[o]=e[o]);else t[e]=n};e.require=l,e.require.define=c,e.require.register=c,e.require.brunch=!0}})(),function(e){for(var t,n=function(){},i="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(",");t=i.pop();)e[t]=e[t]||n}(window.console=window.console||{}),!function(e){"use strict";var t=function(t,n){this.options=e.extend({},e.fn.affix.defaults,n),this.$window=e(window).on("scroll.affix.data-api",e.proxy(this.checkPosition,this)).on("click.affix.data-api",e.proxy(function(){setTimeout(e.proxy(this.checkPosition,this),1)},this)),this.$element=e(t),this.checkPosition()};t.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t,n=e(document).height(),i=this.$window.scrollTop(),o=this.$element.offset(),r=this.options.offset,a=r.bottom,s=r.top,l="affix affix-top affix-bottom";"object"!=typeof r&&(a=s=r),"function"==typeof s&&(s=r.top()),"function"==typeof a&&(a=r.bottom()),t=null!=this.unpin&&i+this.unpin<=o.top?!1:null!=a&&o.top+this.$element.height()>=n-a?"bottom":null!=s&&s>=i?"top":!1,this.affixed!==t&&(this.affixed=t,this.unpin="bottom"==t?o.top-i:null,this.$element.removeClass(l).addClass("affix"+(t?"-"+t:"")))}},e.fn.affix=function(n){return this.each(function(){var i=e(this),o=i.data("affix"),r="object"==typeof n&&n;o||i.data("affix",o=new t(this,r)),"string"==typeof n&&o[n]()})},e.fn.affix.Constructor=t,e.fn.affix.defaults={offset:0},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),n=t.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),t.affix(n)})})}(window.jQuery),!function(e){"use strict";var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.prototype.close=function(t){function n(){i.trigger("closed").remove()}var i,o=e(this),r=o.attr("data-target");r||(r=o.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),i=e(r),t&&t.preventDefault(),i.length||(i=o.hasClass("alert")?o:o.parent()),i.trigger(t=e.Event("close")),t.isDefaultPrevented()||(i.removeClass("in"),e.support.transition&&i.hasClass("fade")?i.on(e.support.transition.end,n):n())},e.fn.alert=function(t){return this.each(function(){var i=e(this),o=i.data("alert");o||i.data("alert",o=new n(this)),"string"==typeof t&&o[t].call(i)})},e.fn.alert.Constructor=n,e(document).on("click.alert.data-api",t,n.prototype.close)}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.button.defaults,n)};t.prototype.setState=function(e){var t="disabled",n=this.$element,i=n.data(),o=n.is("input")?"val":"html";e+="Text",i.resetText||n.data("resetText",n[o]()),n[o](i[e]||this.options[e]),setTimeout(function(){"loadingText"==e?n.addClass(t).attr(t,t):n.removeClass(t).removeAttr(t)},0)},t.prototype.toggle=function(){var e=this.$element.closest('[data-toggle="buttons-radio"]');e&&e.find(".active").removeClass("active"),this.$element.toggleClass("active")},e.fn.button=function(n){return this.each(function(){var i=e(this),o=i.data("button"),r="object"==typeof n&&n;o||i.data("button",o=new t(this,r)),"toggle"==n?o.toggle():n&&o.setState(n)})},e.fn.button.defaults={loadingText:"loading..."},e.fn.button.Constructor=t,e(document).on("click.button.data-api","[data-toggle^=button]",function(t){var n=e(t.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle")})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=n,this.options.slide&&this.slide(this.options.slide),"hover"==this.options.pause&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};t.prototype={cycle:function(t){return t||(this.paused=!1),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},to:function(t){var n=this.$element.find(".item.active"),i=n.parent().children(),o=i.index(n),r=this;if(!(t>i.length-1||0>t))return this.sliding?this.$element.one("slid",function(){r.to(t)}):o==t?this.pause().cycle():this.slide(t>o?"next":"prev",e(i[t]))},pause:function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition.end&&(this.$element.trigger(e.support.transition.end),this.cycle()),clearInterval(this.interval),this.interval=null,this},next:function(){return this.sliding?void 0:this.slide("next")},prev:function(){return this.sliding?void 0:this.slide("prev")},slide:function(t,n){var i,o=this.$element.find(".item.active"),r=n||o[t](),a=this.interval,s="next"==t?"left":"right",l="next"==t?"first":"last",c=this;if(this.sliding=!0,a&&this.pause(),r=r.length?r:this.$element.find(".item")[l](),i=e.Event("slide",{relatedTarget:r[0]}),!r.hasClass("active")){if(e.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(i),i.isDefaultPrevented())return;r.addClass(t),r[0].offsetWidth,o.addClass(s),r.addClass(s),this.$element.one(e.support.transition.end,function(){r.removeClass([t,s].join(" ")).addClass("active"),o.removeClass(["active",s].join(" ")),c.sliding=!1,setTimeout(function(){c.$element.trigger("slid")},0)})}else{if(this.$element.trigger(i),i.isDefaultPrevented())return;o.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return a&&this.cycle(),this}}},e.fn.carousel=function(n){return this.each(function(){var i=e(this),o=i.data("carousel"),r=e.extend({},e.fn.carousel.defaults,"object"==typeof n&&n),a="string"==typeof n?n:r.slide;o||i.data("carousel",o=new t(this,r)),"number"==typeof n?o.to(n):a?o[a]():r.interval&&o.cycle()})},e.fn.carousel.defaults={interval:5e3,pause:"hover"},e.fn.carousel.Constructor=t,e(document).on("click.carousel.data-api","[data-slide]",function(t){var n,i=e(this),o=e(i.attr("data-target")||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")),r=e.extend({},o.data(),i.data());o.carousel(r),t.preventDefault()})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.collapse.defaults,n),this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.prototype={constructor:t,dimension:function(){var e=this.$element.hasClass("width");return e?"width":"height"},show:function(){var t,n,i,o;if(!this.transitioning){if(t=this.dimension(),n=e.camelCase(["scroll",t].join("-")),i=this.$parent&&this.$parent.find("> .accordion-group > .in"),i&&i.length){if(o=i.data("collapse"),o&&o.transitioning)return;i.collapse("hide"),o||i.data("collapse",null)}this.$element[t](0),this.transition("addClass",e.Event("show"),"shown"),e.support.transition&&this.$element[t](this.$element[0][n])}},hide:function(){var t;this.transitioning||(t=this.dimension(),this.reset(this.$element[t]()),this.transition("removeClass",e.Event("hide"),"hidden"),this.$element[t](0))},reset:function(e){var t=this.dimension();return this.$element.removeClass("collapse")[t](e||"auto")[0].offsetWidth,this.$element[null!==e?"addClass":"removeClass"]("collapse"),this},transition:function(t,n,i){var o=this,r=function(){"show"==n.type&&o.reset(),o.transitioning=0,o.$element.trigger(i)};this.$element.trigger(n),n.isDefaultPrevented()||(this.transitioning=1,this.$element[t]("in"),e.support.transition&&this.$element.hasClass("collapse")?this.$element.one(e.support.transition.end,r):r())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}},e.fn.collapse=function(n){return this.each(function(){var i=e(this),o=i.data("collapse"),r="object"==typeof n&&n;o||i.data("collapse",o=new t(this,r)),"string"==typeof n&&o[n]()})},e.fn.collapse.defaults={toggle:!0},e.fn.collapse.Constructor=t,e(document).on("click.collapse.data-api","[data-toggle=collapse]",function(t){var n,i=e(this),o=i.attr("data-target")||t.preventDefault()||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),r=e(o).data("collapse")?"toggle":i.data();i[e(o).hasClass("in")?"addClass":"removeClass"]("collapsed"),e(o).collapse(r)})}(window.jQuery),!function(e){"use strict";function t(){e(i).each(function(){n(e(this)).removeClass("open")})}function n(t){var n,i=t.attr("data-target");return i||(i=t.attr("href"),i=i&&/#/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")),n=e(i),n.length||(n=t.parent()),n}var i="[data-toggle=dropdown]",o=function(t){var n=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};o.prototype={constructor:o,toggle:function(){var i,o,r=e(this);if(!r.is(".disabled, :disabled"))return i=n(r),o=i.hasClass("open"),t(),o||(i.toggleClass("open"),r.focus()),!1},keydown:function(t){var i,o,r,a,s;if(/(38|40|27)/.test(t.keyCode)&&(i=e(this),t.preventDefault(),t.stopPropagation(),!i.is(".disabled, :disabled"))){if(r=n(i),a=r.hasClass("open"),!a||a&&27==t.keyCode)return i.click();o=e("[role=menu] li:not(.divider) a",r),o.length&&(s=o.index(o.filter(":focus")),38==t.keyCode&&s>0&&s--,40==t.keyCode&&o.length-1>s&&s++,~s||(s=0),o.eq(s).focus())}}},e.fn.dropdown=function(t){return this.each(function(){var n=e(this),i=n.data("dropdown");i||n.data("dropdown",i=new o(this)),"string"==typeof t&&i[t].call(n)})},e.fn.dropdown.Constructor=o,e(document).on("click.dropdown.data-api touchstart.dropdown.data-api",t).on("click.dropdown touchstart.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.dropdown.data-api touchstart.dropdown.data-api",i,o.prototype.toggle).on("keydown.dropdown.data-api touchstart.dropdown.data-api",i+", [role=menu]",o.prototype.keydown)}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.options=n,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,n=e.Event("show");this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var n=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),n&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1),t.enforceFocus(),n?t.$element.one(e.support.transition.end,function(){t.$element.focus().trigger("shown")}):t.$element.focus().trigger("shown")}))},hide:function(t){t&&t.preventDefault(),t=e.Event("hide"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var t=this;e(document).on("focusin.modal",function(e){t.$element[0]===e.target||t.$element.has(e.target).length||t.$element.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(t){27==t.which&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,n=setTimeout(function(){t.$element.off(e.support.transition.end),t.hideModal()},500);this.$element.one(e.support.transition.end,function(){clearTimeout(n),t.hideModal()})},hideModal:function(){this.$element.hide().trigger("hidden"),this.backdrop()},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&n;this.$backdrop=e('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?e.proxy(this.$element[0].focus,this.$element[0]):e.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),i?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,e.proxy(this.removeBackdrop,this)):this.removeBackdrop()):t&&t()}},e.fn.modal=function(n){return this.each(function(){var i=e(this),o=i.data("modal"),r=e.extend({},e.fn.modal.defaults,i.data(),"object"==typeof n&&n);o||i.data("modal",o=new t(this,r)),"string"==typeof n?o[n]():r.show&&o.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e(document).on("click.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),i=n.attr("href"),o=e(n.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),r=o.data("modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},o.data(),n.data());t.preventDefault(),o.modal(r).one("hide",function(){n.focus()})})}(window.jQuery),!function(e){"use strict";function t(t,n){var i,o=e.proxy(this.process,this),r=e(t).is("body")?e(window):e(t);this.options=e.extend({},e.fn.scrollspy.defaults,n),this.$scrollElement=r.on("scroll.scroll-spy.data-api",o),this.selector=(this.options.target||(i=e(t).attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=e("body"),this.refresh(),this.process()}t.prototype={constructor:t,refresh:function(){var t,n=this;this.offsets=e([]),this.targets=e([]),t=this.$body.find(this.selector).map(function(){var t=e(this),n=t.data("target")||t.attr("href"),i=/^#\w/.test(n)&&e(n);return i&&i.length&&[[i.position().top,n]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})},process:function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,i=n-this.$scrollElement.height(),o=this.offsets,r=this.targets,a=this.activeTarget;if(t>=i)return a!=(e=r.last()[0])&&this.activate(e);for(e=o.length;e--;)a!=r[e]&&t>=o[e]&&(!o[e+1]||o[e+1]>=t)&&this.activate(r[e])},activate:function(t){var n,i;this.activeTarget=t,e(this.selector).parent(".active").removeClass("active"),i=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',n=e(i).parent("li").addClass("active"),n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate")}},e.fn.scrollspy=function(n){return this.each(function(){var i=e(this),o=i.data("scrollspy"),r="object"==typeof n&&n;o||i.data("scrollspy",o=new t(this,r)),"string"==typeof n&&o[n]()})},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.defaults={offset:10},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(window.jQuery),!function(e){"use strict";var t=function(t){this.element=e(t)};t.prototype={constructor:t,show:function(){var t,n,i,o=this.element,r=o.closest("ul:not(.dropdown-menu)"),a=o.attr("data-target");a||(a=o.attr("href"),a=a&&a.replace(/.*(?=#[^\s]*$)/,"")),o.parent("li").hasClass("active")||(t=r.find(".active:last a")[0],i=e.Event("show",{relatedTarget:t}),o.trigger(i),i.isDefaultPrevented()||(n=e(a),this.activate(o.parent("li"),r),this.activate(n,n.parent(),function(){o.trigger({type:"shown",relatedTarget:t})})))},activate:function(t,n,i){function o(){r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),a?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),i&&i()}var r=n.find("> .active"),a=i&&e.support.transition&&r.hasClass("fade");a?r.one(e.support.transition.end,o):o(),r.removeClass("in")}},e.fn.tab=function(n){return this.each(function(){var i=e(this),o=i.data("tab");o||i.data("tab",o=new t(this)),"string"==typeof n&&o[n]()})},e.fn.tab.Constructor=t,e(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})}(window.jQuery),!function(e){"use strict";e(function(){e.support.transition=function(){var e=function(){var e,t=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(e in n)if(void 0!==t.style[e])return n[e]}();return e&&{end:e}}()})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.$menu=e(this.options.menu).appendTo("body"),this.source=this.options.source,this.shown=!1,this.listen()};t.prototype={constructor:t,select:function(){var e=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(e)).change(),this.hide()},updater:function(e){return e},show:function(){var t=e.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});return this.$menu.css({top:t.top+t.height,left:t.left}),this.$menu.show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var t;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(t=e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,this)):this.source,t?this.process(t):this)},process:function(t){var n=this;return t=e.grep(t,function(e){return n.matcher(e)}),t=this.sorter(t),t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){for(var t,n=[],i=[],o=[];t=e.shift();)t.toLowerCase().indexOf(this.query.toLowerCase())?~t.indexOf(this.query)?i.push(t):o.push(t):n.push(t);return n.concat(i,o)},highlighter:function(e){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(RegExp("("+t+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},render:function(t){var n=this;return t=e(t).map(function(t,i){return t=e(n.options.item).attr("data-value",i),t.find("a").html(n.highlighter(i)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(){var t=this.$menu.find(".active").removeClass("active"),n=t.next();n.length||(n=e(this.$menu.find("li")[0])),n.addClass("active")},prev:function(){var e=this.$menu.find(".active").removeClass("active"),t=e.prev();t.length||(t=this.$menu.find("li").last()),t.addClass("active")},listen:function(){this.$element.on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this))},eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t="function"==typeof this.$element[e]),t},move:function(e){if(this.shown){switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()}},keydown:function(t){this.suppressKeyPressRepeat=!~e.inArray(t.keyCode,[40,38,9,13,27]),this.move(t)},keypress:function(e){this.suppressKeyPressRepeat||this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},blur:function(){var e=this;setTimeout(function(){e.hide()},150)},click:function(e){e.stopPropagation(),e.preventDefault(),this.select()},mouseenter:function(t){this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")}},e.fn.typeahead=function(n){return this.each(function(){var i=e(this),o=i.data("typeahead"),r="object"==typeof n&&n;o||i.data("typeahead",o=new t(this,r)),"string"==typeof n&&o[n]()})},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},e.fn.typeahead.Constructor=t,e(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var n=e(this);n.data("typeahead")||(t.preventDefault(),n.typeahead(n.data()))})}(window.jQuery),this.prelude=function(){function e(t,n){return t.length>1?function(){var i=n?n.concat():[];return i.push.apply(i,arguments)<t.length&&arguments.length?e.call(this,t,i):t.apply(this,i)}:t}function t(e,t){for(var n=0,i=t.length>>>0;i>n;)if(e===t[n++])return!0;return!1}function n(e){return function(){var t,n=arguments;for(t=e.length;t>0;--t)n=[e[t-1].apply(this,n)];return n[0]}}function i(e){return!e}function o(e,t){var n={}.hasOwnProperty;for(var i in t)n.call(t,i)&&(e[i]=t[i]);return e}exports={};var r,a,s,l,c,u,d,f,g,p,h,m,v,b,y,w,x,C,T,S,k,P,$,D,A,I,E,R,O,z,j,F,M,N,L,H,G,_,W,B,q,U,Q,V,K,Y,X,Z,J,et,tt,nt,it,ot,rt,at,st,lt,ct,ut,dt,ft,gt,pt,ht,mt,vt,bt,yt,wt,xt,Ct,Tt,St,kt,Pt,$t,Dt,At,It,Et,Rt,Ot,zt,jt,Ft,Mt,Nt,Lt,Ht,Gt,_t,Wt,Bt,qt,Ut,Qt,Vt,Kt,Yt,Xt,Zt,Jt,en={}.toString,tn=[].slice;return exports.objToFunc=r=function(e){return function(t){return e[t]}},exports.each=a=e(function(e,t){var n,i,o;if("Object"===en.call(t).slice(8,-1))for(n in t)i=t[n],e(i);else for(n=0,o=t.length;o>n;++n)i=t[n],e(i);return t}),exports.map=s=e(function(e,t){var n,i,o,a,s,l,c,u={};if("Function"!==en.call(e).slice(8,-1)&&(e=r(e)),n=en.call(t).slice(8,-1),"Object"===n){for(i in t)o=t[i],u[i]=e(o);return u}for(a=[],s=0,l=t.length;l>s;++s)o=t[s],a.push(e(o));return c=a,"String"===n?c.join(""):c}),exports.filter=l=e(function(e,t){var n,i,o,a,s,l,c,u={};if("Function"!==en.call(e).slice(8,-1)&&(e=r(e)),n=en.call(t).slice(8,-1),"Object"===n){for(i in t)o=t[i],e(o)&&(u[i]=o);return u}for(a=[],s=0,l=t.length;l>s;++s)o=t[s],e(o)&&a.push(o);return c=a,"String"===n?c.join(""):c}),exports.reject=c=e(function(e,t){var n,i,o,a,s,l,c,u={};if("Function"!==en.call(e).slice(8,-1)&&(e=r(e)),n=en.call(t).slice(8,-1),"Object"===n){for(i in t)o=t[i],e(o)||(u[i]=o);return u}for(a=[],s=0,l=t.length;l>s;++s)o=t[s],e(o)||a.push(o);return c=a,"String"===n?c.join(""):c}),exports.partition=u=e(function(e,t){var n,i,o,a,s,l,c;if("Function"!==en.call(e).slice(8,-1)&&(e=r(e)),n=en.call(t).slice(8,-1),"Object"===n){i={},o={};for(a in t)s=t[a],(e(s)?i:o)[a]=s}else{for(i=[],o=[],l=0,c=t.length;c>l;++l)s=t[l],(e(s)?i:o).push(s);"String"===n&&(i=i.join(""),o=o.join(""))}return[i,o]}),exports.find=d=e(function(e,t){var n,i,o;if("Function"!==en.call(e).slice(8,-1)&&(e=r(e)),"Object"===en.call(t).slice(8,-1)){for(n in t)if(i=t[n],e(i))return i}else for(n=0,o=t.length;o>n;++n)if(i=t[n],e(i))return i}),exports.head=g=exports.first=f=function(e){return e.length?e[0]:void 0},exports.tail=p=function(e){return e.length?e.slice(1):void 0},exports.last=h=function(e){return e.length?e[e.length-1]:void 0},exports.initial=m=function(e){return e.length?e.slice(0,e.length-1):void 0},exports.empty=v=function(e){var t;if("Object"===en.call(e).slice(8,-1)){for(t in e)return!1;return!0}return!e.length},exports.values=b=function(e){var t,n,i=[];for(t in e)n=e[t],i.push(n);return i},exports.keys=y=function(e){var t,n=[];for(t in e)n.push(t);return n},exports.length=w=function(e){return"Object"===en.call(e).slice(8,-1)&&(e=b(e)),e.length},exports.cons=x=e(function(e,t){return"String"===en.call(t).slice(8,-1)?e+t:[e].concat(t)}),exports.append=C=e(function(e,t){return"String"===en.call(t).slice(8,-1)?e+t:e.concat(t)}),exports.join=T=e(function(e,t){return"Object"===en.call(t).slice(8,-1)&&(t=b(t)),t.join(e)}),exports.reverse=S=function(e){return"String"===en.call(e).slice(8,-1)?e.split("").reverse().join(""):e.slice().reverse()},exports.fold=P=exports.foldl=k=e(function(e,t,n){var i,o,r;if("Object"===en.call(n).slice(8,-1))for(i in n)o=n[i],t=e(t,o);else for(i=0,r=n.length;r>i;++i)o=n[i],t=e(t,o);return t}),exports.fold1=D=exports.foldl1=$=e(function(e,t){return P(e,t[0],t.slice(1))}),exports.foldr=A=e(function(e,t,n){return P(e,t,n.reverse())}),exports.foldr1=I=e(function(e,t){return t.reverse(),P(e,t[0],t.slice(1))}),exports.unfoldr=exports.unfold=E=e(function(e,t){var n;return null!=(n=e(t))?[n[0]].concat(E(e,n[1])):[]}),exports.andList=R=function(e){return P(function(e,t){return e&&t},!0,e)},exports.orList=O=function(e){return P(function(e,t){return e||t},!1,e)},exports.any=z=e(function(e,t){return"Function"!==en.call(e).slice(8,-1)&&(e=r(e)),P(function(t,n){return t||e(n)},!1,t)}),exports.all=j=e(function(e,t){return"Function"!==en.call(e).slice(8,-1)&&(e=r(e)),P(function(t,n){return t&&e(n)},!0,t)}),exports.unique=F=function(e){var n,i,o,r;if(n=[],"Object"===en.call(e).slice(8,-1))for(i in e)o=e[i],t(o,n)||n.push(o);else for(i=0,r=e.length;r>i;++i)o=e[i],t(o,n)||n.push(o);return"String"===en.call(e).slice(8,-1)?n.join(""):n},exports.sort=M=function(e){return e.concat().sort(function(e,t){switch(!1){case!(e>t):return 1;case!(t>e):return-1;default:return 0}})},exports.sortBy=N=e(function(e,t){return t.length?t.concat().sort(e):[]}),exports.compare=L=e(function(e,t,n){switch(!1){case!(e(t)>e(n)):return 1;case!(e(t)<e(n)):return-1;default:return 0}}),exports.sum=H=function(e){var t,n,i,o;if(t=0,"Object"===en.call(e).slice(8,-1))for(n in e)i=e[n],t+=i;else for(n=0,o=e.length;o>n;++n)i=e[n],t+=i;return t},exports.product=G=function(e){var t,n,i,o;if(t=1,"Object"===en.call(e).slice(8,-1))for(n in e)i=e[n],t*=i;else for(n=0,o=e.length;o>n;++n)i=e[n],t*=i;return t},exports.mean=W=exports.average=_=function(e){return H(e)/w(e)},exports.concat=B=function(e){return P(C,[],e)},exports.concatMap=q=e(function(e,t){return B(s(e,t))}),exports.listToObj=U=function(e){var t,n,i,o;for(t={},n=0,i=e.length;i>n;++n)o=e[n],t[o[0]]=o[1];return t},exports.maximum=Q=function(e){return D(Ct,e)},exports.minimum=V=function(e){return D(Tt,e)},exports.scan=Y=exports.scanl=K=e(function(e,t,n){var i,o;return i=t,"Object"===en.call(n).slice(8,-1)?[t].concat(function(){var t,r,a=[];for(t in r=n)o=r[t],a.push(i=e(i,o));return a}()):[t].concat(function(){var t,r,a,s=[];for(t=0,a=(r=n).length;a>t;++t)o=r[t],s.push(i=e(i,o));return s}())}),exports.scan1=Z=exports.scanl1=X=e(function(e,t){return Y(e,t[0],t.slice(1))}),exports.scanr=J=e(function(e,t,n){return n.reverse(),Y(e,t,n).reverse()}),exports.scanr1=et=e(function(e,t){return t.reverse(),Y(e,t[0],t.slice(1)).reverse()}),exports.replicate=tt=e(function(e,t){var n,i;for(n=[],i=0;e>i;++i)n.push(t);return n}),exports.take=nt=e(function(e,t){switch(!1){case!(0>=e):return"String"===en.call(t).slice(8,-1)?"":[];case!!t.length:return t;default:return t.slice(0,e)}}),exports.drop=it=e(function(e,t){switch(!1){case!(0>=e):return t;case!!t.length:return t;default:return t.slice(e)}}),exports.splitAt=ot=e(function(e,t){return[nt(e,t),it(e,t)]}),exports.takeWhile=rt=e(function(e,t){var n,i,o,a;if(!t.length)return t;for("Function"!==en.call(e).slice(8,-1)&&(e=r(e)),n=[],i=0,o=t.length;o>i&&(a=t[i],e(a));++i)n.push(a);return"String"===en.call(t).slice(8,-1)?n.join(""):n}),exports.dropWhile=at=e(function(e,t){var n,i,o,a;if(!t.length)return t;for("Function"!==en.call(e).slice(8,-1)&&(e=r(e)),n=0,i=0,o=t.length;o>i&&(a=t[i],e(a));++i)++n;return it(n,t)}),exports.span=st=e(function(e,t){return[rt(e,t),at(e,t)]}),exports.breakIt=lt=e(function(e,t){return st(n([i,e]),t)}),exports.zip=ct=e(function(e,t){var n,i,o,r,a,s,l,c,u;for(n=[],i=0,r=(o=[e,t]).length;r>i;++i)for(a=o[i],s=0,l=a.length;l>s;++s)c=a[s],0===i&&n.push([]),null!=(u=n[s])&&u.push(c);return n}),exports.zipWith=ut=e(function(e,t,n){var i,o,a,s,l=[];if("Function"!==en.call(e).slice(8,-1)&&(e=r(e)),t.length&&n.length){for(i=0,a=(o=ct.call(this,t,n)).length;a>i;++i)s=o[i],l.push(e.apply(this,s));return l}return[]}),exports.zipAll=dt=function(){var e,t,n,i,o,r,a,s,l;for(e=tn.call(arguments),t=[],n=0,i=e.length;i>n;++n)for(o=e[n],r=0,a=o.length;a>r;++r)s=o[r],0===n&&t.push([]),null!=(l=t[r])&&l.push(s);return t},exports.zipAllWith=ft=function(e){var t,n,i,o,a,s=[];if(t=tn.call(arguments,1),"Function"!==en.call(e).slice(8,-1)&&(e=r(e)),t[0].length&&t[1].length){for(n=0,o=(i=dt.apply(this,t)).length;o>n;++n)a=i[n],s.push(e.apply(this,a));return s}return[]},exports.compose=gt=function(){var e;return e=tn.call(arguments),function(){var t,n,i,o,r;for(t=arguments,n=0,o=(i=e).length;o>n;++n)r=i[n],t=[r.apply(this,t)];return t[0]}},exports.curry=pt=function(t){return e(t)},exports.id=ht=function(e){return e},exports.flip=mt=e(function(e,t,n){return e(n,t)}),exports.fix=vt=function(e){return function(t){return function(){return e(t(t)).apply(null,arguments)}}(function(t){return function(){return e(t(t)).apply(null,arguments)}})},exports.lines=bt=function(e){return e.length?e.split("\n"):[]},exports.unlines=yt=function(e){return e.join("\n")},exports.words=wt=function(e){return e.length?e.split(/[ ]+/):[]},exports.unwords=xt=function(e){return e.join(" ")},exports.max=Ct=e(function(e,t){return e>t?e:t}),exports.min=Tt=e(function(e,t){return e>t?t:e}),exports.negate=St=function(e){return-e},exports.abs=kt=Math.abs,exports.signum=Pt=function(e){switch(!1){case!(0>e):return-1;case!(e>0):return 1;default:return 0}},exports.quot=$t=e(function(e,t){return~~(e/t)}),exports.rem=Dt=e(function(e,t){return e%t}),exports.div=At=e(function(e,t){return Math.floor(e/t)}),exports.mod=It=e(function(e,t){var n;return(e%(n=t)+n)%n}),exports.recip=Et=function(e){return 1/e},exports.pi=Rt=Math.PI,exports.tau=Ot=2*Rt,exports.exp=zt=Math.exp,exports.sqrt=jt=Math.sqrt,exports.ln=Ft=Math.log,exports.pow=Mt=e(function(e,t){return Math.pow(e,t)}),exports.sin=Nt=Math.sin,exports.tan=Lt=Math.tan,exports.cos=Ht=Math.cos,exports.asin=Gt=Math.asin,exports.acos=_t=Math.acos,exports.atan=Wt=Math.atan,exports.atan2=Bt=e(function(e,t){return Math.atan2(e,t)}),exports.truncate=qt=function(e){return~~e},exports.round=Ut=Math.round,exports.ceiling=Qt=Math.ceil,exports.floor=Vt=Math.floor,exports.isItNaN=Kt=function(e){return e!==e},exports.even=Yt=function(e){return 0===e%2},exports.odd=Xt=function(e){return 0!==e%2},exports.gcd=Zt=e(function(e,t){var n;for(e=Math.abs(e),t=Math.abs(t);0!==t;)n=e%t,e=t,t=n;return e}),exports.lcm=Jt=e(function(e,t){return Math.abs(Math.floor(e/Zt(e,t)*t))}),exports.installPrelude=function(e){var t;null!=(t=e.prelude)&&t.isInstalled||(o(e,exports),e.prelude.isInstalled=!0)},exports.prelude=exports,exports}(),jade=function(e){function t(e){return null!=e}return Array.isArray||(Array.isArray=function(e){return"[object Array]"==Object.prototype.toString.call(e)}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),e.merge=function(e,n){var i=e["class"],o=n["class"];(i||o)&&(i=i||[],o=o||[],Array.isArray(i)||(i=[i]),Array.isArray(o)||(o=[o]),i=i.filter(t),o=o.filter(t),e["class"]=i.concat(o).join(" "));for(var r in n)"class"!=r&&(e[r]=n[r]);return e},e.attrs=function(t,n){var i=[],o=t.terse;delete t.terse;var r=Object.keys(t),a=r.length;if(a){i.push("");for(var s=0;a>s;++s){var l=r[s],c=t[l];"boolean"==typeof c||null==c?c&&(o?i.push(l):i.push(l+'="'+l+'"')):0==l.indexOf("data")&&"string"!=typeof c?i.push(l+"='"+JSON.stringify(c)+"'"):"class"==l&&Array.isArray(c)?i.push(l+'="'+e.escape(c.join(" "))+'"'):n&&n[l]?i.push(l+'="'+e.escape(c)+'"'):i.push(l+'="'+c+'"')
}}return i.join(" ")},e.escape=function(e){return(e+"").replace(/&(?!(\w+|\#\d+);)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},e.rethrow=function(e,t,n){if(!t)throw e;var i=3,o=require("fs").readFileSync(t,"utf8"),r=o.split("\n"),a=Math.max(n-i,0),s=Math.min(r.length,n+i),i=r.slice(a,s).map(function(e,t){var i=t+a+1;return(i==n?"  > ":"    ")+i+"| "+e}).join("\n");throw e.path=t,e.message=(t||"Jade")+":"+n+"\n"+i+"\n\n"+e.message,e},e}({});var diffview=function diffview(e){"use strict";var t=0,n=0,i="string"==typeof e.baseTextLines?e.baseTextLines:"Error: Cannot build diff view; baseTextLines is not defined.",o="string"==typeof e.newTextLines?e.newTextLines:"Error: Cannot build diff view; newTextLines is not defined.",r="string"==typeof e.baseTextName?e.baseTextName:"Base Source",a="string"==typeof e.newTextName?e.newTextName:"New Source",s=/^([0-9]+)$/.test(e.contextSize)?Number(e.contextSize):-1,l=/^([0-9]+)$/.test(e.tsize)?Number(e.tsize):4,c="string"==typeof e.tchar?e.tchar:" ",u=e.inline===!0?!0:!1,d=function(){var e=0,t=[];if(""===c)return"";for(e=0;l>e;e+=1)t.push(c);return t.join("")}(),f=function(e){var t=e.indexOf("\n"),n=e.indexOf("\r"),i=t>-1&&n>-1||0>n?"\n":"\r",o=e.replace(/\&/g,"&amp;").replace(/\$#lt;/g,"%#lt;").replace(/\$#gt;/g,"%#gt;").replace(/</g,"$#lt;").replace(/>/g,"$#gt;");return e="\n"===i?e.replace(/\r/g,""):e.replace(/\n/g,""),o.split(i)},g=f(i),p=f(o),h=function(){var e={},t=function(t){return e.hasOwnProperty(t)?e[t]:void 0},n=[],i=[],o=!1,r=[],a=[],s=[],l=function(){for(var e=0,o=0,s=0,l=0,c=0,u=0,d=[],f=0,g=0,p=0,h=[],m=0,v=0,b=0,y=0,w=0,x=0,C=n.length,T=i.length,S=[[0,C,0,T]],k=[],P=function(e,t){var n=0,i=Math.max(e.length,t.length);for(n=0;i>n;n+=1){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1}return e.length===t.length?0:e.length<t.length?-1:1},$=function(e,o,r,s){var l=0,c=a.length,u=0,d=0,f=0,g=[0,0],p=e,h=r,m=0;for(u=e;o>u;u+=1){for(l=0;c>l;l+=1)if(a[l][1]===n[u]&&(a[l][0]===u||n[u]!==i[u]||u===o-1||n[u+1]===i[u+1])){d=a[l][0];break}if(l!==c){if(d>=r){if(d>=s)break;f=g[0]===d-1?g[1]+1:1,f>m&&(p=u-f+1,h=d-f+1,m=f)}g=[d,f]}}for(;p>e&&h>r&&!t(i[h-1])&&n[p-1]===i[h-1];)p-=1,h-=1,m+=1;for(;o>p+m&&s>h+m&&!t(i[h+m])&&n[p+m]===i[h+m];)m+=1;for(;p>e&&h>r&&t(i[h-1])&&n[p-1]===i[h-1];)p-=1,h-=1,m+=1;for(;o>p+m&&s>h+m&&t(i[h+m])&&n[p+m]===i[h+m];)m+=1;return[p,h,m]};S.length;)d=S.pop(),s=d[0],l=d[1],c=d[2],u=d[3],h=$(s,l,c,u),f=h[0],g=h[1],p=h[2],p>0&&(r.push(h),f>s&&g>c&&S.push([s,f,c,g]),l>f+p&&u>g+p&&S.push([f+p,l,g+p,u]));for(r.sort(P),o=r.length,e=0;o>e;e+=1)v=r[e][0],y=r[e][1],x=r[e][2],m+w===v&&b+w===y?w+=x:(w&&k.push([m,b,w]),m=v,b=y,w=x);return w&&k.push([m,b,w]),k.push([C,T,0]),k};return function(){(function(){g.length>p.length?(o=!0,n=p,i=g):(n=g,i=p)})(),function(){var e=0,t=0,n="",o=i.length;for(e=0;o>e;e+=1){for(n=i[e],t=a.length-1;t>-1&&a[t][1]!==n;t-=1);t>-1?o>=200&&100>o&&a.splice(t,1):a.push([e,n])}}(),function(){var e=0,t=0,r=0,a="",c=0,u=0,d=0,f=l(),g=f.length,p=function(e,t,n){var i=function(e,t){var n=e.replace(/^(\s+)/,"").split(""),i=Math.min(n.length,t.length),o=0;for(o=0;i>o;o+=1)if(n[o]!==t[o])return o;return o},o=n.replace(/^(\s+)/,"").split(""),r=i(t,o)-i(e,o);return r>0?!0:!1};for(c=0;g>c;c+=1)e=f[c][0],t=f[c][1],r=f[c][2],a="",e>u&&t>d?u-d!==e-t&&3>d-t&&3>u-e?o&&u-e>d-t?p(i[d],i[d+1],n[u])?(s.push(["delete",d,d+1,u,u]),s.push(["replace",d+1,t,u,e])):s.push(["replace",d,t,u,e]):!o&&t-d>e-u?p(i[d],i[d+1],n[u])?(s.push(["insert",u,u,d,d+1]),s.push(["replace",u,e,d+1,t])):s.push(["replace",u,e,d,t]):a="replace":a="replace":e>u?a=o?"insert":"delete":t>d&&(a=o?"delete":"insert"),""!==a&&(o?s.push([a,d,t,u,e]):s.push([a,u,e,d,t])),u=e+r,d=t+r,r>0&&(o?s.push(["equal",t,d,e,u]):s.push(["equal",e,u,t,d]))}()}(),s}();return function(){var e=["<table class='diff'><thead><tr>"],i=0,o=0,l=0,c=0,f=0,m=0,v=0,b=0,y=""===d?"":RegExp("^(("+d.replace(/\\/g,"\\")+")+)"),w=function(e){var t=0,n=e.length,i=[];for(t=0;n>t;t+=1)i.push(e[t].replace(y,""));return i},x=""===d?[]:w(g),C=""===d?[]:w(p),T=h.length,S="",k=!1,P=!1,$=!0,D=[],A=[],I=function(e,n){var i=!1,o=0,r=0,a=0,s=[],l=[],c="",u="",f=[],g=[],p=0,h=function(){},m=function(){},v=function(){return t-=1,""},b=e.replace(/\'/g,"$#39;").replace(/\"/g,"$#34;").replace(/\&nbsp;/g," ").replace(/\&#160;/g," "),w=n.replace(/\'/g,"$#39;").replace(/\"/g,"$#34;").replace(/\&nbsp;/g," ").replace(/\&#160;/g," ");if(b===w)return[e,n];if("\r"===b.charAt(b.length-1)&&"\r"!==w.charAt(w.length-1)?(b=b.substring(0,b.length-1),c="<em>\\r</em>",u="<em></em>",t+=1):"\r"===w.charAt(w.length-1)&&"\r"!==b.charAt(b.length-1)&&(w=w.substring(0,w.length-1),u="<em>\\r</em>",c="<em></em>",t+=1),""!==y&&b.length!==w.length&&b.replace(y,"")===w.replace(y,""))return function(){var t=b.split(d),i=w.split(d),o=0,r=t.length,s=i.length,l=0;for(o=0;r>o&&0===t[o].length;o+=1)t[o]=d;for(l=0;s>l&&0===i[l].length;l+=1)i[l]=d;return r>s?(a=r-s,p=o-a,t[p]="<em>"+t[p],t[p+a]="</em>"+t[p+a],i[l]="<em></em>"+i[l]):(a=s-r,p=l-a,t[o]="<em></em>"+t[o],i[p]="<em>"+i[p],i[p+a]="</em>"+i[p+a]),e=t.join("").replace(/\$#34;/g,'"').replace(/\$#39;/g,"'"),n=i.join("").replace(/\$#34;/g,'"').replace(/\$#39;/g,"'"),[e,n]}();for(t-=1,s=b.split(""),l=w.split(""),p=Math.max(s.length,l.length),h=function(e){var t=e.length,n=[];for(i=0;t>i;i+=1)"$#gt;"===e[i]+e[i+1]+e[i+2]+e[i+3]+e[i+4]?(e[i]="$#gt;",e[i+1]="",e[i+2]="",e[i+3]="",e[i+4]=""):"$#lt;"===e[i]+e[i+1]+e[i+2]+e[i+3]+e[i+4]?(e[i]="$#lt;",e[i+1]="",e[i+2]="",e[i+3]="",e[i+4]=""):"&amp;"===e[i]+e[i+1]+e[i+2]+e[i+3]+e[i+4]?(e[i]="&amp;",e[i+1]="",e[i+2]="",e[i+3]="",e[i+4]=""):"$#34;"===e[i]+e[i+1]+e[i+2]+e[i+3]+e[i+4]?(e[i]="&#34;",e[i+1]="",e[i+2]="",e[i+3]="",e[i+4]=""):"$#39;"===e[i]+e[i+1]+e[i+2]+e[i+3]+e[i+4]&&(e[i]="&#39;",e[i+1]="",e[i+2]="",e[i+3]="",e[i+4]="");for(i=0;t>i;i+=1)""!==e[i]&&void 0!==e[i]&&n.push(e[i]);return n},s=h(s),l=h(l),i=!1,function(){var i=e,r=n,a=d,c=RegExp("^("+a+")+"),u=0===i.search(c)?i.match(c):[""],f=0===r.search(c)?r.match(c):[""],g=[],h=[],m=0,v=0,b=[0,0],y=!1,w=[u[0].length,f[0].length];for(""!==u[0]&&(i=i.substr(w[0])),""!==f[0]&&(r=r.substr(w[1])),w[0]>w[1]&&(m=w[0]-w[1],u[0]=u[0].substring(0,w[0]-m)+"<em>"+u[0].substr(w[0]-m)+"</em>",f[0]=f[0]+"<em></em>",t+=1),w[0]<w[1]&&(m=w[1]-w[0],f[0]=f[0].substring(0,w[1]-m)+"<em>"+f[0].substr(w[1]-m)+"</em>",u[0]=u[0]+"<em></em>",t+=1),g=i.split(" "),h=r.split(" "),v=Math.max(g.length,h.length),b[0]+=g[0].length,b[1]+=h[0].length,m=1;v>m;m+=1){if(g[m]!==h[m]&&"string"==typeof g[m]&&"string"==typeof h[m])if(g[m+1]===h[m])g[m]="<em> "+g[m]+"</em>",h.splice(m,0,"<em></em>"),g.length>=h.length&&(v+=1),y=!0,t+=1;else{if(g[m]!==h[m+1])break;h[m]="<em> "+h[m]+"</em>",g.splice(m,0,"<em></em>"),g.length<=h.length&&(v+=1),y=!0,t+=1}else{if("string"!=typeof g[m]||"string"!=typeof h[m])break;g[m]=" "+g[m],h[m]=" "+h[m]}b[0]+=g[m].length,b[1]+=h[m].length}if(y!==!1)if(m===v)"string"==typeof g[v]&&(g[v]=" "+g[v]),"string"==typeof h[v]&&(h[v]=" "+h[v]),g.length>h.length?(g[v]="<em>"+g[v],g[g.length-1]=g[g.length-1]+"</em>"):g.length<h.length&&(h[v]="<em>"+h[v],h[h.length-1]=h[h.length-1]+"</em>"),g.splice(0,0,u[0]),h.splice(0,0,f[0]),s=g,l=h,o=p;else{for(v=Math.max(g.length,h.length),m;v>m;m+=1)g[m]="string"==typeof g[m]?" "+g[m]:"",h[m]="string"==typeof h[m]?" "+h[m]:"";if(s=g.join("").split(""),l=h.join("").split(""),b[0]!==b[1])do b[0]>b[1]?(b[1]+=1,l.splice(0,0,"")):(b[0]+=1,s.splice(0,0,""));while(b[0]!==b[1]);s.splice(0,0,u[0]),l.splice(0,0,f[0]),o=b[0],p=Math.max(s.length,l.length)}}(),m=function(){var e=/<em>/g,n=0,r=0,c=0,u=0,d=[],h=!1,m=[],v=[],b=f[f.length-1],y=g[g.length-1],w=!1;if(""!==b&&b===g[g.length-2]&&f.length>0&&b.length>0&&b.indexOf("<em>")<b.indexOf("</em>")&&b.lastIndexOf("<em>")<b.lastIndexOf("</em>")){for(n=o;n>-1&&!(s[n].indexOf("</em>")>-1&&(s[n]=s[n].replace("</em>",""),l[n].indexOf("<em></em>")>-1?(l[n]=l[n].replace("<em></em>",""),w=!0):w===!0?l[n+1]=l[n+1].replace("</em>","<em></em>"):l[n]=l[n].replace("</em>",""),h===!0));n-=1)s[n].indexOf("<em>")>-1&&(s[n]=s[n].replace("<em>",""),l[n]=l[n].replace("<em>",""),h=!0);s[o-2]=s[o-2]+"</em>","string"==typeof l[n-1]&&l[n-1].indexOf("<em>")===l[n-1].length-4&&0>l[n].indexOf("</em>")&&(l[n-1]=l[n-1]+"</em>"),t-=1,h=!1,w=!1}else if(""!==y&&y===f[f.length-2]&&g.length>0&&y.length>0&&y.indexOf("<em>")<y.indexOf("</em>")&&y.lastIndexOf("<em>")<y.lastIndexOf("</em>")){for(n=o;n>-1&&!(l[n].indexOf("</em>")>-1&&(l[n]=l[n].replace("</em>",""),s[n].indexOf("<em></em>")>-1?(s[n]=s[n].replace("<em></em>",""),w=!0):w===!0?s[n+1]=s[n+1].replace("</em>","<em></em>"):s[n]=s[n].replace("</em>",""),h===!0));n-=1)l[n].indexOf("<em>")>-1&&(l[n]=l[n].replace("<em>",""),s[n]=s[n].replace("<em>",""),h=!0);l[o-2]=l[o-2]+"</em>","string"==typeof s[n-1]&&s[n-1].indexOf("<em>")===s[n-1].length-4&&0>s[n].indexOf("</em>")&&(s[n-1]=s[n-1]+"</em>"),t-=1,h=!1,w=!1}for(n=o;p>n;n+=1)if(s[n]===l[n])a=n;else if(i||s[n]===l[n]||e.test(s[n])||e.test(l[n])||e.test(s[n-1])||e.test(l[n-1]))void 0!==s[n]||""!==l[n]&&" "!==l[n]?void 0!==l[n]||""!==s[n]&&" "!==s[n]||(l[n]=""):s[n]="";else{if(0===n||"string"==typeof s[n-1]&&"string"==typeof l[n-1]){0===n?(s[n]="<em>"+s[n],l[n]="<em>"+l[n]):(s[n-1]=s[n-1]+"<em>",l[n-1]=l[n-1]+"<em>"),t+=1,i=!0;break}if("string"!=typeof s[n-1]&&"string"==typeof l[n-1]){s[n-1]="<em>",l[n-1]=l[n]+"<em>",t+=1,i=!0;break}if("string"==typeof s[n-1]&&"string"!=typeof l[n-1]){s[n-1]=s[n]+"<em>",l[n-1]="<em>",t+=1,i=!0;break}}if(n===p)return a=n+1,void 0;for(r=n;p>r;r+=1){if("string"==typeof s[r]&&"string"!=typeof l[r])l[r]="";else if("string"!=typeof s[r]&&"string"==typeof l[r])s[r]="";else if(i===!0){for(u=r;p>u;u+=1){for(c=u-1;c>r;c-=1){if(s[c]===l[u]){if(c>s.length-1)do s.push("");while(c>s.length-1);s[c-1]=s[c-1]+"</em>",l[u-1]=l[u-1]+"</em>",o=u,d=[];do d.push(""),u-=1;while(u>c);s=d.concat(s),i=!1,m.push(s[u]),v.push(l[u]);break}if(l[c]===s[u]){if(c>l.length-1)do l.push("");while(c>l.length-1);l[c-1]=l[c-1]+"</em>",s[u-1]=s[u-1]+"</em>",o=u,d=[];do d.push(""),u-=1;while(u>c);l=d.concat(l),i=!1,m.push(s[u]),v.push(l[u]);break}}if(m.push(s[u]),v.push(l[u]),!i)break;if(s[u]===l[u]&&"string"==typeof s[u]){s[u-1]=s[u-1]+"</em>",l[u-1]=l[u-1]+"</em>",o=u,i=!1;break}if(s[r-1]==="<em>"+l[u]&&e.test(l[r-1])&&(0>r-2||s[r-2]!==l[u+1])){if(s[r-1]=s[r-1].replace(e,""),s.splice(r-1,0,"<em></em>"),l[u-1]=l[u-1]+"</em>",o=u,u-r>0){for(d=[],u;u>r;u-=1)d.push("");s=d.concat(s)}i=!1;break}if(l[r-1]==="<em>"+s[u]&&e.test(s[r-1])&&(0>r-2||l[r-2]!==s[u+1])){if(l[r-1]=l[r-1].replace(e,""),l.splice(r-1,0,"<em></em>"),s[u-1]=s[u-1]+"</em>",o=u,u-r>0){for(d=[],u;u>r;u-=1)d.push("");l=d.concat(l)}i=!1;break}if(l[r]===s[u]&&(")"!==s[u-1]&&"}"!==s[u-1]&&"]"!==s[u-1]&&">"!==s[u-1]&&")"!==l[r-1]&&"}"!==l[r-1]&&"]"!==l[r-1]&&">"!==l[r-1]||u===p-1||l[r+1]===s[u+1])){if(l[r-1]==="<em>"+s[u-1]){l[r-1]=l[r-1].replace(/<em>/,"<em></em>"),s[u-1]=s[u-1]+"</em>",o=r,i=!1;break}if(s.length>l.length&&s[u-1].substr(4)===l[r-1]?(s[u-2]=s[u-2]+"</em>",l[r-2]=l[r-2]+"<em></em>",l[r-1]=l[r-1].replace(/<em>/,"")):s[u-1]===l[r-1]||e.test(s[u-1])?(s[u-1]=1===u?s[u-1]+"</em>":"</em>"+s[u-1],l[r-1]=1===r?l[r-1]+"</em>":"</em>"+l[r-1]):(s[u-1]=s[u-1]+"</em>",l[r-1]="string"==typeof l[r-1]?l[r-1]+"</em>":"</em>"),o=u,u-r>0){for(d=[],u;u>r;u-=1)d.push("");l=d.concat(l)}i=!1;break}if(s[r]===l[u]&&(")"!==l[u-1]&&"}"!==l[u-1]&&"]"!==l[u-1]&&">"!==l[u-1]&&")"!==s[r-1]&&"}"!==s[r-1]&&"]"!==s[r-1]&&">"!==s[r-1]||u===p-1||s[r+1]===l[u+1])){if(s[r-1]==="<em>"+l[u-1]){s[r-1]=s[r-1].replace(/<em>/,"<em></em>"),l[u-1]=l[u-1]+"</em>",o=r,i=!1;break}if(l.length>s.length&&l[u-1].substr(4)===s[r-1]?(l[u-2]=l[u-2]+"</em>",s[r-2]=s[r-2]+"<em></em>",s[r-1]=s[r-1].replace(/<em>/,"")):l[u-1]===s[r-1]||e.test(l[u-1])?(l[u-1]=1===u?l[u-1]+"</em>":"</em>"+l[u-1],s[r-1]=1===r?s[r-1]+"</em>":"</em>"+s[r-1]):(l[u-1]=l[u-1]+"</em>",s[r-1]="string"==typeof s[r-1]?s[r-1]+"</em>":"</em>"),o=u,u-r>0){for(d=[],u;u>r;u-=1)d.push("");s=d.concat(s)}i=!1;break}}if(i){for(u=r+1;p-1>u;u+=1)if(m.push(s[u]),v.push(l[u]),"string"!=typeof s[u])s.push("");else if("string"!=typeof l[u])l.push("");else if(s[u]===l[u]&&"string"==typeof s[u-1]&&"string"==typeof l[u-1]){s[u-1]=s[u-1]+"</em>",l[u-1]=l[u-1]+"</em>",o=u,i=!1,h=!0;break}if(h){h=!1;break}}}p=Math.max(s.length,l.length)}r>u?(f.push(m.join("")),g.push(v.join(""))):(f.push(s.slice(n,u).join("")),g.push(l.slice(n,u).join(""))),r===p&&(a+=1)},r=0;p>r&&!(a>p-1);r+=1)m();return e=s.join("").replace(/\$#34;/g,'"').replace(/\$#39;/g,"'").replace(/<\/em><em>/g,v),n=l.join("").replace(/\$#34;/g,'"').replace(/\$#39;/g,"'").replace(/<\/em><em>/g,""),i&&(e.split("<em>").length>e.split("</em>").length&&(e+="</em>"),n.split("<em>").length>n.split("</em>").length&&(n+="</em>")),e+=c,n+=u,[e,n]};for(u?(e.push("<th class='texttitle' colspan='3'>"),e.push(r),e.push(" vs. "),e.push(a),e.push("</th></tr></thead><tbody>")):(e.push("<th class='texttitle' colspan='2'>"),e.push(r),e.push("</th><th class='texttitle' colspan='2'>"),e.push(a),e.push("</th></tr></thead><tbody>")),i=0;T>i;i+=1)for(D=h[i],S=D[0],o=D[1],l=D[2],c=D[3],f=D[4],m=Math.max(l-o,f-c),$=!0,v=0;m>v&&!(!isNaN(s)&&s>-1&&h.length>1&&(i>0&&v===s||0===i&&0===v)&&"equal"===S&&($=!1,b=m-(0===i?1:2)*s,b>1&&(e.push("<tr><th>...</th>"),u||e.push("<td class='skip'></td>"),e.push("<th>...</th><td class='skip'></td></tr>"),o+=b,c+=b,v+=b-1,i+1===h.length)));v+=1)"equal"!==S&&(n+=1),e.push("<tr>"),""!==d&&(k||g[l]===p[f]||"string"!=typeof g[o+1]||"string"!=typeof p[c]||x[o+1]!==C[c]||x[o]===C[c]||"string"==typeof p[c-1]&&x[o]===C[c-1]?P||g[l]===p[f]||"string"!=typeof p[c+1]||"string"!=typeof g[o]||C[c+1]!==x[o]||C[c]===x[o]||"string"==typeof g[o-1]&&C[c]===x[o-1]||(P=!0):k=!0),u?(P||"insert"===S?(e.push("<th></th><th>"),e.push(c+1),e.push("</th><td class='insert'>"),e.push(p[c]),e.push("</td></tr>")):k||"delete"===S?(e.push("<th>"),e.push(o+1),e.push("</th><th></th><td class='delete'>"),e.push(g[o]),e.push("</td></tr>")):"replace"===S?(l>o&&f>c&&g[o]!==p[c]&&(A=I(g[o],p[c])),l>o&&(e.push("<th>"),e.push(o+1),e.push("</th><th></th><td class='delete'>"),f>c?e.push(A[0]):e.push(g[o]),e.push("</td></tr>")),l>o&&f>c&&e.push("<tr>"),f>c&&(e.push("<th></th><th>"),e.push(c+1),e.push("</th><td class='insert'>"),l>o?e.push(A[1]):e.push(p[c]),e.push("</td></tr>"))):(l>o||f>c)&&(e.push("<th>"),e.push(o+1),e.push("</th><th>"),e.push(c+1),e.push("</th><td class='"),e.push(S),e.push("'>"),e.push(g[o]),e.push("</td></tr>")),k?(o+=1,k=!1):P?(c+=1,P=!1):(o+=1,c+=1)):(k||P||"string"!=typeof g[o]||"string"!=typeof p[c]?k||"string"==typeof g[o]&&"string"!=typeof p[c]?(e.push("<th>"),e.push(o+1),e.push("</th><td class='delete'>"),e.push(g[o]),e.push("</td>"),e.push("<th></th><td class='empty'></td>"),k=!1,o+=1):(P||"string"!=typeof g[o]&&"string"==typeof p[c])&&(e.push("<th></th><td class='empty'></td>"),e.push("<th>"),e.push(c+1),e.push("</th><td class='insert'>"),e.push(p[c]),e.push("</td>"),P=!1,c+=1):(A="replace"===S&&l>o&&f>c&&g[o]!==p[c]?I(g[o],p[c]):[],l>o?(e.push("<th>"),e.push(o+1),e.push("</th><td class='"),c>=f?e.push("delete"):e.push(S),e.push("'>"),2===A.length?e.push(A[0]):e.push(g[o]),e.push("</td>")):$&&e.push("<th></th><td class='empty'></td>"),f>c?(e.push("<th>"),e.push(c+1),e.push("</th><td class='"),o>=l?e.push("insert"):e.push(S),e.push("'>"),2===A.length?e.push(A[1]):e.push(p[c]),e.push("</td>")):$&&e.push("<th></th><td class='empty'></td>"),l>o&&(o+=1),f>c&&(c+=1)),e.push("</tr>"));return e.push("</tbody><tfoot><tr><th class='author' colspan='"),u?e.push("3"):e.push("4"),e.push("'>Original diff view created by <a href='https://github.com/cemerick/jsdifflib'>jsdifflib</a>. Diff view rewritten by <a href='http://prettydiff.com/'>Austin Cheney</a>.</th></tr></tfoot></table>"),[e.join("").replace(/\$#gt;/g,"&gt;").replace(/\$#lt;/g,"&lt;").replace(/\%#lt;/g,"$#lt;").replace(/\%#gt;/g,"$#gt;"),t,n]}()};(function($){var version="2.1.1",tests=[],rubies,unicode=[],rendered="han-js-rendered",classes=[rendered],fontfaces=[],han=function(){$(document).on("ready",function(){fontfaces.songti=test_for_fontface("Han Songti"),fontfaces.kaiti=test_for_fontface("Han Kaiti"),fontfaces.fangsong=test_for_fontface("Han Fangsong");for(var e in fontfaces)classes.push((fontfaces[e]?"":"no-")+"fontface-"+e);$("html").addClass(classes.join(" ")),init()})},init=function(range){if(range||!$("html").hasClass("no-han-init")){var range=range||"body";"body"===range||$(range).hasClass(rendered)?"body"!==range||$("html").hasClass(rendered)||$("html").addClass(rendered):$(range).addClass(rendered),$(range).find("ruby.pinyin").addClass("romanization"),$(range).find("ruby.zhuyin").addClass("mps"),$(range).find("ruby").each(function(){var html=$(this).html();if($(this).hasClass("mps")||tests.ruby()){if($(this).hasClass("mps")){var generic=$(this).css("font-family"),zhuyin_font=generic.match(/(sans-serif|monospace)$/)?"sans-serif":"serif",hanzi=unicode_set("hanzi"),shengmu=unicode.bopomofo.mps.shengmu,jieyin=unicode.bopomofo.mps.jieyin,yunmu=unicode.bopomofo.mps.yunmu,tone=unicode.bopomofo.tone.five,reg="/("+hanzi+")<rt>(.*)<\\/rt>/ig";html=html.replace(eval(reg),function(entire,character,mps){var form,yin,diao,data,zi;return form=mps.match(eval("/("+shengmu+")/"))?"shengmu":"",form+=mps.match(eval("/("+jieyin+")/"))?(""!==form?"-":"")+"jieyin":"",form+=mps.match(eval("/("+yunmu+")/"))?(""!==form?"-":"")+"yunmu":"",yin=mps.replace(eval("/("+tone+")/g"),""),diao=mps.match(/([\u02D9])/)?"0":mps.match(/([\u02CA])/)?"2":mps.match(/([\u02C5\u02C7])/)?"3":mps.match(/([\u02CB])/)?"4":"1",data='data-zy="'+yin+'" data-tone="'+diao+'" data-form="'+form+'"',zi='<span class="zi" '+data+">"+character+"</span>",zi+'<span class="zy">'+mps+"</span>"}),$(this).replaceWith($('<span class="han-js-zhuyin-rendered"></span>').addClass("zhuyin-"+zhuyin_font).html(html))}}else{var result=html.replace(/<rt>/gi,'</span><span class="rt"><span class="rt inner">').replace(/<\/rt>/gi,'</span></span></span><span class="rr"><span class="rb">');$(this).html('<span class="rr"><span class="rb">'+result+"</span>")}}),$("html").hasClass("han-la")&&$(range).each(function(){var hanzi=unicode_set("hanzi"),latin=unicode_set("latin")+"|"+unicode.punc[0],punc=unicode.punc;patterns=["/("+hanzi+")("+latin+"|"+punc[1]+")/ig","/("+latin+"|"+punc[2]+")("+hanzi+")/ig"],patterns.forEach(function(exp){findAndReplaceDOMText(this,{find:eval(exp),replace:"$1<hanla>$2"})},this),findAndReplaceDOMText(this,{find:"<hanla>",replace:function(){return _span("hanla")}}),this.normalize(),$("* > span.hanla:first-child").parent().each(function(){1==this.firstChild.nodeType&&($(this).before($('<span class="hanla"></span>')),$(this).find("span.hanla:first-child").remove())})}),$("html").hasClass("han-lab-underline")?$(range).find("u").charize("",!0,!0):$(range).each(function(){var e=$(this).html();$(this).html(e.replace(/<\/u>(<!--.*?-->|<wbr[ ]?[\/]?>)*?<u(\s.*?)*?>/gi,"</u>$1<u data-adjacent $2>")).find("u[data-adjacent]").addClass("adjacent").removeAttr("data-adjacent")}),$(range).find("em").charize({latin:tests.textemphasis()?"none":"individual"}),tests.quotes()||$(range).find("q q").each(function(){0!=$(this).parents("q").length%2&&$(this).addClass("double")})}},unicode_set=function(e){var t=e.match(/[hanzi|latin]/)?!0:!1,n=t?unicode[e].join("|"):unicode[e];return n},_span=function(e){var t=document.createElement("span");return t.className=e,t},findAndReplaceDOMText=function(e,t){var t=t;return t.filterElements=function(e){var t=e.nodeName.toLowerCase(),n=1==e.nodeType?e.getAttribute("class"):"",i=n&&null!=n.match(/han-js-charized/)?!0:!1;return"style"!==t&&"script"!==t&&!i},window.findAndReplaceDOMText(e,t)},inject_element_with_styles=function(e,t){var n,i,o,r=document.documentElement,a=document.createElement("div"),s=document.body,l=s||document.createElement("body");return n=['<style id="han-support">',e,"</style>"].join(""),(s?a:l).innerHTML+=n,l.appendChild(a),s||(l.style.background="",l.style.overflow="hidden",o=r.style.overflow,r.style.overflow="hidden",r.appendChild(l)),i=t(a,e),s?a.parentNode.removeChild(a):(l.parentNode.removeChild(l),r.style.overflow=o),!!i},write_on_canvas=function(e,t){var n=document.createElement("canvas");n.width="50",n.height="20",n.style.display="none",n.className="han_support_tests",document.body.appendChild(n);var i=n.getContext("2d");return i.textBaseline="top",i.font="15px "+t+", sans-serif",i.fillStyle="black",i.strokeStyle="black",i.fillText(e,0,0),i},test_for_fontface=function(e){if(!tests.fontface())return!1;try{for(var t,n=write_on_canvas("Q","sans-serif"),i=write_on_canvas("Q",e),o=1;20>=o;o++)for(var r=1;50>=r;r++){var a=n.getImageData(r,o,1,1).data,s=i.getImageData(r,o,1,1).data,l=[];if(l.sans=a[3],l.test=s[3],"undefined"!==t&&l.test!=l.sans)t=!0;else if(t)break;20==r&&20==o&&(t||(t=!1))}return $("canvas.han_support_tests").remove(),t}catch(c){return!1}};unicode.latin=["[A-Za-z0-9----]"],unicode.punc=["[@&;=_,.?!$%^*-+/]","[(\\['\"<]","[)\\]'\">]"],unicode.hanzi=["[-]","[------]","[-][-]|[-]","[-]|[-][-]|[-]","[-]|[-]","[-]"],unicode.biaodian=["[]","[]","[]"],unicode.bopomofo=[],unicode.bopomofo.mps=[],unicode.bopomofo.mps[0]="[-]",unicode.bopomofo.mps.shengmu="[--]",unicode.bopomofo.mps.jieyin="[-]",unicode.bopomofo.mps.yunmu="[-]",unicode.bopomofo.extend="[-]",unicode.bopomofo.tone=[],unicode.bopomofo.tone.five="[]",unicode.bopomofo.tone.extend="[]",tests.columnwidth=function(){var e=$('<div style="display: none; column-width: 200px; -webkit-column-width: 200px;">tester</div>'),t=/^200px$/.test(e.css("-webkit-column-width"))||/^200px$/.test(e.css("-moz-column-width"))||/^200px$/.test(e.css("-ms-column-width"))||/^200px$/.test(e.css("column-width"))?!0:!1;return t},tests.fontface=function(){var e;return inject_element_with_styles('@font-face {font-family:"font";src:url("https://")}',function(t,n){var i=document.getElementById("han-support"),o=i.sheet||i.styleSheet,r=o?o.cssRules&&o.cssRules[0]?o.cssRules[0].cssText:o.cssText||"":"";e=/src/i.test(r)&&0===r.indexOf(n.split(" ")[0])}),e},tests.ruby=function(){function e(e,t){var n;return window.getComputedStyle?n=document.defaultView.getComputedStyle(e,null).getPropertyValue(t):e.currentStyle&&(n=e.currentStyle[t]),n}if(null!=rubies)return rubies;var t=document.createElement("ruby"),n=document.createElement("rt"),i=document.createElement("rp"),o=document.documentElement,r="display";return t.appendChild(i),t.appendChild(n),o.appendChild(t),rubies="none"==e(i,r)||"ruby"==e(t,r)&&"ruby-text"==e(n,r)?!0:!1,o.removeChild(t),t=null,n=null,i=null,rubies},tests.textemphasis=function(){var e=$('<span style="display: none; text-emphasis: dot; -moz-text-emphasis: dot; -ms-text-emphasis: dot; -webkit-text-emphasis: dot;">tester</span>'),t=/^dot$/.test(e.css("-webkit-text-emphasis-style"))||/^dot$/.test(e.css("text-emphasis-style"))||/^dot$/.test(e.css("-moz-text-emphasis-style"))||/^dot$/.test(e.css("-ms-text-emphasis-style"))?!0:!1;return t},tests.quotes=function(){var e=$("<q style=\"display: none; quotes: '' '' '' ''\">tester</q>"),t=/^"" "" "" ""$/.test(e.css("quotes"));return t},tests.writingmode=function(){var e=$('<div style="display: none; writing-mode: tb-rl; -moz-writing-mode: tb-rl; -ms-writing-mode: tb-rl; -webkit-writing-mode: vertical-rl;">tester</div>'),t=/^tb-rl$/.test(e.css("writing-mode"))||/^vertical-rl$/.test(e.css("-webkit-writing-mode"))||/^tb-rl$/.test(e.css("-moz-writing-mode"))||/^tb-rl$/.test(e.css("-ms-writing-mode"))?!0:!1;return t},$.fn.extend({hanInit:function(){return init(this)},bitouwei:function(){return this.each(function(){$(this).addClass("han-js-bitouwei-rendered");var tou=unicode.biaodian[0]+unicode.biaodian[2],wei=unicode.biaodian[1],start=unicode.punc[0]+unicode.punc[2],end=unicode.punc[1];tou=tou.replace(/\]\[/g,""),start=start.replace(/\]\[/g,""),findAndReplaceDOMText(this,{find:eval("/("+wei+")("+unicode_set("hanzi")+")("+tou+")/ig"),wrap:_span("bitouwei bitouweidian")}),findAndReplaceDOMText(this,{find:eval("/("+unicode_set("hanzi")+")("+tou+")/ig"),wrap:_span("bitouwei bitoudian")}),findAndReplaceDOMText(this,{find:eval("/("+wei+")("+unicode_set("hanzi")+")/ig"),wrap:_span("bitouwei biweidian")}),findAndReplaceDOMText(this,{find:eval("/("+end+")("+unicode_set("latin")+"+)("+start+")/ig"),wrap:_span("bitouwei bitouweidian")}),findAndReplaceDOMText(this,{find:eval("/("+unicode_set("latin")+"+)("+start+")/ig"),wrap:_span("bitouwei bitoudian")}),findAndReplaceDOMText(this,{find:eval("/("+end+")("+unicode_set("latin")+"+)/ig"),wrap:_span("bitouwei biweidian")})})},charize:function(glyph,charClass,innerSpan){var glyph=glyph||{},charClass=1==charClass?!0:!1;return glyph={cjk:glyph.cjk||"individual",bitouwei:0==glyph.bitouwei?!1:!0,latin:glyph.latin||"group"},this.each(function(){glyph.bitouwei&&$(this).bitouwei(),"individual"===glyph.cjk&&findAndReplaceDOMText(this,{find:eval("/("+unicode_set("hanzi")+")/ig"),wrap:_span("char cjk")}),("individual"===glyph.cjk||"biaodian"===glyph.cjk)&&findAndReplaceDOMText(this,{find:eval("/("+unicode_set("biaodian")+")/ig"),wrap:_span("char cjk biaodian")}),"group"===glyph.cjk&&findAndReplaceDOMText(this,{find:eval("/("+unicode_set("hanzi")+"+|"+unicode_set("biaodian")+"+)/ig"),wrap:_span("char cjk")});var latin_regex="group"===glyph.latin?"/("+unicode_set("latin")+"+)/ig":"/("+unicode_set("latin")+")/ig";findAndReplaceDOMText(this,{find:eval(latin_regex),wrap:_span("char latin")}),findAndReplaceDOMText(this,{find:eval("/("+unicode_set("punc")+"+)/ig"),wrap:_span("char latin punc")}),findAndReplaceDOMText(this,{find:/([\s]+)/gi,wrap:_span("char space")}),innerSpan&&$(this).find(".char").each(function(){$(this).html($("<span>").text($(this).text()))}),charClass&&$(this).addClass("han-js-charized")})}});for(var feature in tests){if(classes.push((tests[feature]()?"":"no-")+feature),!tester)var tester="";tester+="    "+feature+": tests['"+feature+"'](),\n"}!function(window){eval("tester = ({\n"+tester.replace(/\n$/gi,"\nfont: test_for_fontface\n}")+")")}(),han(),window.han={unicode:unicode_set,support:tester}})(jQuery),window.findAndReplaceDOMText=function(){function e(e){return(e+"").replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function t(){return n.apply(null,arguments)||i.apply(null,arguments)}function n(e,n,o,r,a){if(n&&!n.nodeType&&2>=arguments.length)return!1;var s="function"==typeof o;s&&(o=function(e){return function(t,n){return e(t.text,n.startIndex)}}(o));var l=i(n,{find:e,wrap:s?null:o,replace:s?o:"$"+(r||"&"),prepMatch:function(e,t){if(!e[0])throw"findAndReplaceDOMText cannot handle zero-length matches";if(r>0){var n=e[r];e.index+=e[0].indexOf(n),e[0]=n}return e.endIndex=e.index+e[0].length,e.startIndex=e.index,e.index=t,e},filterElements:a});return t.revert=function(){return l.revert()},!0}function i(e,t){return new o(e,t)}function o(e,t){t.portionMode=t.portionMode||r,this.node=e,this.options=t,this.prepMatch=t.prepMatch||this.prepMatch,this.reverts=[],this.matches=this.search(),this.matches.length&&this.processMatches()}var r="retain",a="first",s=document;return{}.toString,t.Finder=o,o.prototype={search:function(){var t,n=0,i=this.options.find,o=this.getAggregateText(),r=[];if(i="string"==typeof i?RegExp(e(i),"g"):i,i.global)for(;t=i.exec(o);)r.push(this.prepMatch(t,n++));else(t=o.match(i))&&r.push(this.prepMatch(t,0));return r},prepMatch:function(e,t){if(!e[0])throw Error("findAndReplaceDOMText cannot handle zero-length matches");return e.endIndex=e.index+e[0].length,e.startIndex=e.index,e.index=t,e},getAggregateText:function(){function e(n){if(3===n.nodeType)return n.data;if(t&&!t(n))return"";var i="";if(n=n.firstChild)do i+=e(n);while(n=n.nextSibling);return i}var t=this.options.filterElements;return e(this.node)},processMatches:function(){var e,t,n,i=this.matches,o=this.node,r=this.options.filterElements,a=[],s=o,l=i.shift(),c=0,u=0,d=0;e:for(;;){if(3===s.nodeType&&(!t&&s.length+c>=l.endIndex?t={node:s,index:d++,text:s.data.substring(l.startIndex-c,l.endIndex-c),indexInMatch:c-l.startIndex,indexInNode:l.startIndex-c,endIndexInNode:l.endIndex-c,isEnd:!0}:e&&a.push({node:s,index:d++,text:s.data,indexInMatch:c-l.startIndex,indexInNode:0}),!e&&s.length+c>l.startIndex&&(e={node:s,index:d++,indexInMatch:0,indexInNode:l.startIndex-c,endIndexInNode:l.endIndex-c,text:s.data.substring(l.startIndex-c,l.endIndex-c)}),c+=s.data.length),n=1===s.nodeType&&r&&!r(s),e&&t){if(s=this.replaceMatch(l,e,a,t),c-=t.node.data.length-t.endIndexInNode,e=null,t=null,a=[],l=i.shift(),d=0,u++,!l)break}else if(!n&&(s.firstChild||s.nextSibling)){s=s.firstChild||s.nextSibling;continue}for(;;){if(s.nextSibling){s=s.nextSibling;break}if(s.parentNode===o)break e;s=s.parentNode}}},revert:function(){for(var e=this.reverts.length;e--;)this.reverts[e]();this.reverts=[]},prepareReplacementString:function(e,t,n){var i=this.options.portionMode;return i===a&&t.indexInMatch>0?"":(e=e.replace(/\$(\d+|&|`|')/g,function(e,t){var i;switch(t){case"&":i=n[0];break;case"`":i=n.input.substring(0,n.startIndex);break;case"'":i=n.input.substring(n.endIndex);break;default:i=n[+t]}return i}),i===a?e:t.isEnd?e.substring(t.indexInMatch):e.substring(t.indexInMatch,t.indexInMatch+t.text.length))},getPortionReplacementNode:function(e,t,n){var i=this.options.replace||"$&",o=this.options.wrap;if(o&&o.nodeType){var r=s.createElement("div");r.innerHTML=o.outerHTML||(new XMLSerializer).serializeToString(o),o=r.firstChild}if("function"==typeof i)return i=i(e,t,n),i&&i.nodeType?i:s.createTextNode(i+"");var a="string"==typeof o?s.createElement(o):o;return i=s.createTextNode(this.prepareReplacementString(i,e,t,n)),a?(a.appendChild(i),a):i},replaceMatch:function(e,t,n,i){var o,r,a=t.node,l=i.node;if(a===l){var c=a;t.indexInNode>0&&(o=s.createTextNode(c.data.substring(0,t.indexInNode)),c.parentNode.insertBefore(o,c));var u=this.getPortionReplacementNode(i,e);return c.parentNode.insertBefore(u,c),i.endIndexInNode<c.length&&(r=s.createTextNode(c.data.substring(i.endIndexInNode)),c.parentNode.insertBefore(r,c)),c.parentNode.removeChild(c),this.reverts.push(function(){o===u.previousSibling&&o.parentNode.removeChild(o),r===u.nextSibling&&r.parentNode.removeChild(r),u.parentNode.replaceChild(c,u)}),u}o=s.createTextNode(a.data.substring(0,t.indexInNode)),r=s.createTextNode(l.data.substring(i.endIndexInNode));for(var d=this.getPortionReplacementNode(t,e),f=[],g=0,p=n.length;p>g;++g){var h=n[g],m=this.getPortionReplacementNode(h,e);h.node.parentNode.replaceChild(m,h.node),this.reverts.push(function(e,t){return function(){t.parentNode.replaceChild(e.node,t)}}(h,m)),f.push(m)}var v=this.getPortionReplacementNode(i,e);return a.parentNode.insertBefore(o,a),a.parentNode.insertBefore(d,a),a.parentNode.removeChild(a),l.parentNode.insertBefore(v,l),l.parentNode.insertBefore(r,l),l.parentNode.removeChild(l),this.reverts.push(function(){o.parentNode.removeChild(o),d.parentNode.replaceChild(a,d),r.parentNode.removeChild(r),v.parentNode.replaceChild(l,v)}),v}},t}();var CryptoJS=CryptoJS||function(e,t){var n={},i=n.lib={},o=i.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var n=new e;return t&&n.mixIn(t),n.$super=this,n},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.$super.extend(this)}}}(),r=i.WordArray=o.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes,e=e.sigBytes;if(this.clamp(),i%4)for(var o=0;e>o;o++)t[i+o>>>2]|=(255&n[o>>>2]>>>24-8*(o%4))<<24-8*((i+o)%4);else if(n.length>65535)for(o=0;e>o;o+=4)t[i+o>>>2]=n[o>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-8*(n%4),t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);
return e.words=this.words.slice(0),e},random:function(t){for(var n=[],i=0;t>i;i+=4)n.push(0|4294967296*e.random());return r.create(n,t)}}),a=n.enc={},s=a.Hex={stringify:function(e){for(var t=e.words,e=e.sigBytes,n=[],i=0;e>i;i++){var o=255&t[i>>>2]>>>24-8*(i%4);n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],i=0;t>i;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-4*(i%8);return r.create(n,t/2)}},l=a.Latin1={stringify:function(e){for(var t=e.words,e=e.sigBytes,n=[],i=0;e>i;i++)n.push(String.fromCharCode(255&t[i>>>2]>>>24-8*(i%4)));return n.join("")},parse:function(e){for(var t=e.length,n=[],i=0;t>i;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-8*(i%4);return r.create(n,t)}},c=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},u=i.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=r.create(),this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,i=n.words,o=n.sigBytes,a=this.blockSize,s=o/(4*a),s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0),t=s*a,o=e.min(4*t,o);if(t){for(var l=0;t>l;l+=a)this._doProcessBlock(i,l);l=i.splice(0,t),n.sigBytes-=o}return r.create(l,o)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});i.Hasher=u.extend({init:function(){this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize(),this._hash},clone:function(){var e=u.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:16,_createHelper:function(e){return function(t,n){return e.create(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return d.HMAC.create(e,n).finalize(t)}}});var d=n.algo={};return n}(Math);(function(e){function t(e,t,n,i,o,r,a){return e=e+(t&n|~t&i)+o+a,(e<<r|e>>>32-r)+t}function n(e,t,n,i,o,r,a){return e=e+(t&i|n&~i)+o+a,(e<<r|e>>>32-r)+t}function i(e,t,n,i,o,r,a){return e=e+(t^n^i)+o+a,(e<<r|e>>>32-r)+t}function o(e,t,n,i,o,r,a){return e=e+(n^(t|~i))+o+a,(e<<r|e>>>32-r)+t}var r=CryptoJS,a=r.lib,s=a.WordArray,a=a.Hasher,l=r.algo,c=[];(function(){for(var t=0;64>t;t++)c[t]=0|4294967296*e.abs(e.sin(t+1))})(),l=l.MD5=a.extend({_doReset:function(){this._hash=s.create([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,r){for(var a=0;16>a;a++){var s=r+a,l=e[s];e[s]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}for(var s=this._hash.words,l=s[0],u=s[1],d=s[2],f=s[3],a=0;64>a;a+=4)16>a?(l=t(l,u,d,f,e[r+a],7,c[a]),f=t(f,l,u,d,e[r+a+1],12,c[a+1]),d=t(d,f,l,u,e[r+a+2],17,c[a+2]),u=t(u,d,f,l,e[r+a+3],22,c[a+3])):32>a?(l=n(l,u,d,f,e[r+(a+1)%16],5,c[a]),f=n(f,l,u,d,e[r+(a+6)%16],9,c[a+1]),d=n(d,f,l,u,e[r+(a+11)%16],14,c[a+2]),u=n(u,d,f,l,e[r+a%16],20,c[a+3])):48>a?(l=i(l,u,d,f,e[r+(3*a+5)%16],4,c[a]),f=i(f,l,u,d,e[r+(3*a+8)%16],11,c[a+1]),d=i(d,f,l,u,e[r+(3*a+11)%16],16,c[a+2]),u=i(u,d,f,l,e[r+(3*a+14)%16],23,c[a+3])):(l=o(l,u,d,f,e[r+3*a%16],6,c[a]),f=o(f,l,u,d,e[r+(3*a+7)%16],10,c[a+1]),d=o(d,f,l,u,e[r+(3*a+14)%16],15,c[a+2]),u=o(u,d,f,l,e[r+(3*a+5)%16],21,c[a+3]));s[0]=0|s[0]+l,s[1]=0|s[1]+u,s[2]=0|s[2]+d,s[3]=0|s[3]+f},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;for(t[i>>>5]|=128<<24-i%32,t[(i+64>>>9<<4)+14]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process(),e=this._hash.words,t=0;4>t;t++)n=e[t],e[t]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}}),r.MD5=a._createHelper(l),r.HmacMD5=a._createHmacHelper(l)})(Math),function(e,t){"use strict";var n=6,i=4,o="asc",r="desc",a="_ng_field_",s="_ng_depth_",l="_ng_hidden_",c="_ng_column_",u=/CUSTOM_FILTERS/g,d=/COL_FIELD/g,f=/DISPLAY_CELL_TEMPLATE/g,g=/EDITABLE_CELL_TEMPLATE/g,p=/<.+>/;e.ngGrid={},e.ngGrid.i18n={};var h=angular.module("ngGrid.services",[]),m=angular.module("ngGrid.directives",[]),v=angular.module("ngGrid.filters",[]);angular.module("ngGrid",["ngGrid.services","ngGrid.directives","ngGrid.filters"]);var b=function(e,t,i,o){if(void 0===e.selectionProvider.selectedItems)return!0;var r,a=i.which||i.keyCode,s=!1,l=!1,c=e.selectionProvider.lastClickedRow.rowIndex,u=e.columns.filter(function(e){return e.visible}),d=e.columns.filter(function(e){return e.pinned});if(e.col&&(r=u.indexOf(e.col)),37!=a&&38!=a&&39!=a&&40!=a&&9!=a&&13!=a)return!0;if(e.enableCellSelection){9==a&&i.preventDefault();var f=e.showSelectionCheckbox?1==e.col.index:0==e.col.index,g=1==e.$index||0==e.$index,p=e.$index==e.renderedColumns.length-1||e.$index==e.renderedColumns.length-2,h=u.indexOf(e.col)==u.length-1,m=d.indexOf(e.col)==d.length-1;if(37==a||9==a&&i.shiftKey){var v=0;f||(r-=1),g?f&&9==a&&i.shiftKey?(v=o.$canvas.width(),r=u.length-1,l=!0):v=o.$viewport.scrollLeft()-e.col.width:d.length>0&&(v=o.$viewport.scrollLeft()-u[r].width),o.$viewport.scrollLeft(v)}else(39==a||9==a&&!i.shiftKey)&&(p?h&&9==a&&!i.shiftKey?(o.$viewport.scrollLeft(0),r=e.showSelectionCheckbox?1:0,s=!0):o.$viewport.scrollLeft(o.$viewport.scrollLeft()+e.col.width):m&&o.$viewport.scrollLeft(0),h||(r+=1))}var b;b=e.configGroups.length>0?o.rowFactory.parsedData.filter(function(e){return!e.isAggRow}):o.filteredRows;var y=0;if(0!=c&&(38==a||13==a&&i.shiftKey||9==a&&i.shiftKey&&l)?y=-1:c!=b.length-1&&(40==a||13==a&&!i.shiftKey||9==a&&s)&&(y=1),y){var w=b[c+y];w.beforeSelectionChange(w,i)&&(w.continueSelection(i),e.$emit("ngGridEventDigestGridParent"),e.selectionProvider.lastClickedRow.renderedRowIndex>=e.renderedRows.length-n-2?o.$viewport.scrollTop(o.$viewport.scrollTop()+e.rowHeight):n+2>=e.selectionProvider.lastClickedRow.renderedRowIndex&&o.$viewport.scrollTop(o.$viewport.scrollTop()-e.rowHeight))}return e.enableCellSelection&&setTimeout(function(){e.domAccessProvider.focusCellElement(e,e.renderedColumns.indexOf(u[r]))},3),!1};String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,n=Number(arguments[1])||0;for(n=0>n?Math.ceil(n):Math.floor(n),0>n&&(n+=t);t>n;n++)if(n in this&&this[n]===e)return n;return-1}),Array.prototype.filter||(Array.prototype.filter=function(e){var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var i=[],o=arguments[1],r=0;n>r;r++)if(r in t){var a=t[r];e.call(o,a,r,t)&&i.push(a)}return i}),v.filter("checkmark",function(){return function(e){return e?"":""}}),v.filter("ngColumns",function(){return function(e){return e.filter(function(e){return!e.isAggCol})}}),h.factory("$domUtilityService",["$utilityService",function(e){var n={},i={},o=function(){var e=t("<div></div>");e.appendTo("body"),e.height(100).width(100).css("position","absolute").css("overflow","scroll"),e.append('<div style="height: 400px; width: 400px;"></div>'),n.ScrollH=e.height()-e[0].clientHeight,n.ScrollW=e.width()-e[0].clientWidth,e.empty(),e.attr("style",""),e.append('<span style="font-family: Verdana, Helvetica, Sans-Serif; font-size: 14px;"><strong>M</strong></span>'),n.LetterW=e.children().first().width(),e.remove()};return n.eventStorage={},n.AssignGridContainers=function(e,i,o){o.$root=t(i),o.$topPanel=o.$root.find(".ngTopPanel"),o.$groupPanel=o.$root.find(".ngGroupPanel"),o.$headerContainer=o.$topPanel.find(".ngHeaderContainer"),e.$headerContainer=o.$headerContainer,o.$headerScroller=o.$topPanel.find(".ngHeaderScroller"),o.$headers=o.$headerScroller.children(),o.$viewport=o.$root.find(".ngViewport"),o.$canvas=o.$viewport.find(".ngCanvas"),o.$footerPanel=o.$root.find(".ngFooterPanel"),e.$watch(function(){return o.$viewport.scrollLeft()},function(e){return o.$headerContainer.scrollLeft(e)}),n.UpdateGridLayout(e,o)},n.getRealWidth=function(e){var n=0,i={visibility:"hidden",display:"block"},o=e.parents().andSelf().not(":visible");return t.swap(o[0],i,function(){n=e.outerWidth()}),n},n.UpdateGridLayout=function(e,t){var i=t.$viewport.scrollTop();t.elementDims.rootMaxW=t.$root.width(),t.$root.is(":hidden")&&(t.elementDims.rootMaxW=n.getRealWidth(t.$root)),t.elementDims.rootMaxH=t.$root.height(),t.refreshDomSizes(),e.adjustScrollTop(i,!0)},n.numberOfGrids=0,n.BuildStyles=function(i,o,r){var a,s=o.config.rowHeight,l=o.$styleSheet,c=o.gridId,u=i.columns,d=0,f=0;o.config.inlineAggregate&&(f=125*o.config.groups.length),l||(l=t("#"+c),l[0]||(l=t("<style id='"+c+"' type='text/css' rel='stylesheet' />").appendTo(o.$root))),l.empty();var g=i.totalRowWidth();a="."+c+" .ngCanvas { width: "+g+"px; }"+"."+c+" .ngRow { width: "+g+"px; left: "+f+"px; }"+"."+c+" .ngCanvas { width: "+g+"px; }"+"."+c+" .ngHeaderScroller { width: "+(g+n.ScrollH)+"px; left: "+f+"px; }";for(var p=0;u.length>p;p++){var h=u[p];if(h.visible!==!1){var m=h.pinned?o.$viewport.scrollLeft()+d:d;a+="."+c+" .col"+p+" { width: "+h.width+"px; left: "+m+"px; height: "+s+"px }"+"."+c+" .colt"+p+" { width: "+h.width+"px; }",d+=h.width}}e.isIe?l[0].styleSheet.cssText=a:l[0].appendChild(document.createTextNode(a)),o.$styleSheet=l,r&&(i.adjustScrollLeft(o.$viewport.scrollLeft()),n.digest(i))},n.setColLeft=function(t,n,o){if(o.$styleSheet){var r=i[t.index];r||(r=i[t.index]=RegExp(".col"+t.index+" { width: [0-9]+px; left: [0-9]+px"));var a=o.$styleSheet.html(),s=a.replace(r,".col"+t.index+" { width: "+t.width+"px; left: "+n+"px");e.isIe?setTimeout(function(){o.$styleSheet.html(s)}):o.$styleSheet.html(s)}},n.setColLeft.immediate=1,n.RebuildGrid=function(e,t){n.UpdateGridLayout(e,t),t.config.maintainColumnRatios&&t.configureColumnWidths(),e.adjustScrollLeft(t.$viewport.scrollLeft()),n.BuildStyles(e,t,!0)},n.digest=function(e){e.$root.$$phase||e.$digest()},n.ScrollH=17,n.ScrollW=17,n.LetterW=10,o(),n}]),h.factory("$sortService",["$parse",function(e){var t={};return t.colSortFnCache={},t.guessSortFn=function(e){var n=typeof e;switch(n){case"number":return t.sortNumber;case"boolean":return t.sortBool;case"string":return e.match(/^-?[$]?[\d,.]+%?$/)?t.sortNumberStr:t.sortAlpha;default:return"[object Date]"===Object.prototype.toString.call(e)?t.sortDate:t.basicSort}},t.basicSort=function(e,t){return e==t?0:t>e?-1:1},t.sortNumber=function(e,t){return e-t},t.sortNumberStr=function(e,t){var n,i,o=!1,r=!1;return n=parseFloat(e.replace(/[^0-9.-]/g,"")),isNaN(n)&&(o=!0),i=parseFloat(t.replace(/[^0-9.-]/g,"")),isNaN(i)&&(r=!0),o&&r?0:o?1:r?-1:n-i},t.sortAlpha=function(e,t){var n=e.toLowerCase(),i=t.toLowerCase();return n==i?0:i>n?-1:1},t.sortDate=function(e,t){var n=e.getTime(),i=t.getTime();return n==i?0:i>n?-1:1},t.sortBool=function(e,t){return e&&t?0:e||t?e?1:-1:0},t.sortData=function(n,i){if(i&&n){var r,a,s=n.fields.length,l=n.fields,c=i.slice(0);i.sort(function(i,u){for(var d,f=0,g=0;0==f&&s>g;){r=n.columns[g],a=n.directions[g],d=t.getSortFn(r,c);var p=e(l[g])(i),h=e(l[g])(u);!p&&0!=p||!h&&0!=h?h||p?p?h||(f=-1):f=1:f=0:f=d(p,h),g++}return a===o?f:0-f})}},t.Sort=function(e,n){t.isSorting||(t.isSorting=!0,t.sortData(e,n),t.isSorting=!1)},t.getSortFn=function(n,i){var o,r=void 0;if(t.colSortFnCache[n.field])r=t.colSortFnCache[n.field];else if(void 0!=n.sortingAlgorithm)r=n.sortingAlgorithm,t.colSortFnCache[n.field]=n.sortingAlgorithm;else{if(o=i[0],!o)return r;r=t.guessSortFn(e(n.field)(o)),r?t.colSortFnCache[n.field]=r:r=t.sortAlpha}return r},t}]),h.factory("$utilityService",["$parse",function(n){var i=/function (.{1,})\(/,o={visualLength:function(e){var n=document.getElementById("testDataLength");return n||(n=document.createElement("SPAN"),n.id="testDataLength",n.style.visibility="hidden",document.body.appendChild(n)),t(n).css("font",t(e).css("font")),n.innerHTML=t(e).text(),n.offsetWidth},forIn:function(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)},evalProperty:function(e,t){return n(t)(e)},endsWith:function(e,t){return e&&t&&"string"==typeof e?-1!==e.indexOf(t,e.length-t.length):!1},isNullOrUndefined:function(e){return void 0===e||null===e?!0:!1},getElementsByClassName:function(e){for(var t=[],n=RegExp("\\b"+e+"\\b"),i=document.getElementsByTagName("*"),o=0;i.length>o;o++){var r=i[o].className;n.test(r)&&t.push(i[o])}return t},newId:function(){var e=(new Date).getTime();return function(){return e+=1}}(),seti18n:function(t,n){var i=e.ngGrid.i18n[n];for(var o in i)t.i18n[o]=i[o]},getInstanceType:function(e){var t=i.exec(""+e.constructor);return t&&t.length>1?t[1]:""},ieVersion:function(){for(var e=3,t=document.createElement("div"),n=t.getElementsByTagName("i");t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->",n[0];);return e>4?e:void 0}()};return t.extend(o,{isIe:function(){return void 0!==o.ieVersion}()}),o}]);var y=function(e,t,n,i){var o=this;o.rowIndex=0,o.offsetTop=o.rowIndex*n,o.entity=e,o.label=e.gLabel,o.field=e.gField,o.depth=e.gDepth,o.parent=e.parent,o.children=e.children,o.aggChildren=e.aggChildren,o.aggIndex=e.aggIndex,o.collapsed=i,o.isAggRow=!0,o.offsetLeft=25*e.gDepth,o.aggLabelFilter=e.aggLabelFilter,o.toggleExpand=function(){o.collapsed=o.collapsed?!1:!0,o.orig&&(o.orig.collapsed=o.collapsed),o.notifyChildren()},o.setExpand=function(e){o.collapsed=e,o.notifyChildren()},o.notifyChildren=function(){for(var e=Math.max(t.aggCache.length,o.children.length),n=0;e>n;n++)if(o.aggChildren[n]&&(o.aggChildren[n].entity[l]=o.collapsed,o.collapsed&&o.aggChildren[n].setExpand(o.collapsed)),o.children[n]&&(o.children[n][l]=o.collapsed),n>o.aggIndex&&t.aggCache[n]){var i=t.aggCache[n],r=30*o.children.length;i.offsetTop=o.collapsed?i.offsetTop-r:i.offsetTop+r}t.renderedChange()},o.aggClass=function(){return o.collapsed?"ngAggArrowCollapsed":"ngAggArrowExpanded"},o.totalChildren=function(){if(o.aggChildren.length>0){var e=0,t=function(n){n.aggChildren.length>0?angular.forEach(n.aggChildren,function(e){t(e)}):e+=n.children.length};return t(o),e}return o.children.length},o.copy=function(){var e=new y(o.entity,t,n,i);return e.orig=o,e}},w=function(e,n,i,a,s,l){var c=this,d=e.colDef,f=500,g=0,h=null;c.colDef=e.colDef,c.width=d.width,c.groupIndex=0,c.isGroupedBy=!1,c.minWidth=d.minWidth?d.minWidth:50,c.maxWidth=d.maxWidth?d.maxWidth:9e3,c.enableCellEdit=e.enableCellEdit||d.enableCellEdit,c.headerRowHeight=e.headerRowHeight,c.displayName=d.displayName||d.field,c.index=e.index,c.isAggCol=e.isAggCol,c.cellClass=d.cellClass,c.sortPriority=void 0,c.cellFilter=d.cellFilter?d.cellFilter:"",c.field=d.field,c.aggLabelFilter=d.cellFilter||d.aggLabelFilter,c.visible=l.isNullOrUndefined(d.visible)||d.visible,c.sortable=!1,c.resizable=!1,c.pinnable=!1,c.pinned=e.enablePinning&&d.pinned,c.originalIndex=c.index,c.groupable=l.isNullOrUndefined(d.groupable)||d.groupable,e.enableSort&&(c.sortable=l.isNullOrUndefined(d.sortable)||d.sortable),e.enableResize&&(c.resizable=l.isNullOrUndefined(d.resizable)||d.resizable),e.enablePinning&&(c.pinnable=l.isNullOrUndefined(d.pinnable)||d.pinnable),c.sortDirection=void 0,c.sortingAlgorithm=d.sortFn,c.headerClass=d.headerClass,c.cursor=c.sortable?"pointer":"default",c.headerCellTemplate=d.headerCellTemplate||s.get("headerCellTemplate.html"),c.cellTemplate=d.cellTemplate||s.get("cellTemplate.html").replace(u,c.cellFilter?"|"+c.cellFilter:""),c.enableCellEdit&&(c.cellEditTemplate=s.get("cellEditTemplate.html"),c.editableCellTemplate=d.editableCellTemplate||s.get("editableCellTemplate.html")),d.cellTemplate&&!p.test(d.cellTemplate)&&(c.cellTemplate=t.ajax({type:"GET",url:d.cellTemplate,async:!1}).responseText),c.enableCellEdit&&d.editableCellTemplate&&!p.test(d.editableCellTemplate)&&(c.editableCellTemplate=t.ajax({type:"GET",url:d.editableCellTemplate,async:!1}).responseText),d.headerCellTemplate&&!p.test(d.headerCellTemplate)&&(c.headerCellTemplate=t.ajax({type:"GET",url:d.headerCellTemplate,async:!1}).responseText),c.colIndex=function(){var e=c.pinned?"pinned ":"";return e+="col"+c.index+" colt"+c.index,c.cellClass&&(e+=" "+c.cellClass),e},c.groupedByClass=function(){return c.isGroupedBy?"ngGroupedByIcon":"ngGroupIcon"},c.toggleVisible=function(){c.visible=!c.visible},c.showSortButtonUp=function(){return c.sortable?c.sortDirection===r:c.sortable},c.showSortButtonDown=function(){return c.sortable?c.sortDirection===o:c.sortable},c.noSortVisible=function(){return!c.sortDirection},c.sort=function(t){if(!c.sortable)return!0;var n=c.sortDirection===o?r:o;return c.sortDirection=n,e.sortCallback(c,t),!1},c.gripClick=function(){g++,1===g?h=setTimeout(function(){g=0},f):(clearTimeout(h),e.resizeOnDataCallback(c),g=0)},c.gripOnMouseDown=function(e){return e.ctrlKey&&!c.pinned?(c.toggleVisible(),a.BuildStyles(n,i),!0):(e.target.parentElement.style.cursor="col-resize",c.startMousePosition=e.clientX,c.origWidth=c.width,t(document).mousemove(c.onMouseMove),t(document).mouseup(c.gripOnMouseUp),!1)},c.onMouseMove=function(e){var t=e.clientX-c.startMousePosition,o=t+c.origWidth;return c.width=c.minWidth>o?c.minWidth:o>c.maxWidth?c.maxWidth:o,a.BuildStyles(n,i),!1},c.gripOnMouseUp=function(e){return t(document).off("mousemove",c.onMouseMove),t(document).off("mouseup",c.gripOnMouseUp),e.target.parentElement.style.cursor="default",n.adjustScrollLeft(0),a.digest(n),!1},c.copy=function(){var t=new w(e,n,i,a,s);return t.isClone=!0,t.orig=c,t},c.setVars=function(e){c.orig=e,c.width=e.width,c.groupIndex=e.groupIndex,c.isGroupedBy=e.isGroupedBy,c.displayName=e.displayName,c.index=e.index,c.isAggCol=e.isAggCol,c.cellClass=e.cellClass,c.cellFilter=e.cellFilter,c.field=e.field,c.aggLabelFilter=e.aggLabelFilter,c.visible=e.visible,c.sortable=e.sortable,c.resizable=e.resizable,c.pinnable=e.pinnable,c.pinned=e.pinned,c.originalIndex=e.originalIndex,c.sortDirection=e.sortDirection,c.sortingAlgorithm=e.sortingAlgorithm,c.headerClass=e.headerClass,c.headerCellTemplate=e.headerCellTemplate,c.cellTemplate=e.cellTemplate,c.cellEditTemplate=e.cellEditTemplate}},x=function(e){this.outerHeight=null,this.outerWidth=null,t.extend(this,e)},C=function(e){var t,n=this;n.selectInputElement=function(e){var t=e.nodeName.toLowerCase();("input"==t||"textarea"==t)&&e.select()},n.focusCellElement=function(n,i){if(n.selectionProvider.lastClickedRow){var o=void 0!=i?i:t,r=n.selectionProvider.lastClickedRow.clone?n.selectionProvider.lastClickedRow.clone.elm:n.selectionProvider.lastClickedRow.elm;if(void 0!=o&&r){var a=angular.element(r[0].children).filter(function(){return 8!=this.nodeType}),s=Math.max(Math.min(n.renderedColumns.length-1,o),0);e.config.showSelectionCheckbox&&angular.element(a[s]).scope()&&0==angular.element(a[s]).scope().col.index&&(s=1),a[s]&&a[s].children[0].focus(),t=o}}};var i=function(e,t){e.css({"-webkit-touch-callout":t,"-webkit-user-select":t,"-khtml-user-select":t,"-moz-user-select":"none"==t?"-moz-none":t,"-ms-user-select":t,"user-select":t})};n.selectionHandlers=function(t,n){var o=!1;n.bind("keydown",function(r){if(16==r.keyCode)return i(n,"none",r),!0;if(!o){o=!0;var a=b(t,n,r,e);return o=!1,a}return!0}),n.bind("keyup",function(e){return 16==e.keyCode&&i(n,"text",e),!0})}},T=function(n,i,o,r){var a=this;a.colToMove=void 0,a.groupToMove=void 0,a.assignEvents=function(){n.config.jqueryUIDraggable&&!n.config.enablePinning?n.$groupPanel.droppable({addClasses:!1,drop:function(e){a.onGroupDrop(e)}}):(n.$groupPanel.on("mousedown",a.onGroupMouseDown).on("dragover",a.dragOver).on("drop",a.onGroupDrop),n.$headerScroller.on("mousedown",a.onHeaderMouseDown).on("dragover",a.dragOver),n.config.enableColumnReordering&&!n.config.enablePinning&&n.$headerScroller.on("drop",a.onHeaderDrop),n.config.enableRowReordering&&n.$viewport.on("mousedown",a.onRowMouseDown).on("dragover",a.dragOver).on("drop",a.onRowDrop)),i.$watch("renderedColumns",function(){r(a.setDraggables)})},a.dragStart=function(e){e.dataTransfer.setData("text","")},a.dragOver=function(e){e.preventDefault()},a.setDraggables=function(){if(n.config.jqueryUIDraggable)n.$root.find(".ngHeaderSortColumn").draggable({helper:"clone",appendTo:"body",stack:"div",addClasses:!1,start:function(e){a.onHeaderMouseDown(e)}}).droppable({drop:function(e){a.onHeaderDrop(e)}});else{var e=n.$root.find(".ngHeaderSortColumn");angular.forEach(e,function(e){e.setAttribute("draggable","true"),e.addEventListener&&e.addEventListener("dragstart",a.dragStart)}),-1!=navigator.userAgent.indexOf("MSIE")&&n.$root.find(".ngHeaderSortColumn").bind("selectstart",function(){return this.dragDrop(),!1})}},a.onGroupMouseDown=function(e){var i=t(e.target);if("ngRemoveGroup"!=i[0].className){var o=angular.element(i).scope();o&&(n.config.jqueryUIDraggable||(i.attr("draggable","true"),this.addEventListener&&this.addEventListener("dragstart",a.dragStart),-1!=navigator.userAgent.indexOf("MSIE")&&i.bind("selectstart",function(){return this.dragDrop(),!1})),a.groupToMove={header:i,groupName:o.group,index:o.$index})}else a.groupToMove=void 0},a.onGroupDrop=function(e){e.stopPropagation();var o,r;a.groupToMove?(o=t(e.target).closest(".ngGroupElement"),"ngGroupPanel"==o.context.className?(i.configGroups.splice(a.groupToMove.index,1),i.configGroups.push(a.groupToMove.groupName)):(r=angular.element(o).scope(),r&&a.groupToMove.index!=r.$index&&(i.configGroups.splice(a.groupToMove.index,1),i.configGroups.splice(r.$index,0,a.groupToMove.groupName))),a.groupToMove=void 0,n.fixGroupIndexes()):a.colToMove&&(-1==i.configGroups.indexOf(a.colToMove.col)&&(o=t(e.target).closest(".ngGroupElement"),"ngGroupPanel"==o.context.className||"ngGroupPanelDescription ng-binding"==o.context.className?i.groupBy(a.colToMove.col):(r=angular.element(o).scope(),r&&i.removeGroup(r.$index))),a.colToMove=void 0),i.$$phase||i.$apply()},a.onHeaderMouseDown=function(e){var n=t(e.target).closest(".ngHeaderSortColumn"),i=angular.element(n).scope();i&&(a.colToMove={header:n,col:i.col})},a.onHeaderDrop=function(e){if(a.colToMove&&!a.colToMove.col.pinned){var r=t(e.target).closest(".ngHeaderSortColumn"),s=angular.element(r).scope();if(s){if(a.colToMove.col==s.col)return;i.columns.splice(a.colToMove.col.index,1),i.columns.splice(s.col.index,0,a.colToMove.col),n.fixColumnIndexes(),o.BuildStyles(i,n,!0),a.colToMove=void 0}}},a.onRowMouseDown=function(e){var n=t(e.target).closest(".ngRow"),i=angular.element(n).scope();i&&(n.attr("draggable","true"),o.eventStorage.rowToMove={targetRow:n,scope:i})},a.onRowDrop=function(e){var i=t(e.target).closest(".ngRow"),r=angular.element(i).scope();if(r){var a=o.eventStorage.rowToMove;if(a.scope.row==r.row)return;n.changeRowOrder(a.scope.row,r.row),n.searchProvider.evalFilter(),o.eventStorage.rowToMove=void 0,o.digest(r.$root)}},a.assignGridEventHandlers=function(){-1===n.config.tabIndex?(n.$viewport.attr("tabIndex",o.numberOfGrids),o.numberOfGrids++):n.$viewport.attr("tabIndex",n.config.tabIndex),t(e).resize(function(){o.RebuildGrid(i,n)}),t(n.$root.parent()).on("resize",function(){o.RebuildGrid(i,n)})},a.assignGridEventHandlers(),a.assignEvents()},S=function(e,t){e.maxRows=function(){var e=Math.max(t.config.totalServerItems,t.data.length);return e},e.multiSelect=t.config.enableRowSelection&&t.config.multiSelect,e.selectedItemCount=t.selectedItemCount,e.maxPages=function(){return Math.ceil(e.maxRows()/e.pagingOptions.pageSize)},e.pageForward=function(){var n=e.pagingOptions.currentPage;t.config.totalServerItems>0?e.pagingOptions.currentPage=Math.min(n+1,e.maxPages()):e.pagingOptions.currentPage++},e.pageBackward=function(){var t=e.pagingOptions.currentPage;e.pagingOptions.currentPage=Math.max(t-1,1)},e.pageToFirst=function(){e.pagingOptions.currentPage=1},e.pageToLast=function(){var t=e.maxPages();e.pagingOptions.currentPage=t},e.cantPageForward=function(){var n=e.pagingOptions.currentPage,i=e.maxPages();return t.config.totalServerItems>0?!(i>n):1>t.data.length},e.cantPageToLast=function(){return t.config.totalServerItems>0?e.cantPageForward():!0},e.cantPageBackward=function(){var t=e.pagingOptions.currentPage;return!(t>1)}},k=function(o,r,a,s,c,u,d,f,g,h,m){var v={aggregateTemplate:void 0,afterSelectionChange:function(){},beforeSelectionChange:function(){return!0},checkboxCellTemplate:void 0,checkboxHeaderTemplate:void 0,columnDefs:void 0,data:[],dataUpdated:function(){},enableCellEdit:!1,enableCellSelection:!1,enableColumnResize:!1,enableColumnReordering:!1,enableColumnHeavyVirt:!1,enablePaging:!1,enablePinning:!1,enableRowReordering:!1,enableRowSelection:!0,enableSorting:!0,enableHighlighting:!1,excludeProperties:[],filterOptions:{filterText:"",useExternalFilter:!1},footerRowHeight:55,footerTemplate:void 0,groups:[],groupsCollapsedByDefault:!0,headerRowHeight:30,headerRowTemplate:void 0,jqueryUIDraggable:!1,jqueryUITheme:!1,keepLastSelected:!0,maintainColumnRatios:void 0,menuTemplate:void 0,multiSelect:!0,pagingOptions:{pageSizes:[250,500,1e3],pageSize:250,currentPage:1},pinSelectionCheckbox:!1,plugins:[],primaryKey:void 0,rowHeight:30,rowTemplate:void 0,selectedItems:[],selectWithCheckboxOnly:!1,showColumnMenu:!1,showFilter:!1,showFooter:!1,showGroupPanel:!1,showSelectionCheckbox:!1,sortInfo:{fields:[],columns:[],directions:[]},tabIndex:-1,totalServerItems:0,useExternalSorting:!1,i18n:"en",virtualizationThreshold:50},b=this;b.maxCanvasHt=0,b.config=t.extend(v,e.ngGrid.config,r),b.config.showSelectionCheckbox=b.config.showSelectionCheckbox&&b.config.enableColumnHeavyVirt===!1,b.config.enablePinning=b.config.enablePinning&&b.config.enableColumnHeavyVirt===!1,b.config.selectWithCheckboxOnly=b.config.selectWithCheckboxOnly&&b.config.showSelectionCheckbox!==!1,b.config.pinSelectionCheckbox=b.config.enablePinning,"string"==typeof r.columnDefs&&(b.config.columnDefs=o.$eval(r.columnDefs)),b.rowCache=[],b.rowMap=[],b.gridId="ng"+d.newId(),b.$root=null,b.$groupPanel=null,b.$topPanel=null,b.$headerContainer=null,b.$headerScroller=null,b.$headers=null,b.$viewport=null,b.$canvas=null,b.rootDim=b.config.gridDim,b.data=[],b.lateBindColumns=!1,b.filteredRows=[],b.initTemplates=function(){var e=["rowTemplate","aggregateTemplate","headerRowTemplate","checkboxCellTemplate","checkboxHeaderTemplate","menuTemplate","footerTemplate"],t=[];return e.forEach(function(e){t.push(b.getTemplate(e))}),m.all(t)},b.getTemplate=function(e){var t=b.config[e],n=b.gridId+e+".html",i=m.defer();if(t&&!p.test(t))h.get(t,{cache:u}).success(function(e){u.put(n,e),i.resolve()}).error(function(){i.reject("Could not load template: "+t)});else if(t)u.put(n,t),i.resolve();else{var o=e+".html";u.put(n,u.get(o)),i.resolve()}return i.promise},"object"==typeof b.config.data&&(b.data=b.config.data),b.calcMaxCanvasHeight=function(){return b.config.groups.length>0?b.rowFactory.parsedData.filter(function(e){return b.config.inlineAggregate&&e.isAggRow&&!e.collapsed?!1:!e[l]}).length*b.config.rowHeight:b.filteredRows.length*b.config.rowHeight},b.elementDims={scrollW:0,scrollH:0,rowIndexCellW:25,rowSelectedCellW:25,rootMaxW:0,rootMaxH:0},b.setRenderedRows=function(e){o.renderedRows.length=e.length;for(var t=0;e.length>t;t++)!o.renderedRows[t]||e[t].isAggRow||o.renderedRows[t].isAggRow?(o.renderedRows[t]=e[t].copy(),o.renderedRows[t].collapsed=e[t].collapsed,e[t].isAggRow||o.renderedRows[t].setVars(e[t])):o.renderedRows[t].setVars(e[t]),o.renderedRows[t].rowIndex=e[t].rowIndex,o.renderedRows[t].offsetTop=e[t].offsetTop,o.renderedRows[t].selected=e[t].selected,e[t].renderedRowIndex=t;b.refreshDomSizes(),o.$emit("ngGridEventRows",e)},b.minRowsToRender=function(){var e=o.viewportDimHeight()||1;return Math.floor(e/b.config.rowHeight)},b.refreshDomSizes=function(){var e=new x;e.outerWidth=b.elementDims.rootMaxW,e.outerHeight=b.elementDims.rootMaxH,b.rootDim=e,b.maxCanvasHt=b.calcMaxCanvasHeight()},b.buildColumnDefsFromData=function(){b.config.columnDefs=[];var e=b.data[0];return e?(d.forIn(e,function(e,t){-1==b.config.excludeProperties.indexOf(t)&&b.config.columnDefs.push({field:t})}),void 0):(b.lateBoundColumns=!0,void 0)},b.buildColumns=function(){var e=b.config.columnDefs,t=[];if(e||(b.buildColumnDefsFromData(),e=b.config.columnDefs),b.config.showSelectionCheckbox&&t.push(new w({colDef:{field:"",width:b.elementDims.rowSelectedCellW,sortable:!1,resizable:!1,groupable:!1,headerCellTemplate:u.get(o.gridId+"checkboxHeaderTemplate.html"),cellTemplate:u.get(o.gridId+"checkboxCellTemplate.html"),pinned:b.config.pinSelectionCheckbox},index:0,headerRowHeight:b.config.headerRowHeight,sortCallback:b.sortData,resizeOnDataCallback:b.resizeOnData,enableResize:b.config.enableColumnResize,enableSort:b.config.enableSorting,enablePinning:b.config.enablePinning},o,b,s,u,d)),e.length>0){var n=b.config.showSelectionCheckbox?b.config.groups.length+1:b.config.groups.length;o.configGroups.length=0,angular.forEach(e,function(e,i){i+=n;var r=new w({colDef:e,index:i,headerRowHeight:b.config.headerRowHeight,sortCallback:b.sortData,resizeOnDataCallback:b.resizeOnData,enableResize:b.config.enableColumnResize,enableSort:b.config.enableSorting,enablePinning:b.config.enablePinning,enableCellEdit:b.config.enableCellEdit},o,b,s,u,d),a=b.config.groups.indexOf(e.field);-1!=a&&(r.isGroupedBy=!0,o.configGroups.splice(a,0,r),r.groupIndex=o.configGroups.length),t.push(r)}),o.columns=t}},b.configureColumnWidths=function(){var e=b.config.columnDefs,t=b.config.showSelectionCheckbox?o.configGroups.length+1:o.configGroups.length,n=(e.length+t,[]),i=[],r=0,a=0;if(a+=b.config.showSelectionCheckbox?25:0,angular.forEach(e,function(e,s){s+=t;var l=!1,c=void 0;if(d.isNullOrUndefined(e.width)?e.width="*":(l=isNaN(e.width)?d.endsWith(e.width,"%"):!1,c=l?e.width:parseInt(e.width,10)),isNaN(c)){if(c=e.width,"auto"==c){o.columns[s].width=e.minWidth,a+=o.columns[s].width;var u=o.columns[s];return f(function(){b.resizeOnData(u,!0)}),void 0}if(-1!=c.indexOf("*"))return e.visible!==!1&&(r+=c.length),e.index=s,n.push(e),void 0;if(l)return e.index=s,i.push(e),void 0;throw'unable to parse column width, use percentage ("10%","20%", etc...) or "*" to use remaining width of grid'}e.visible!==!1&&(a+=o.columns[s].width=parseInt(e.width,10))}),n.length>0){b.config.maintainColumnRatios===!1?angular.noop():b.config.maintainColumnRatios=!0;var l=b.rootDim.outerWidth-a;l-=b.config.groups.length*(b.config.inlineAggregate?125:25);var c=Math.floor(l/r);angular.forEach(n,function(e){var t=e.width.length;o.columns[e.index].width=c*t;var n=1;b.maxCanvasHt>o.viewportDimHeight()&&(n+=s.ScrollW),o.columns[e.index].width-=n,e.visible!==!1&&(a+=o.columns[e.index].width)})}i.length>0&&angular.forEach(i,function(e){var t=e.width;o.columns[e.index].width=Math.floor(b.rootDim.outerWidth*(parseInt(t.slice(0,-1),10)/100))})},b.init=function(){return b.initTemplates().then(function(){o.selectionProvider=new I(b,o,g),o.domAccessProvider=new C(b),b.rowFactory=new D(b,o,s,u,d),b.searchProvider=new A(o,b,c),b.styleProvider=new E(o,b),o.$watch("configGroups",function(e){var t=[];angular.forEach(e,function(e){t.push(e.field||e)}),b.config.groups=t,b.rowFactory.filteredRowsChanged(),o.$emit("ngGridEventGroups",e)},!0),o.$watch("columns",function(e){s.BuildStyles(o,b,!0),o.$emit("ngGridEventColumns",e)},!0),o.$watch(function(){return r.i18n},function(e){d.seti18n(o,e)}),b.maxCanvasHt=b.calcMaxCanvasHeight(),b.config.sortInfo.fields&&b.config.sortInfo.fields.length>0&&(b.getColsFromFields(),b.sortActual())})},b.resizeOnData=function(e){var n=e.minWidth,i=d.getElementsByClassName("col"+e.index);angular.forEach(i,function(e,i){var o;if(0===i){var r=t(e).find(".ngHeaderText");o=d.visualLength(r)+10}else{var a=t(e).find(".ngCellText");o=d.visualLength(a)+10}o>n&&(n=o)}),e.width=e.longest=Math.min(e.maxWidth,n+7),s.BuildStyles(o,b,!0)},b.lastSortedColumns=[],b.changeRowOrder=function(e,t){var n=b.rowCache.indexOf(e),i=b.rowCache.indexOf(t);b.rowCache.splice(n,1),b.rowCache.splice(i,0,e),o.$emit("ngGridEventChangeOrder",b.rowCache)},b.sortData=function(e,n){if(n&&n.shiftKey&&b.config.sortInfo){var i=b.config.sortInfo.columns.indexOf(e);-1===i?(1==b.config.sortInfo.columns.length&&(b.config.sortInfo.columns[0].sortPriority=1),b.config.sortInfo.columns.push(e),e.sortPriority=b.config.sortInfo.columns.length,b.config.sortInfo.fields.push(e.field),b.config.sortInfo.directions.push(e.sortDirection),b.lastSortedColumns.push(e)):b.config.sortInfo.directions[i]=e.sortDirection
}else{var r=t.isArray(e);b.config.sortInfo.columns.length=0,b.config.sortInfo.fields.length=0,b.config.sortInfo.directions.length=0;var a=function(e){b.config.sortInfo.columns.push(e),b.config.sortInfo.fields.push(e.field),b.config.sortInfo.directions.push(e.sortDirection),b.lastSortedColumns.push(e)};r?(b.clearSortingData(),angular.forEach(e,function(e,t){e.sortPriority=t+1,a(e)})):(b.clearSortingData(e),e.sortPriority=void 0,a(e))}b.sortActual(),b.searchProvider.evalFilter(),o.$emit("ngGridEventSorted",b.config.sortInfo)},b.getColsFromFields=function(){b.config.sortInfo.columns?b.config.sortInfo.columns.length=0:b.config.sortInfo.columns=[],angular.forEach(o.columns,function(e){var t=b.config.sortInfo.fields.indexOf(e.field);return-1!=t&&(e.sortDirection=b.config.sortInfo.directions[t]||"asc",b.config.sortInfo.columns.push(e)),!1})},b.sortActual=function(){if(!b.config.useExternalSorting){var e=b.data.slice(0);angular.forEach(e,function(e,t){var n=b.rowMap[t];if(void 0!=n){var i=b.rowCache[t];void 0!=i&&(e.preSortSelected=i.selected,e.preSortIndex=t)}}),a.Sort(b.config.sortInfo,e),angular.forEach(e,function(e,t){b.rowCache[t].entity=e,b.rowCache[t].selected=e.preSortSelected,b.rowMap[e.preSortIndex]=t,delete e.preSortSelected,delete e.preSortIndex})}},b.clearSortingData=function(e){e?(angular.forEach(b.lastSortedColumns,function(t){e.index!=t.index&&(t.sortDirection="",t.sortPriority=null)}),b.lastSortedColumns[0]=e,b.lastSortedColumns.length=1):(angular.forEach(b.lastSortedColumns,function(e){e.sortDirection="",e.sortPriority=null}),b.lastSortedColumns=[])},b.fixColumnIndexes=function(){for(var e=0;o.columns.length>e;e++)o.columns[e].visible!==!1&&(o.columns[e].index=e)},b.fixGroupIndexes=function(){angular.forEach(o.configGroups,function(e,t){e.groupIndex=t+1})},o.elementsNeedMeasuring=!0,o.columns=[],o.renderedRows=[],o.renderedColumns=[],o.headerRow=null,o.rowHeight=b.config.rowHeight,o.jqueryUITheme=b.config.jqueryUITheme,o.showSelectionCheckbox=b.config.showSelectionCheckbox,o.enableCellSelection=b.config.enableCellSelection,o.footer=null,o.selectedItems=b.config.selectedItems,o.multiSelect=b.config.multiSelect,o.showFooter=b.config.showFooter,o.footerRowHeight=o.showFooter?b.config.footerRowHeight:0,o.showColumnMenu=b.config.showColumnMenu,o.showMenu=!1,o.configGroups=[],o.gridId=b.gridId,o.enablePaging=b.config.enablePaging,o.pagingOptions=b.config.pagingOptions,o.i18n={},d.seti18n(o,b.config.i18n),o.adjustScrollLeft=function(e){for(var t=0,n=0,i=o.columns.length,r=[],a=!b.config.enableColumnHeavyVirt,l=0,c=function(e){a?r.push(e):o.renderedColumns[l]?o.renderedColumns[l].setVars(e):o.renderedColumns[l]=e.copy(),l++},u=0;i>u;u++){var d=o.columns[u];if(d.visible!==!1){var f=d.width+t;if(d.pinned){c(d);var g=u>0?e+n:e;s.setColLeft(d,g,b),n+=d.width}else f>=e&&e+b.rootDim.outerWidth>=t&&c(d);t+=d.width}}a&&(o.renderedColumns=r)},b.prevScrollTop=0,b.prevScrollIndex=0,o.adjustScrollTop=function(e,t){if(b.prevScrollTop!==e||t){e>0&&b.$viewport[0].scrollHeight-e<=b.$viewport.outerHeight()&&o.$emit("ngGridEventScroll");var r,a=Math.floor(e/b.config.rowHeight);if(b.filteredRows.length>b.config.virtualizationThreshold){if(e>b.prevScrollTop&&b.prevScrollIndex+i>a)return;if(b.prevScrollTop>e&&a>b.prevScrollIndex-i)return;r=new P(Math.max(0,a-n),a+b.minRowsToRender()+n)}else{var s=o.configGroups.length>0?b.rowFactory.parsedData.length:b.data.length;r=new P(0,Math.max(s,b.minRowsToRender()+n))}b.prevScrollTop=e,b.rowFactory.UpdateViewableRange(r),b.prevScrollIndex=a}},o.toggleShowMenu=function(){o.showMenu=!o.showMenu},o.toggleSelectAll=function(e){o.selectionProvider.toggleSelectAll(e)},o.totalFilteredItemsLength=function(){return b.filteredRows.length},o.showGroupPanel=function(){return b.config.showGroupPanel},o.topPanelHeight=function(){return b.config.showGroupPanel===!0?b.config.headerRowHeight+32:b.config.headerRowHeight},o.viewportDimHeight=function(){return Math.max(0,b.rootDim.outerHeight-o.topPanelHeight()-o.footerRowHeight-2)},o.groupBy=function(e){if(!(1>b.data.length)&&e.groupable&&e.field){e.sortDirection||e.sort({shiftKey:o.configGroups.length>0?!0:!1});var t=o.configGroups.indexOf(e);-1==t?(e.isGroupedBy=!0,o.configGroups.push(e),e.groupIndex=o.configGroups.length):o.removeGroup(t),b.$viewport.scrollTop(0),s.digest(o)}},o.removeGroup=function(e){var t=o.columns.filter(function(t){return t.groupIndex==e+1})[0];t.isGroupedBy=!1,t.groupIndex=0,o.columns[e].isAggCol&&(o.columns.splice(e,1),o.configGroups.splice(e,1),b.fixGroupIndexes()),0===o.configGroups.length&&(b.fixColumnIndexes(),s.digest(o)),o.adjustScrollLeft(0)},o.togglePin=function(e){for(var t=e.index,n=0,i=0;o.columns.length>i&&o.columns[i].pinned;i++)n++;e.pinned&&(n=Math.max(e.originalIndex,n-1)),e.pinned=!e.pinned,o.columns.splice(t,1),o.columns.splice(n,0,e),b.fixColumnIndexes(),s.BuildStyles(o,b,!0),b.$viewport.scrollLeft(b.$viewport.scrollLeft()-e.width)},o.totalRowWidth=function(){for(var e=0,t=o.columns,n=0;t.length>n;n++)t[n].visible!==!1&&(e+=t[n].width);return e},o.headerScrollerDim=function(){var e=o.viewportDimHeight(),t=b.maxCanvasHt,n=t>e,i=new x;return i.autoFitHeight=!0,i.outerWidth=o.totalRowWidth(),n?i.outerWidth+=b.elementDims.scrollW:b.elementDims.scrollH>=t-e&&(i.outerWidth+=b.elementDims.scrollW),i}},P=function(e,t){this.topRow=e,this.bottomRow=t},$=function(e,t,n,i,o){var r=this,a=t.enableRowSelection;r.jqueryUITheme=t.jqueryUITheme,r.rowClasses=t.rowClasses,r.entity=e,r.selectionProvider=n,r.selected=n.getSelection(e),r.cursor=a?"pointer":"default",r.setSelection=function(e){r.selectionProvider.setSelection(r,e),r.selectionProvider.lastClickedRow=r},r.continueSelection=function(e){r.selectionProvider.ChangeSelection(r,e)},r.ensureEntity=function(e){r.entity!=e&&(r.entity=e,r.selected=r.selectionProvider.getSelection(r.entity))},r.toggleSelected=function(e){if(!a&&!t.enableCellSelection)return!0;var n=e.target||e;return"checkbox"==n.type&&"ngSelectionCell ng-scope"!=n.parentElement.className?!0:t.selectWithCheckboxOnly&&"checkbox"!=n.type?(r.selectionProvider.lastClickedRow=r,!0):(r.beforeSelectionChange(r,e)&&r.continueSelection(e),!1)},r.rowIndex=i,r.offsetTop=r.rowIndex*t.rowHeight,r.rowDisplayIndex=0,r.alternatingRowClass=function(){var e=0===r.rowIndex%2,t={ngRow:!0,selected:r.selected,even:e,odd:!e,"ui-state-default":r.jqueryUITheme&&e,"ui-state-active":r.jqueryUITheme&&!e};return t},r.beforeSelectionChange=t.beforeSelectionChangeCallback,r.afterSelectionChange=t.afterSelectionChangeCallback,r.getProperty=function(e){return o.evalProperty(r.entity,e)},r.copy=function(){return r.clone=new $(e,t,n,i,o),r.clone.isClone=!0,r.clone.elm=r.elm,r.clone.orig=r,r.clone},r.setVars=function(e){e.clone=r,r.entity=e.entity,r.selected=e.selected}},D=function(e,t,i,o,r){var u=this;u.aggCache={},u.parentCache=[],u.dataChanged=!0,u.parsedData=[],u.rowConfig={},u.selectionProvider=t.selectionProvider,u.rowHeight=30,u.numberOfAggregates=0,u.groupedData=void 0,u.rowHeight=e.config.rowHeight,u.rowConfig={enableRowSelection:e.config.enableRowSelection,rowClasses:e.config.rowClasses,selectedItems:t.selectedItems,selectWithCheckboxOnly:e.config.selectWithCheckboxOnly,beforeSelectionChangeCallback:e.config.beforeSelectionChange,afterSelectionChangeCallback:e.config.afterSelectionChange,jqueryUITheme:e.config.jqueryUITheme,enableCellSelection:e.config.enableCellSelection,rowHeight:e.config.rowHeight},u.renderedRange=new P(0,e.minRowsToRender()+n),u.buildEntityRow=function(e,t){return new $(e,u.rowConfig,u.selectionProvider,t,r)},u.buildAggregateRow=function(t,n){var i=u.aggCache[t.aggIndex];return i||(i=new y(t,u,u.rowConfig.rowHeight,e.config.groupsCollapsedByDefault),u.aggCache[t.aggIndex]=i),i.rowIndex=n,i.offsetTop=n*u.rowConfig.rowHeight,i},u.UpdateViewableRange=function(e){u.renderedRange=e,u.renderedChange()},u.filteredRowsChanged=function(){e.lateBoundColumns&&e.filteredRows.length>0&&(e.config.columnDefs=void 0,e.buildColumns(),e.lateBoundColumns=!1,t.$evalAsync(function(){t.adjustScrollLeft(0)})),u.dataChanged=!0,e.config.groups.length>0&&u.getGrouping(e.config.groups),u.UpdateViewableRange(u.renderedRange)},u.renderedChange=function(){if(!u.groupedData||1>e.config.groups.length)return u.renderedChangeNoGroups(),e.refreshDomSizes(),void 0;u.wasGrouped=!0,u.parentCache=[];var t=0,n=0,i=u.parsedData.filter(function(e){return e.isAggRow?e.parent&&e.parent.collapsed?!1:(++n,!0):(e[l]||(e.rowIndex=t++),!e[l])});u.totalRows=i.length;for(var o=[],r=e.config.inlineAggregate,a=0,s=u.renderedRange.topRow;u.renderedRange.bottomRow>s;s++)i[s]&&(i[s].offsetTop=(s-a)*e.config.rowHeight,r&&i[s].isAggRow&&!i[s].collapsed&&++a,o.push(i[s]));e.setRenderedRows(o)},u.renderedChangeNoGroups=function(){for(var t=[],n=u.renderedRange.topRow;u.renderedRange.bottomRow>n;n++)e.filteredRows[n]&&(e.filteredRows[n].rowIndex=n,e.filteredRows[n].offsetTop=n*e.config.rowHeight,t.push(e.filteredRows[n]));e.setRenderedRows(t)},u.fixRowCache=function(){var t=e.data.length,n=t-e.rowCache.length;if(0>n)e.rowCache.length=e.rowMap.length=t;else for(var i=e.rowCache.length;t>i;i++)e.rowCache[i]=e.rowFactory.buildEntityRow(e.data[i],i)},u.parseGroupData=function(e){if(e.values)for(var t=0;e.values.length>t;t++)u.parentCache[u.parentCache.length-1].children.push(e.values[t]),u.parsedData.push(e.values[t]);else for(var n in e)if(n!=a&&n!=s&&n!=c&&e.hasOwnProperty(n)){var i=u.buildAggregateRow({gField:e[a],gLabel:n,gDepth:e[s],isAggRow:!0,_ng_hidden_:!1,children:[],aggChildren:[],aggIndex:u.numberOfAggregates,aggLabelFilter:e[c].aggLabelFilter},0);u.numberOfAggregates++,i.parent=u.parentCache[i.depth-1],i.parent&&(i.parent.collapsed=!1,i.parent.aggChildren.push(i)),u.parsedData.push(i),u.parentCache[i.depth]=i,u.parseGroupData(e[n])}},u.getGrouping=function(n){u.aggCache=[],u.numberOfAggregates=0,u.groupedData={};for(var d=e.filteredRows,f=n.length,g=t.columns,p=0;d.length>p;p++){var h=d[p].entity;if(!h)return;d[p][l]=e.config.groupsCollapsedByDefault;for(var m=u.groupedData,v=0;n.length>v;v++){var b=n[v],y=g.filter(function(e){return e.field==b})[0],x=r.evalProperty(h,b);x=x?""+x:"null",m[x]||(m[x]={}),m[a]||(m[a]=b),m[s]||(m[s]=v),m[c]||(m[c]=y),m=m[x]}m.values||(m.values=[]),m.values.push(d[p])}for(var C=0;n.length>C;C++)!g[C].isAggCol&&f>=C&&g.splice(0,0,new w({colDef:{field:"",width:e.config.inlineAggregate?0:25,sortable:!1,resizable:!1,headerCellTemplate:'<div class="ngAggHeader"></div>',pinned:e.config.pinSelectionCheckbox},enablePinning:e.config.enablePinning,isAggCol:!0,headerRowHeight:e.config.headerRowHeight},t,e,i,o,r));i.BuildStyles(t,e,!0),e.fixColumnIndexes(),t.adjustScrollLeft(0),u.parsedData.length=0,u.parseGroupData(u.groupedData),u.fixRowCache()},e.config.groups.length>0&&e.filteredRows.length>0&&u.getGrouping(e.config.groups)},A=function(e,n,i){var o=this,r=[];o.extFilter=n.config.filterOptions.useExternalFilter,e.showFilter=n.config.showFilter,e.filterText="",o.fieldMap={},o.evalFilter=function(){var e=function(e){for(var t=0,n=r.length;n>t;t++){var s,l=r[t];if(!l.column){for(var c in e)if(e.hasOwnProperty(c)){var u=o.fieldMap[c];if(!u)continue;var d=null,f=null;u&&u.cellFilter&&(f=u.cellFilter.split(":"),d=i(f[0]));var g=e[c];if(null!=g){if("function"==typeof d){var p=""+d("object"==typeof g?a(g,u.field):g,f[1]);s=l.regex.test(p)}else s=l.regex.test("object"==typeof g?""+a(g,u.field):""+g);if(g&&s)return!0}}return!1}var h=o.fieldMap[l.columnDisplay];if(!h)return!1;var m=h.cellFilter.split(":"),v=h.cellFilter?i(m[0]):null,b=e[l.column]||e[h.field.split(".")[0]];if(null==b)return!1;if("function"==typeof v){var y=""+v("object"==typeof b?a(b,h.field):b,m[1]);s=l.regex.test(y)}else s=l.regex.test("object"==typeof b?""+a(b,h.field):""+b);if(!b||!s)return!1}return!0};n.filteredRows=0===r.length?n.rowCache:n.rowCache.filter(function(t){return e(t.entity)});for(var t=0;n.filteredRows.length>t;t++)n.filteredRows[t].rowIndex=t;n.rowFactory.filteredRowsChanged()};var a=function(e,t){if("object"!=typeof e||"string"!=typeof t)return e;var n=t.split("."),i=e;if(n.length>1){for(var o=1,r=n.length;r>o;o++)if(i=i[n[o]],!i)return e;return i}return e},s=function(e,t){try{return RegExp(e,t)}catch(n){return RegExp(e.replace(/(\^|\$|\(|\)|\<|\>|\[|\]|\{|\}|\\|\||\.|\*|\+|\?)/g,"\\$1"))}},l=function(e){r=[];var n;if(n=t.trim(e))for(var i=n.split(";"),o=0;i.length>o;o++){var a=i[o].split(":");if(a.length>1){var l=t.trim(a[0]),c=t.trim(a[1]);l&&c&&r.push({column:l,columnDisplay:l.replace(/\s+/g,"").toLowerCase(),regex:s(c,"i")})}else{var u=t.trim(a[0]);u&&r.push({column:"",regex:s(u,"i")})}}};e.$watch(function(){return n.config.filterOptions.filterText},function(t){e.filterText=t}),e.$watch("filterText",function(t){o.extFilter||(e.$emit("ngGridEventFilter",t),l(t),o.evalFilter())}),o.extFilter||e.$watch("columns",function(e){for(var t=0;e.length>t;t++){var n=e[t];n.field&&(o.fieldMap[n.field.split(".")[0]]=n),n.displayName&&(o.fieldMap[n.displayName.toLowerCase().replace(/\s+/g,"")]=n)}})},I=function(e,t,n){var i=this;i.multi=e.config.multiSelect,i.selectedItems=e.config.selectedItems,i.selectedIndex=e.config.selectedIndex,i.lastClickedRow=void 0,i.ignoreSelectedItemChanges=!1,i.pKeyParser=n(e.config.primaryKey),i.ChangeSelection=function(n,o){var r=o.which||o.keyCode,a=40===r||38===r;if(!o||o.keyCode&&!a||o.ctrlKey||o.shiftKey||i.toggleSelectAll(!1,!0),o&&o.shiftKey&&!o.keyCode&&i.multi&&e.config.enableRowSelection){if(i.lastClickedRow){var s;s=t.configGroups.length>0?e.rowFactory.parsedData.filter(function(e){return!e.isAggRow}):e.filteredRows;var l=n.rowIndex,c=i.lastClickedRow.rowIndex;if(i.lastClickedRow=n,l==c)return!1;c>l?(l^=c,c=l^c,l^=c,l--):c++;for(var u=[];l>=c;c++)u.push(s[c]);if(u[u.length-1].beforeSelectionChange(u,o)){for(var d=0;u.length>d;d++){var f=u[d],g=f.selected;f.selected=!g,f.clone&&(f.clone.selected=f.selected);var p=i.selectedItems.indexOf(f.entity);-1===p?i.selectedItems.push(f.entity):i.selectedItems.splice(p,1)}u[u.length-1].afterSelectionChange(u,o)}return!0}}else i.multi?(!o.keyCode||a)&&i.setSelection(n,!n.selected):i.lastClickedRow==n?i.setSelection(i.lastClickedRow,e.config.keepLastSelected?!0:!n.selected):(i.lastClickedRow&&i.setSelection(i.lastClickedRow,!1),i.setSelection(n,!n.selected));return i.lastClickedRow=n,!0},i.getSelection=function(t){var n=!1;if(e.config.primaryKey){var o=i.pKeyParser(t);angular.forEach(i.selectedItems,function(e){o==i.pKeyParser(e)&&(n=!0)})}else n=-1!==i.selectedItems.indexOf(t);return n},i.setSelection=function(t,n){if(e.config.enableRowSelection){if(n)-1===i.selectedItems.indexOf(t.entity)&&(!i.multi&&i.selectedItems.length>0&&i.toggleSelectAll(!1,!0),i.selectedItems.push(t.entity));else{var o=i.selectedItems.indexOf(t.entity);-1!=o&&i.selectedItems.splice(o,1)}t.selected=n,t.orig&&(t.orig.selected=n),t.clone&&(t.clone.selected=n),t.afterSelectionChange(t)}},i.toggleSelectAll=function(t,n){if(n||e.config.beforeSelectionChange(e.filteredRows,t)){var o=i.selectedItems.length;o>0&&(i.selectedItems.length=0);for(var r=0;e.filteredRows.length>r;r++)e.filteredRows[r].selected=t,e.filteredRows[r].clone&&(e.filteredRows[r].clone.selected=t),t&&i.selectedItems.push(e.filteredRows[r].entity);n||e.config.afterSelectionChange(e.filteredRows,t)}}},E=function(e,t){e.headerCellStyle=function(e){return{height:e.headerRowHeight+"px"}},e.rowStyle=function(t){var n={top:t.offsetTop+"px",height:e.rowHeight+"px"};return t.isAggRow&&(n.left=t.offsetLeft),n},e.canvasStyle=function(){return{height:""+t.maxCanvasHt+"px"}},e.headerScrollerStyle=function(){return{height:t.config.headerRowHeight+"px"}},e.topPanelStyle=function(){return{width:t.rootDim.outerWidth+"px",height:e.topPanelHeight()+"px"}},e.headerStyle=function(){return{width:t.rootDim.outerWidth+"px",height:t.config.headerRowHeight+"px"}},e.groupPanelStyle=function(){return{width:t.rootDim.outerWidth+"px",height:"32px"}},e.viewportStyle=function(){return{width:t.rootDim.outerWidth+"px",height:e.viewportDimHeight()+"px"}},e.footerStyle=function(){return{width:t.rootDim.outerWidth+"px",height:e.footerRowHeight+"px"}}};m.directive("ngCellHasFocus",["$domUtilityService",function(e){var t=function(t,n){t.isFocused=!0,e.digest(t);var i=angular.element(n[0].children).filter(function(){return 8!=this.nodeType}),o=angular.element(i[0].children[0]);o.length>0&&(angular.element(o).focus(),t.domAccessProvider.selectInputElement(o[0]),angular.element(o).bind("blur",function(){return t.isFocused=!1,e.digest(t),!0}))};return function(e,n){var i=!1;e.editCell=function(){setTimeout(function(){t(e,n)},0)},n.bind("mousedown",function(){return n.focus(),!0}),n.bind("focus",function(){return i=!0,!0}),n.bind("blur",function(){return i=!1,!0}),n.bind("keydown",function(o){return i&&37!=o.keyCode&&38!=o.keyCode&&39!=o.keyCode&&40!=o.keyCode&&9!=o.keyCode&&!o.shiftKey&&13!=o.keyCode&&t(e,n),27==o.keyCode&&n.focus(),!0})}}]),m.directive("ngCellText",function(){return function(e,t){t.bind("mouseover",function(e){e.preventDefault(),t.css({cursor:"text"})}),t.bind("mouseleave",function(e){e.preventDefault(),t.css({cursor:"default"})})}}),m.directive("ngCell",["$compile","$domUtilityService",function(e,t){var n={scope:!1,compile:function(){return{pre:function(t,n){var i,o=t.col.cellTemplate.replace(d,"$eval('row.entity.' + col.field)");t.col.enableCellEdit?(i=t.col.cellEditTemplate,i=i.replace(f,o),i=i.replace(g,t.col.editableCellTemplate.replace(d,"$eval('row.entity.' + col.field)"))):i=o;var r=e(i)(t);t.enableCellSelection&&-1==r[0].className.indexOf("ngSelectionCell")&&(r[0].setAttribute("tabindex",0),r.addClass("ngCellElement")),n.append(r)},post:function(e,n){e.enableCellSelection&&e.domAccessProvider.selectionHandlers(e,n),e.$on("ngGridEventDigestCell",function(){t.digest(e)})}}}};return n}]),m.directive("ngGridFooter",["$compile","$templateCache",function(e,t){var n={scope:!1,compile:function(){return{pre:function(n,i){0===i.children().length&&i.append(e(t.get(n.gridId+"footerTemplate.html"))(n))}}}};return n}]),m.directive("ngGridMenu",["$compile","$templateCache",function(e,t){var n={scope:!1,compile:function(){return{pre:function(n,i){0===i.children().length&&i.append(e(t.get(n.gridId+"menuTemplate.html"))(n))}}}};return n}]),m.directive("ngGrid",["$compile","$filter","$templateCache","$sortService","$domUtilityService","$utilityService","$timeout","$parse","$http","$q",function(e,n,i,o,r,a,s,l,c,u){var d={scope:!0,compile:function(){return{pre:function(d,f,g){var p=t(f),h=d.$eval(g.ngGrid);h.gridDim=new x({outerHeight:t(p).height(),outerWidth:t(p).width()});var m=new k(d,h,o,r,n,i,a,s,l,c,u);return m.init().then(function(){if("string"==typeof h.columnDefs?d.$parent.$watch(h.columnDefs,function(e){return e?(m.lateBoundColumns=!1,d.columns=[],m.config.columnDefs=e,m.buildColumns(),m.configureColumnWidths(),m.eventProvider.assignEvents(),r.RebuildGrid(d,m),void 0):(m.refreshDomSizes(),m.buildColumns(),void 0)},!0):m.buildColumns(),"string"==typeof h.data){var n=function(e){m.data=t.extend([],e),m.rowFactory.fixRowCache(),angular.forEach(m.data,function(e,t){var n=m.rowMap[t]||t;m.rowCache[n]&&m.rowCache[n].ensureEntity(e),m.rowMap[n]=t}),m.searchProvider.evalFilter(),m.configureColumnWidths(),m.refreshDomSizes(),m.config.sortInfo.fields.length>0&&(m.getColsFromFields(),m.sortActual(),m.searchProvider.evalFilter(),d.$emit("ngGridEventSorted",m.config.sortInfo)),d.$emit("ngGridEventData",m.gridId)};d.$parent.$watch(h.data,n),d.$parent.$watch(h.data+".length",function(){n(d.$eval(h.data))})}return m.footerController=new S(d,m),f.addClass("ngGrid").addClass(""+m.gridId),h.enableHighlighting||f.addClass("unselectable"),h.jqueryUITheme&&f.addClass("ui-widget"),f.append(e(i.get("gridTemplate.html"))(d)),r.AssignGridContainers(d,f,m),m.eventProvider=new T(m,d,r,s),h.selectRow=function(e,t){m.rowCache[e]&&(m.rowCache[e].clone&&m.rowCache[e].clone.setSelection(t?!0:!1),m.rowCache[e].setSelection(t?!0:!1))},h.selectItem=function(e,t){h.selectRow(m.rowMap[e],t)},h.selectAll=function(e){d.toggleSelectAll(e)},h.groupBy=function(e){if(e)d.groupBy(d.columns.filter(function(t){return t.field==e})[0]);else{var n=t.extend(!0,[],d.configGroups);angular.forEach(n,d.groupBy)}},h.sortBy=function(e){var t=d.columns.filter(function(t){return t.field==e})[0];t&&t.sort()},h.gridId=m.gridId,h.ngGrid=m,h.$gridScope=d,h.$gridServices={SortService:o,DomUtilityService:r},d.$on("ngGridEventDigestGrid",function(){r.digest(d.$parent)}),d.$on("ngGridEventDigestGridParent",function(){r.digest(d.$parent)}),d.$evalAsync(function(){d.adjustScrollLeft(0)}),angular.forEach(h.plugins,function(e){"function"==typeof e&&(e=e.call(this)),e.init(d.$new(),m,h.$gridServices),h.plugins[a.getInstanceType(e)]=e}),"function"==h.init&&h.init(m,d),null})}}}};return d}]),m.directive("ngHeaderCell",["$compile",function(e){var t={scope:!1,compile:function(){return{pre:function(t,n){n.append(e(t.col.headerCellTemplate)(t))}}}};return t}]),m.directive("ngIf",[function(){return{transclude:"element",priority:1e3,terminal:!0,restrict:"A",compile:function(e,t,n){return function(e,t,i){var o,r;e.$watch(i.ngIf,function(i){o&&(o.remove(),o=void 0),r&&(r.$destroy(),r=void 0),i&&(r=e.$new(),n(r,function(e){o=e,t.after(e)}))})}}}}]),m.directive("ngInput",["$parse",function(e){return function(t,n,i){var o=e(t.$eval(i.ngInput)),r=o.assign,a=o(t.row.entity);n.val(a),n.bind("keyup",function(){var e=n.val();t.$root.$$phase||t.$apply(function(){r(t.row.entity,e)})}),n.bind("keydown",function(e){switch(e.keyCode){case 37:case 38:case 39:case 40:e.stopPropagation();break;case 27:t.$root.$$phase||t.$apply(function(){r(t.row.entity,a),n.val(a),n.blur()});default:}return!0})}}]),m.directive("ngRow",["$compile","$domUtilityService","$templateCache",function(e,t,n){var i={scope:!1,compile:function(){return{pre:function(i,o){if(i.row.elm=o,i.row.clone&&(i.row.clone.elm=o),i.row.isAggRow){var r=n.get(i.gridId+"aggregateTemplate.html");r=i.row.aggLabelFilter?r.replace(u,"| "+i.row.aggLabelFilter):r.replace(u,""),o.append(e(r)(i))}else o.append(e(n.get(i.gridId+"rowTemplate.html"))(i));i.$on("ngGridEventDigestRow",function(){t.digest(i)})}}}};return i}]),m.directive("ngViewport",[function(){return function(e,t){var n,i,o=0;t.bind("scroll",function(t){var r=t.target.scrollLeft,a=t.target.scrollTop;return e.$headerContainer&&e.$headerContainer.scrollLeft(r),e.adjustScrollLeft(r),e.adjustScrollTop(a),e.$root.$$phase||e.$digest(),i=r,o=o,n=!1,!0}),t.bind("mousewheel DOMMouseScroll",function(){return n=!0,t.focus(),!0}),e.enableCellSelection||e.domAccessProvider.selectionHandlers(e,t)}}]),e.ngGrid.i18n.en={ngAggregateLabel:"items",ngGroupPanelDescription:"Drag a column header here and drop it to group by that column.",ngSearchPlaceHolder:"Search...",ngMenuText:"Choose Columns:",ngShowingItemsLabel:"Showing Items:",ngTotalItemsLabel:"Total Items:",ngSelectedItemsLabel:"Selected Items:",ngPageSizeLabel:"Page Size:",ngPagerFirstTitle:"First Page",ngPagerNextTitle:"Next Page",ngPagerPrevTitle:"Previous Page",ngPagerLastTitle:"Last Page"},e.ngGrid.i18n.fr={ngAggregateLabel:"articles",ngGroupPanelDescription:"Faites glisser un en-tte de colonne ici et dposez-le vers un groupe par cette colonne.",ngSearchPlaceHolder:"Recherche...",ngMenuText:"Choisir des colonnes:",ngShowingItemsLabel:"Articles Affichage des:",ngTotalItemsLabel:"Nombre total d'articles:",ngSelectedItemsLabel:"lments Articles:",ngPageSizeLabel:"Taille de page:",ngPagerFirstTitle:"Premire page",ngPagerNextTitle:"Page Suivante",ngPagerPrevTitle:"Page prcdente",ngPagerLastTitle:"Dernire page"},e.ngGrid.i18n.ge={ngAggregateLabel:"artikel",ngGroupPanelDescription:"Ziehen Sie eine Spaltenberschrift hier und legen Sie es der Gruppe nach dieser Spalte.",ngSearchPlaceHolder:"Suche...",ngMenuText:"Spalten auswhlen:",ngShowingItemsLabel:"Zeige Artikel:",ngTotalItemsLabel:"Meiste Artikel:",ngSelectedItemsLabel:"Ausgewhlte Artikel:",ngPageSizeLabel:"Gre Seite:",ngPagerFirstTitle:"Erste Page",ngPagerNextTitle:"Nchste Page",ngPagerPrevTitle:"Vorherige Page",ngPagerLastTitle:"Letzte Page"},e.ngGrid.i18n.sp={ngAggregateLabel:"Artculos",ngGroupPanelDescription:"Arrastre un encabezado de columna aqu y soltarlo para agrupar por esa columna.",ngSearchPlaceHolder:"Buscar...",ngMenuText:"Elegir columnas:",ngShowingItemsLabel:"Artculos Mostrando:",ngTotalItemsLabel:"Artculos Totales:",ngSelectedItemsLabel:"Artculos Seleccionados:",ngPageSizeLabel:"Tamao de Pgina:",ngPagerFirstTitle:"Primera Pgina",ngPagerNextTitle:"Pgina Siguiente",ngPagerPrevTitle:"Pgina Anterior",ngPagerLastTitle:"ltima Pgina"},e.ngGrid.i18n["zh-cn"]={ngAggregateLabel:"",ngGroupPanelDescription:"",ngSearchPlaceHolder:"...",ngMenuText:"",ngShowingItemsLabel:"",ngTotalItemsLabel:"",ngSelectedItemsLabel:"",ngPageSizeLabel:"",ngPagerFirstTitle:"",ngPagerNextTitle:"",ngPagerPrevTitle:"",ngPagerLastTitle:""},e.ngGrid.i18n["zh-tw"]={ngAggregateLabel:"",ngGroupPanelDescription:"",ngSearchPlaceHolder:"...",ngMenuText:"",ngShowingItemsLabel:"",ngTotalItemsLabel:"",ngSelectedItemsLabel:"",ngPageSizeLabel:"",ngPagerFirstTitle:"",ngPagerNextTitle:"",ngPagerPrevTitle:"",ngPagerLastTitle:""},angular.module("ngGrid").run(["$templateCache",function(e){e.put("aggregateTemplate.html",'<div ng-click="row.toggleExpand()" ng-style="rowStyle(row)" class="ngAggregate">    <span class="ngAggregateText">{{row.label CUSTOM_FILTERS}} ({{row.totalChildren()}} {{AggItemsLabel}})</span>    <div class="{{row.aggClass()}}"></div></div>'),e.put("cellEditTemplate.html",'<div ng-cell-has-focus ng-dblclick="editCell()">	<div ng-if="!isFocused">	DISPLAY_CELL_TEMPLATE	</div>	<div ng-if="isFocused">	EDITABLE_CELL_TEMPLATE	</div></div>'),e.put("cellTemplate.html",'<div class="ngCellText" ng-class="col.colIndex()"><span ng-cell-text>{{COL_FIELD CUSTOM_FILTERS}}</span></div>'),e.put("checkboxCellTemplate.html",'<div class="ngSelectionCell"><input tabindex="-1" class="ngSelectionCheckbox" type="checkbox" ng-checked="row.selected" /></div>'),e.put("checkboxHeaderTemplate.html",'<input class="ngSelectionHeader" type="checkbox" ng-show="multiSelect" ng-model="allSelected" ng-change="toggleSelectAll(allSelected)"/>'),e.put("editableCellTemplate.html",'<input ng-class="\'colt\' + col.index" ng-input="COL_FIELD" />'),e.put("footerTemplate.html",'<div ng-show="showFooter" class="ngFooterPanel" ng-class="{\'ui-widget-content\': jqueryUITheme, \'ui-corner-bottom\': jqueryUITheme}" ng-style="footerStyle()">    <div class="ngTotalSelectContainer" >        <div class="ngFooterTotalItems" ng-class="{\'ngNoMultiSelect\': !multiSelect}" >            <span class="ngLabel">{{i18n.ngTotalItemsLabel}} {{maxRows()}}</span><span ng-show="filterText.length > 0" class="ngLabel">({{i18n.ngShowingItemsLabel}} {{totalFilteredItemsLength()}})</span>        </div>        <div class="ngFooterSelectedItems" ng-show="multiSelect">            <span class="ngLabel">{{i18n.ngSelectedItemsLabel}} {{selectedItems.length}}</span>        </div>    </div>    <div class="ngPagerContainer" style="float: right; margin-top: 10px;" ng-show="enablePaging" ng-class="{\'ngNoMultiSelect\': !multiSelect}">        <div style="float:left; margin-right: 10px;" class="ngRowCountPicker">            <span style="float: left; margin-top: 3px;" class="ngLabel">{{i18n.ngPageSizeLabel}}</span>            <select style="float: left;height: 27px; width: 100px" ng-model="pagingOptions.pageSize" >                <option ng-repeat="size in pagingOptions.pageSizes">{{size}}</option>            </select>        </div>        <div style="float:left; margin-right: 10px; line-height:25px;" class="ngPagerControl" style="float: left; min-width: 135px;">            <button class="ngPagerButton" ng-click="pageToFirst()" ng-disabled="cantPageBackward()" title="{{i18n.ngPagerFirstTitle}}"><div class="ngPagerFirstTriangle"><div class="ngPagerFirstBar"></div></div></button>            <button class="ngPagerButton" ng-click="pageBackward()" ng-disabled="cantPageBackward()" title="{{i18n.ngPagerPrevTitle}}"><div class="ngPagerFirstTriangle ngPagerPrevTriangle"></div></button>            <input class="ngPagerCurrent" type="number" style="width:50px; height: 24px; margin-top: 1px; padding: 0 4px;" ng-model="pagingOptions.currentPage"/>            <button class="ngPagerButton" ng-click="pageForward()" ng-disabled="cantPageForward()" title="{{i18n.ngPagerNextTitle}}"><div class="ngPagerLastTriangle ngPagerNextTriangle"></div></button>            <button class="ngPagerButton" ng-click="pageToLast()" ng-disabled="cantPageToLast()" title="{{i18n.ngPagerLastTitle}}"><div class="ngPagerLastTriangle"><div class="ngPagerLastBar"></div></div></button>        </div>    </div></div>'),e.put("gridTemplate.html",'<div class="ngTopPanel" ng-class="{\'ui-widget-header\':jqueryUITheme, \'ui-corner-top\': jqueryUITheme}" ng-style="topPanelStyle()">    <div class="ngGroupPanel" ng-show="showGroupPanel()" ng-style="groupPanelStyle()">        <div class="ngGroupPanelDescription" ng-show="configGroups.length == 0">{{i18n.ngGroupPanelDescription}}</div>        <ul ng-show="configGroups.length > 0" class="ngGroupList">            <li class="ngGroupItem" ng-repeat="group in configGroups">                <span class="ngGroupElement">                    <span class="ngGroupName">{{group.displayName}}                        <span ng-click="removeGroup($index)" class="ngRemoveGroup">x</span>                    </span>                    <span ng-hide="$last" class="ngGroupArrow"></span>                </span>            </li>        </ul>    </div>    <div class="ngHeaderContainer" ng-style="headerStyle()">        <div class="ngHeaderScroller" ng-style="headerScrollerStyle()" ng-include="gridId + \'headerRowTemplate.html\'"></div>    </div>    <div ng-grid-menu></div></div><div class="ngViewport" unselectable="on" ng-viewport ng-class="{\'ui-widget-content\': jqueryUITheme}" ng-style="viewportStyle()">    <div class="ngCanvas" ng-style="canvasStyle()">        <div ng-style="rowStyle(row)" ng-repeat="row in renderedRows" ng-click="row.toggleSelected($event)" ng-class="row.alternatingRowClass()" ng-row></div>    </div></div><div ng-grid-footer></div>'),e.put("headerCellTemplate.html",'<div class="ngHeaderSortColumn {{col.headerClass}}" ng-style="{\'cursor\': col.cursor}" ng-class="{ \'ngSorted\': !noSortVisible }">    <div ng-click="col.sort($event)" ng-class="\'colt\' + col.index" class="ngHeaderText">{{col.displayName}}</div>    <div class="ngSortButtonDown" ng-show="col.showSortButtonDown()"></div>    <div class="ngSortButtonUp" ng-show="col.showSortButtonUp()"></div>    <div class="ngSortPriority">{{col.sortPriority}}</div>    <div ng-class="{ ngPinnedIcon: col.pinned, ngUnPinnedIcon: !col.pinned }" ng-click="togglePin(col)" ng-show="col.pinnable"></div></div><div ng-show="col.resizable" class="ngHeaderGrip" ng-click="col.gripClick($event)" ng-mousedown="col.gripOnMouseDown($event)"></div>'),e.put("headerRowTemplate.html",'<div ng-style="{ height: col.headerRowHeight }" ng-repeat="col in renderedColumns" ng-class="col.colIndex()" class="ngHeaderCell" ng-header-cell></div>'),e.put("menuTemplate.html",'<div ng-show="showColumnMenu || showFilter"  class="ngHeaderButton" ng-click="toggleShowMenu()">    <div class="ngHeaderButtonArrow"></div></div><div ng-show="showMenu" class="ngColMenu">    <div ng-show="showFilter">        <input placeholder="{{i18n.ngSearchPlaceHolder}}" type="text" ng-model="filterText"/>    </div>    <div ng-show="showColumnMenu">        <span class="ngMenuText">{{i18n.ngMenuText}}</span>        <ul class="ngColList">            <li class="ngColListItem" ng-repeat="col in columns | ngColumns">                <label><input ng-disabled="col.pinned" type="checkbox" class="ngColListCheckbox" ng-model="col.visible"/>{{col.displayName}}</label>				<a title="Group By" ng-class="col.groupedByClass()" ng-show="col.groupable && col.visible" ng-click="groupBy(col)"></a>				<span class="ngGroupingNumber" ng-show="col.groupIndex > 0">{{col.groupIndex}}</span>                      </li>        </ul>    </div></div>'),e.put("rowTemplate.html",'<div ng-style="{ \'cursor\': row.cursor }" ng-repeat="col in renderedColumns" ng-class="col.colIndex()" class="ngCell {{col.cellClass}}" ng-cell></div>')
}])}(window,jQuery),function(e,t,n,i){e.fn.accordion=function(t){var n,o=e(this),r=(new Date).getTime(),a=[],s=arguments[0],l="string"==typeof s,c=[].slice.call(arguments,1);return o.each(function(){var u,d=e.isPlainObject(t)?e.extend(!0,{},e.fn.accordion.settings,t):e.extend({},e.fn.accordion.settings),f=d.className,g=d.namespace,p=d.selector,h=d.error,m="."+g,v="module-"+g,b=o.selector||"",y=e(this),w=y.find(p.title),x=y.find(p.content),C=this,T=y.data(v);u={initialize:function(){u.debug("Initializing accordion with bound events",y),w.on("click"+m,u.event.click),u.instantiate()},instantiate:function(){T=u,y.data(v,u)},destroy:function(){u.debug("Destroying previous accordion for",y),y.removeData(v),w.off(m)},event:{click:function(){u.verbose("Title clicked",this);var t=e(this),n=w.index(t);u.toggle(n)},resetStyle:function(){u.verbose("Resetting styles on element",this),e(this).attr("style","").removeAttr("style").children().attr("style","").removeAttr("style")}},toggle:function(e){u.debug("Toggling content content at index",e);var t=w.eq(e),n=t.next(x),i=n.is(":visible");i?d.collapsible?u.close(e):u.debug("Cannot close accordion content collapsing is disabled"):u.open(e)},open:function(t){var n=w.eq(t),i=n.next(x),o=w.filter("."+f.active),r=o.next(w),a=o.size()>0;i.is(":animated")||(u.debug("Opening accordion content",n),d.exclusive&&a&&(o.removeClass(f.active),r.stop().children().animate({opacity:0},d.duration,u.event.resetStyle).end().slideUp(d.duration,d.easing,function(){r.removeClass(f.active).attr("style","").removeAttr("style").children().attr("style","").removeAttr("style")})),n.addClass(f.active),i.stop().children().attr("style","").removeAttr("style").end().slideDown(d.duration,d.easing,function(){i.addClass(f.active).attr("style","").removeAttr("style"),e.proxy(d.onOpen,i)(),e.proxy(d.onChange,i)()}))},close:function(t){var n=w.eq(t),i=n.next(x);u.debug("Closing accordion content",n),n.removeClass(f.active),i.removeClass(f.active).show().stop().children().animate({opacity:0},d.duration,u.event.resetStyle).end().slideUp(d.duration,d.easing,function(){i.attr("style","").removeAttr("style"),e.proxy(d.onClose,i)(),e.proxy(d.onChange,i)()})},setting:function(t,n){return u.debug("Changing setting",t,n),n===i?d[t]:(e.isPlainObject(t)?e.extend(!0,d,t):d[t]=n,i)},internal:function(t,n){return u.debug("Changing internal",t,n),n===i?u[t]:(e.isPlainObject(t)?e.extend(!0,u,t):u[t]=n,i)},debug:function(){d.debug&&(d.performance?u.performance.log(arguments):(u.debug=Function.prototype.bind.call(console.info,console,d.name+":"),u.debug.apply(console,arguments)))},verbose:function(){d.verbose&&d.debug&&(d.performance?u.performance.log(arguments):(u.verbose=Function.prototype.bind.call(console.info,console,d.name+":"),u.verbose.apply(console,arguments)))},error:function(){u.error=Function.prototype.bind.call(console.error,console,d.name+":"),u.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;d.performance&&(t=(new Date).getTime(),i=r||t,n=t-i,r=t,a.push({Element:C,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(u.performance.timer),u.performance.timer=setTimeout(u.performance.display,100)},display:function(){var t=d.name+":",n=0;r=!1,clearTimeout(u.performance.timer),e.each(a,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",b&&(t+=" '"+b+"'"),(console.group!==i||console.table!==i)&&a.length>0&&(console.groupCollapsed(t),console.table?console.table(a):e.each(a,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),a=[]}},invoke:function(t,o,r){var a,s,l;return o=o||c,r=C||r,"string"==typeof t&&T!==i&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(n,o){var r=n!=a?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(T[o])&&n!=a)T=T[o];else{if(!e.isPlainObject(T[r])||n==a)return T[o]!==i?(s=T[o],!1):T[r]!==i?(s=T[r],!1):(u.error(h.method),!1);T=T[r]}})),e.isFunction(s)?l=s.apply(r,o):s!==i&&(l=s),e.isArray(n)?n.push(l):"string"==typeof n?n=[n,l]:l!==i&&(n=l),s}},l?(T===i&&u.initialize(),u.invoke(s)):(T!==i&&u.destroy(),u.initialize())}),n!==i?n:this},e.fn.accordion.settings={name:"Accordion",namespace:"accordion",debug:!0,verbose:!0,performance:!0,exclusive:!0,collapsible:!0,duration:500,easing:"easeInOutQuint",onOpen:function(){},onClose:function(){},onChange:function(){},error:{method:"The method you called is not defined"},className:{active:"active"},selector:{title:".title",content:".content"}},e.extend(e.easing,{easeInOutQuint:function(e,t,n,i,o){return 1>(t/=o/2)?i/2*t*t*t*t*t+n:i/2*((t-=2)*t*t*t*t+2)+n}})}(jQuery,window,document),function(e,t,n,i){e.api=e.fn.api=function(n){var o,r,a=e.extend(!0,{},e.api.settings,n),s="function"!=typeof this?this:e("<div/>"),l=a.stateContext?e(a.stateContext):e(s),c="object"==typeof this?e(s):l,u=this,d=(new Date).getTime(),f=[],g=c.selector||"",p=a.namespace+"-module",h=a.className,m=a.metadata,v=a.error,b=c.data(p),y=arguments[0],w=b!==i&&"string"==typeof y,x=[].slice.call(arguments,1);return o={initialize:function(){var n,r,s,u,d,f,g=(new Date).getTime(),p={},b={};return a.serializeForm&&e(this).toJSON()!==i&&(p=o.get.formData(),o.debug("Adding form data to API Request",p),e.extend(!0,a.data,p)),n=e.proxy(a.beforeSend,c)(a),n===i||n?(u=o.get.url(o.get.templateURL()))?(s=e.Deferred().always(function(){a.stateContext&&l.removeClass(h.loading),e.proxy(a.complete,c)()}).done(function(t){o.debug("API request successful"),"json"==a.dataType?t.error!==i?e.proxy(a.failure,l)(t.error,a,c):e.isArray(t.errors)?e.proxy(a.failure,l)(t.errors[0],a,c):e.proxy(a.success,l)(t,a,c):e.proxy(a.success,l)(t,a,c)}).fail(function(t,n,r){var s,c=a.error[n]!==i?a.error[n]:r;if(t!==i)if(t.readyState!==i&&4==t.readyState){if(200!=t.status&&r!==i&&""!==r)o.error(u.statusMessage+r);else if("error"==n&&"json"==a.dataType)try{s=e.parseJSON(t.responseText),s&&s.error!==i&&(c=s.error)}catch(u){o.error(u.JSONParse)}l.removeClass(h.loading).addClass(h.error),a.errorLength>0&&setTimeout(function(){l.removeClass(h.error)},a.errorLength),o.debug("API Request error:",c),e.proxy(a.failure,l)(c,a,this)}else o.debug("Request Aborted (Most likely caused by page change)")}),e.extend(!0,b,a,{success:function(){},failure:function(){},complete:function(){},type:a.method||a.type,data:d,url:u,beforeSend:a.beforeXHR}),a.stateContext&&l.addClass(h.loading),a.progress&&(o.verbose("Adding progress events"),e.extend(!0,b,{xhr:function(){var n=new t.XMLHttpRequest;return n.upload.addEventListener("progress",function(t){var n;t.lengthComputable&&(n=Math.round(1e4*(t.loaded/t.total))/100+"%",e.proxy(a.progress,l)(n,t))},!1),n.addEventListener("progress",function(t){var n;t.lengthComputable&&(n=Math.round(1e4*(t.loaded/t.total))/100+"%",e.proxy(a.progress,l)(n,t))},!1),n}})),o.verbose("Creating AJAX request with settings: ",b),f=e.ajax(b).always(function(){r=a.loadingLength-((new Date).getTime()-g),a.loadingDelay=0>r?0:r}).done(function(e){var t=this;setTimeout(function(){s.resolveWith(t,[e])},a.loadingDelay)}).fail(function(e,t,n){var i=this;"abort"!=t?setTimeout(function(){s.rejectWith(i,[e,t,n])},a.loadingDelay):l.removeClass(h.error).removeClass(h.loading)}),a.stateContext&&c.data(m.promise,s).data(m.xhr,f),i):(o.error(v.missingURL),o.reset(),i):(o.error(v.beforeSend),o.reset(),i)},get:{formData:function(){return c.closest("form").toJSON()},templateURL:function(){var e,t=c.data(a.metadata.action)||a.action||!1;return t&&(o.debug("Creating url for: ",t),a.api[t]!==i?e=a.api[t]:o.error(v.missingAction)),a.url&&(e=a.url,o.debug("Getting url",e)),e},url:function(t,n){var r;return t&&(r=t.match(a.regExpTemplate),n=n||a.urlData,r&&(o.debug("Looking for URL variables",r),e.each(r,function(a,s){var l=s.substr(2,s.length-3),u=e.isPlainObject(n)&&n[l]!==i?n[l]:c.data(l)!==i?c.data(l):n[l];if(o.verbose("Looking for variable",l,c,c.data(l),n[l]),u===!1)o.debug("Removing variable from URL",r),t=t.replace("/"+s,"");else{if(u===i||!u)return o.error(v.missingParameter+l),t=!1,!1;t=t.replace(s,u)}}))),t}},reset:function(){c.data(m.promise,!1).data(m.xhr,!1),l.removeClass(h.error).removeClass(h.loading)},setting:function(t,n){return n===i?a[t]:(e.isPlainObject(t)?e.extend(!0,a,t):a[t]=n,i)},internal:function(t,n){return n===i?o[t]:(e.isPlainObject(t)?e.extend(!0,o,t):o[t]=n,i)},debug:function(){a.debug&&(a.performance?o.performance.log(arguments):(o.debug=Function.prototype.bind.call(console.info,console,a.name+":"),o.debug.apply(console,arguments)))},verbose:function(){a.verbose&&a.debug&&(a.performance?o.performance.log(arguments):(o.verbose=Function.prototype.bind.call(console.info,console,a.name+":"),o.verbose.apply(console,arguments)))},error:function(){o.error=Function.prototype.bind.call(console.error,console,a.name+":"),o.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;a.performance&&(t=(new Date).getTime(),i=d||t,n=t-i,d=t,f.push({Element:u,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(o.performance.timer),o.performance.timer=setTimeout(o.performance.display,100)},display:function(){var t=a.name+":",n=0;d=!1,clearTimeout(o.performance.timer),e.each(f,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",g&&(t+=" '"+g+"'"),(console.group!==i||console.table!==i)&&f.length>0&&(console.groupCollapsed(t),console.table?console.table(f):e.each(f,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),f=[]}},invoke:function(t,n,a){var s,l,c;return n=n||x,a=u||a,"string"==typeof t&&b!==i&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,function(n,r){var a=n!=s?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(b[r])&&n!=s)b=b[r];else{if(!e.isPlainObject(b[a])||n==s)return b[r]!==i?(l=b[r],!1):b[a]!==i?(l=b[a],!1):(o.error(v.method),!1);b=b[a]}})),e.isFunction(l)?c=l.apply(a,n):l!==i&&(c=l),e.isArray(r)?r.push(c):"string"==typeof r?r=[r,c]:c!==i&&(r=c),l}},w?(b===i&&o.initialize(),o.invoke(y)):(b!==i&&o.destroy(),o.initialize()),r!==i?r:this},e.fn.apiButton=function(t){return e(this).each(function(){var n,i=e(this),o=e(this).selector||"",r=e.isFunction(t)?e.extend(!0,{},e.api.settings,e.fn.apiButton.settings,{stateContext:this,success:t}):e.extend(!0,{},e.api.settings,e.fn.apiButton.settings,{stateContext:this},t);n={initialize:function(){r.context&&""!==o?e(r.context).on(o,"click."+r.namespace,n.click):i.on("click."+r.namespace,n.click)},click:function(){r.filter&&0!==e(this).filter(r.filter).size()||e.proxy(e.api,this)(r)}},n.initialize()}),this},e.api.settings={name:"API",namespace:"api",debug:!0,verbose:!0,performance:!0,api:{},beforeSend:function(e){return e},beforeXHR:function(){},success:function(){},complete:function(){},failure:function(){},progress:!1,error:{missingAction:"API action used but no url was defined",missingURL:"URL not specified for the API action",missingParameter:"Missing an essential URL parameter: ",timeout:"Your request timed out",error:"There was an error with your request",parseError:"There was an error parsing your request",JSONParse:"JSON could not be parsed during error handling",statusMessage:"Server gave an error: ",beforeSend:"The before send function has aborted the request",exitConditions:"API Request Aborted. Exit conditions met"},className:{loading:"loading",error:"error"},metadata:{action:"action",promise:"promise",xhr:"xhr"},regExpTemplate:/\{\$([A-z]+)\}/g,action:!1,url:!1,urlData:!1,serializeForm:!1,stateContext:!1,method:"get",data:{},dataType:"json",cache:!0,loadingLength:200,errorLength:2e3},e.fn.apiButton.settings={filter:".disabled, .loading",context:!1,stateContext:!1}}(jQuery,window,document),function(e,t,n,i){e.fn.colorize=function(t){var n=e.extend(!0,{},e.fn.colorize.settings,t),o=arguments||!1;return e(this).each(function(t){var r,a,s,l,c,u,d,f,g=e(this),p=e("<canvas />")[0],h=e("<canvas />")[0],m=e("<canvas />")[0],v=new Image,b=n.colors,y=(n.paths,n.namespace),w=n.error,x=g.data("module-"+y);return f={checkPreconditions:function(){return f.debug("Checking pre-conditions"),!e.isPlainObject(b)||e.isEmptyObject(b)?(f.error(w.undefinedColors),!1):!0},async:function(e){n.async?setTimeout(e,0):e()},getMetadata:function(){f.debug("Grabbing metadata"),l=g.data("image")||n.image||i,c=g.data("name")||n.name||t,u=n.width||g.width(),d=n.height||g.height(),(0===u||0===d)&&f.error(w.undefinedSize)},initialize:function(){f.debug("Initializing with colors",b),f.checkPreconditions()&&f.async(function(){f.getMetadata(),f.canvas.create(),f.draw.image(function(){f.draw.colors(),f.canvas.merge()}),g.data("module-"+y,f)})},redraw:function(){f.debug("Redrawing image"),f.async(function(){f.canvas.clear(),f.draw.colors(),f.canvas.merge()})},change:{color:function(e,t){return f.debug("Changing color",e),b[e]===i?(f.error(w.missingColor),!1):(b[e]=t,f.redraw(),i)}},canvas:{create:function(){f.debug("Creating canvases"),p.width=u,p.height=d,h.width=u,h.height=d,m.width=u,m.height=d,r=p.getContext("2d"),a=h.getContext("2d"),s=m.getContext("2d"),g.append(p),r=g.children("canvas")[0].getContext("2d")},clear:function(){f.debug("Clearing canvas"),s.fillStyle="#FFFFFF",s.fillRect(0,0,u,d)},merge:function(){return e.isFunction(r.blendOnto)?(r.putImageData(a.getImageData(0,0,u,d),0,0),s.blendOnto(r,"multiply"),i):(f.error(w.missingPlugin),i)}},draw:{image:function(e){f.debug("Drawing image"),e=e||function(){},l?(v.src=l,v.onload=function(){a.drawImage(v,0,0),e()}):(f.error(w.noImage),e())},colors:function(){f.debug("Drawing color overlays",b),e.each(b,function(e,t){n.onDraw(s,c,e,t)})}},debug:function(e,t){n.debug&&(t!==i?console.info(n.name+": "+e,t):console.info(n.name+": "+e))},error:function(e){console.warn(n.name+": "+e)},invoke:function(t,o,r){var a;return r=r||Array.prototype.slice.call(arguments,2),"string"==typeof t&&x!==i&&(t=t.split("."),e.each(t,function(t,i){return e.isPlainObject(x[i])?(x=x[i],!0):e.isFunction(x[i])?(a=x[i],!0):(f.error(n.error.method),!1)})),e.isFunction(a)?a.apply(o,r):!1}},x!==i&&o?("invoke"==o[0]&&(o=Array.prototype.slice.call(o,1)),f.invoke(o[0],this,Array.prototype.slice.call(o,1))):(f.initialize(),i)}),this},e.fn.colorize.settings={name:"Image Colorizer",debug:!0,namespace:"colorize",onDraw:function(){},async:!0,colors:{},metadata:{image:"image",name:"name"},error:{noImage:"No tracing image specified",undefinedColors:"No default colors specified.",missingColor:"Attempted to change color that does not exist",missingPlugin:"Blend onto plug-in must be included",undefinedHeight:"The width or height of image canvas could not be automatically determined. Please specify a height."}}}(jQuery,window,document),function(e,t,n,i){e.fn.form=function(t,o){var r,a=e(this),s=e.extend(!0,{},e.fn.form.settings,o),l=e.extend({},e.fn.form.settings.defaults,t),c=s.namespace,u=s.metadata,d=s.selector,f=s.className,g=s.error,p="."+c,h="module-"+c,m=a.selector||"",v=(new Date).getTime(),b=[],y=arguments[0],w="string"==typeof y,x=[].slice.call(arguments,1);return a.each(function(){var t,o=e(this),c=e(this).find(d.field),C=e(this).find(d.group),T=e(this).find(d.message),S=(e(this).find(d.prompt),e(this).find(d.submit)),k=[],P=this,$=o.data(h);t={initialize:function(){t.verbose("Initializing form validation",o,l,s),s.keyboardShortcuts&&c.on("keydown"+p,t.event.field.keydown),o.on("submit"+p,t.validate.form),c.on("blur"+p,t.event.field.blur),S.on("click"+p,t.submit),c.on(t.get.changeEvent()+p,t.event.field.change),t.instantiate()},instantiate:function(){t.verbose("Storing instance of module",t),$=t,o.data(h,t)},destroy:function(){t.verbose("Destroying previous module",$),o.off(p).removeData(h)},refresh:function(){t.verbose("Refreshing selector cache"),c=o.find(d.field)},submit:function(){t.verbose("Submitting form",o),o.submit()},event:{field:{keydown:function(n){var o=e(this),r=n.which,a={enter:13,escape:27};return r==a.escape&&(t.verbose("Escape key pressed blurring field"),o.blur()),!n.ctrlKey&&r==a.enter&&o.is(d.input)?(t.debug("Enter key pressed, submitting form"),S.addClass(f.down),o.one("keyup"+p,t.event.field.keyup),n.preventDefault(),!1):i},keyup:function(){t.verbose("Doing keyboard shortcut form submit"),S.removeClass(f.down),t.submit()},blur:function(){var n=e(this),i=n.closest(C);i.hasClass(f.error)?(t.debug("Revalidating field",n,t.get.validation(n)),t.validate.field(t.get.validation(n))):("blur"==s.on||"change"==s.on)&&t.validate.field(t.get.validation(n))},change:function(){var n=e(this),i=n.closest(C);i.hasClass(f.error)?(t.debug("Revalidating field",n,t.get.validation(n)),t.validate.field(t.get.validation(n))):"change"==s.on&&t.validate.field(t.get.validation(n))}}},get:{changeEvent:function(){return n.createElement("input").oninput!==i?"input":n.createElement("input").onpropertychange!==i?"propertychange":"keyup"},field:function(n){return t.verbose("Finding field with identifier",n),c.filter("#"+n).size()>0?c.filter("#"+n):c.filter('[name="'+n+'"]').size()>0?c.filter('[name="'+n+'"]'):c.filter("[data-"+u.validate+'="'+n+'"]').size()>0?c.filter("[data-"+u.validate+'="'+n+'"]'):e("<input/>")},validation:function(n){var i;return e.each(l,function(e,o){t.get.field(o.identifier).get(0)==n.get(0)&&(i=o)}),i||!1}},has:{field:function(e){return t.verbose("Checking for existence of a field with identifier",e),c.filter("#"+e).size()>0?!0:c.filter('[name="'+e+'"]').size()>0?!0:c.filter("[data-"+u.validate+'="'+e+'"]').size()>0?!0:!1}},add:{prompt:function(n,o){var r=t.get.field(n.identifier),a=r.closest(C),l=a.find(d.prompt),c=0!==l.size();t.verbose("Adding inline error",n),a.addClass(f.error),s.inline&&(c||(l=s.templates.prompt(o),l.appendTo(a)),l.html(o[0]),c||(s.transition&&e.fn.transition!==i?(t.verbose("Displaying error with css transition",s.transition),l.transition(s.transition+" in",s.duration)):(t.verbose("Displaying error with fallback javascript animation"),l.fadeIn(s.duration))))},errors:function(e){t.debug("Adding form error messages",e),T.html(s.templates.error(e))}},remove:{prompt:function(n){var o=t.get.field(n.identifier),r=o.closest(C),a=r.find(d.prompt);r.removeClass(f.error),s.inline&&a.is(":visible")&&(t.verbose("Removing prompt for field",n),s.transition&&e.fn.transition!==i?a.transition(s.transition+" out",s.duration,function(){a.remove()}):a.fadeOut(s.duration,function(){a.remove()}))}},validate:{form:function(n){var r=!0;return k=[],e.each(l,function(e,n){t.validate.field(n)||(r=!1)}),r?(t.debug("Form has no validation errors, submitting"),o.removeClass(f.error).addClass(f.success),e.proxy(s.onSuccess,this)(n),i):(t.debug("Form has errors"),o.addClass(f.error),s.inline||t.add.errors(k),e.proxy(s.onFailure,this)(k))},field:function(n){var o=t.get.field(n.identifier),r=!0,a=[];return n.rules!==i&&e.each(n.rules,function(e,i){t.has.field(n.identifier)&&!t.validate.rule(n,i)&&(t.debug("Field is invalid",n.identifier,i.type),a.push(i.prompt),r=!1)}),r?(t.remove.prompt(n,a),e.proxy(s.onValid,o)(),!0):(k=k.concat(a),t.add.prompt(n,a),e.proxy(s.onInvalid,o)(a),!1)},rule:function(n,r){var a,l,c=t.get.field(n.identifier),u=r.type,d=c.val(),f=/\[(.*?)\]/i,g=f.exec(u),p=!0;return g!==i&&null!==g?(a=g[1],l=u.replace(g[0],""),p=e.proxy(s.rules[l],o)(d,a)):p=e.proxy(s.rules[u],c)(d),p}},setting:function(n,o){return t.debug("Changing setting",n,o),o===i?s[n]:(e.isPlainObject(n)?e.extend(!0,s,n):s[n]=o,i)},internal:function(n,o){return t.debug("Changing internal",n,o),o===i?t[n]:(e.isPlainObject(n)?e.extend(!0,t,n):t[n]=o,i)},debug:function(){s.debug&&(s.performance?t.performance.log(arguments):(t.debug=Function.prototype.bind.call(console.info,console,s.name+":"),t.debug.apply(console,arguments)))},verbose:function(){s.verbose&&s.debug&&(s.performance?t.performance.log(arguments):(t.verbose=Function.prototype.bind.call(console.info,console,s.name+":"),t.verbose.apply(console,arguments)))},error:function(){t.error=Function.prototype.bind.call(console.error,console,s.name+":"),t.error.apply(console,arguments)},performance:{log:function(e){var n,i,o;s.performance&&(n=(new Date).getTime(),o=v||n,i=n-o,v=n,b.push({Element:P,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":i})),clearTimeout(t.performance.timer),t.performance.timer=setTimeout(t.performance.display,100)},display:function(){var n=s.name+":",o=0;v=!1,clearTimeout(t.performance.timer),e.each(b,function(e,t){o+=t["Execution Time"]}),n+=" "+o+"ms",m&&(n+=" '"+m+"'"),a.size()>1&&(n+=" ("+a.size()+")"),(console.group!==i||console.table!==i)&&b.length>0&&(console.groupCollapsed(n),console.table?console.table(b):e.each(b,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),b=[]}},invoke:function(n,o,a){var s,l,c;return o=o||x,a=P||a,"string"==typeof n&&$!==i&&(n=n.split(/[\. ]/),s=n.length-1,e.each(n,function(o,r){var a=o!=s?r+n[o+1].charAt(0).toUpperCase()+n[o+1].slice(1):n;if(e.isPlainObject($[r])&&o!=s)$=$[r];else{if(!e.isPlainObject($[a])||o==s)return $[r]!==i?(l=$[r],!1):$[a]!==i?(l=$[a],!1):(t.error(g.method),!1);$=$[a]}})),e.isFunction(l)?c=l.apply(a,o):l!==i&&(c=l),e.isArray(r)?r.push(c):"string"==typeof r?r=[r,c]:c!==i&&(r=c),l}},w?($===i&&t.initialize(),t.invoke(y)):($!==i&&t.destroy(),t.initialize())}),r!==i?r:this},e.fn.form.settings={name:"Form",namespace:"form",debug:!0,verbose:!0,performance:!0,keyboardShortcuts:!0,on:"submit",inline:!1,transition:"scale",duration:150,onValid:function(){},onInvalid:function(){},onSuccess:function(){return!0},onFailure:function(){return!1},metadata:{validate:"validate"},selector:{message:".error.message",field:"input, textarea, select",group:".field",input:"input",prompt:".prompt",submit:".submit"},className:{error:"error",success:"success",down:"down",label:"ui label prompt"},error:{method:"The method you called is not defined."},templates:{error:function(t){var n='<ul class="list">';return e.each(t,function(e,t){n+="<li>"+t+"</li>"}),n+="</ul>",e(n)},prompt:function(t){return e("<div/>").addClass("ui red pointing prompt label").html(t[0])}},rules:{checked:function(){return e(this).filter(":checked").size()>0},empty:function(e){return!(e===i||""===e)},email:function(e){var t=RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?");return t.test(e)},length:function(e,t){return e!==i?e.length>=t:!1},not:function(e,t){return e!=t},contains:function(e,t){return-1!==e.search(t)},is:function(e,t){return e==t},maxLength:function(e,t){return e!==i?t>=e.length:!1},match:function(t,n){var o,r=e(this);return r.find("#"+n).size()>0?o=r.find("#"+n).val():r.find("[name="+n+"]").size()>0?o=r.find("[name="+n+"]").val():r.find('[data-validate="'+n+'"]').size()>0&&(o=r.find('[data-validate="'+n+'"]').val()),o!==i?""+t==""+o:!1},url:function(e){var t=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;return t.test(e)}}}}(jQuery,window,document),function(e,t,n,i){e.fn.state=function(t){var n,o=e(this),r=e.extend(!0,{},e.fn.state.settings,t),a=o.selector||"",s=(new Date).getTime(),l=[],c=arguments[0],u="string"==typeof c,d=[].slice.call(arguments,1),f=r.error,g=r.metadata,p=r.className,h=r.namespace,m=r.states,v=r.text,b="."+h,y=h+"-module";return o.each(function(){var h,w=e(this),x=this,C=w.data(y);h={initialize:function(){h.verbose("Initializing module"),r.automatic&&h.add.defaults(),r.context&&""!==a?(h.allows("hover")&&e(x,r.context).on(a,"mouseenter"+b,h.enable.hover).on(a,"mouseleave"+b,h.disable.hover),h.allows("down")&&e(x,r.context).on(a,"mousedown"+b,h.enable.down).on(a,"mouseup"+b,h.disable.down),h.allows("focus")&&e(x,r.context).on(a,"focus"+b,h.enable.focus).on(a,"blur"+b,h.disable.focus),e(r.context).on(a,"mouseenter"+b,h.change.text).on(a,"mouseleave"+b,h.reset.text).on(a,"click"+b,h.toggle.state)):(h.allows("hover")&&w.on("mouseenter"+b,h.enable.hover).on("mouseleave"+b,h.disable.hover),h.allows("down")&&w.on("mousedown"+b,h.enable.down).on("mouseup"+b,h.disable.down),h.allows("focus")&&w.on("focus"+b,h.enable.focus).on("blur"+b,h.disable.focus),w.on("mouseenter"+b,h.change.text).on("mouseleave"+b,h.reset.text).on("click"+b,h.toggle.state)),h.instantiate()},instantiate:function(){h.verbose("Storing instance of module",h),C=h,w.data(y,h)},destroy:function(){h.verbose("Destroying previous module",C),w.off(b).removeData(y)},refresh:function(){h.verbose("Refreshing selector cache"),w=e(x)},add:{defaults:function(){var n=t&&e.isPlainObject(t.states)?t.states:{};e.each(r.defaults,function(t,o){h.is[t]!==i&&h.is[t]()&&(h.verbose("Adding default states",t,x),e.extend(r.states,o,n))})}},is:{active:function(){return w.hasClass(p.active)},loading:function(){return w.hasClass(p.loading)},inactive:function(){return!w.hasClass(p.active)},enabled:function(){return!w.is(r.filter.active)},disabled:function(){return w.is(r.filter.active)},textEnabled:function(){return!w.is(r.filter.text)},button:function(){return w.is(".button:not(a, .submit)")},input:function(){return w.is("input")}},allow:function(e){h.debug("Now allowing state",e),m[e]=!0},disallow:function(e){h.debug("No longer allowing",e),m[e]=!1},allows:function(e){return m[e]||!1},enable:{state:function(e){h.allows(e)&&w.addClass(p[e])},focus:function(){w.addClass(p.focus)},hover:function(){w.addClass(p.hover)},down:function(){w.addClass(p.down)}},disable:{state:function(e){h.allows(e)&&w.removeClass(p[e])},focus:function(){w.removeClass(p.focus)},hover:function(){w.removeClass(p.hover)},down:function(){w.removeClass(p.down)}},toggle:{state:function(){var e=w.data(g.promise);h.allows("active")&&h.is.enabled()&&(h.refresh(),e!==i?h.listenTo(e):h.change.state())}},listenTo:function(t){h.debug("API request detected, waiting for state signal",t),t?(v.loading&&h.update.text(v.loading),e.when(t).then(function(){"resolved"==t.state()?(h.debug("API request succeeded"),r.activateTest=function(){return!0},r.deactivateTest=function(){return!0}):(h.debug("API request failed"),r.activateTest=function(){return!1},r.deactivateTest=function(){return!1}),h.change.state()})):(r.activateTest=function(){return!1},r.deactivateTest=function(){return!1})},change:{state:function(){h.debug("Determining state change direction"),h.is.inactive()?h.activate():h.deactivate(),r.sync&&h.sync(),e.proxy(r.onChange,x)()},text:function(){h.is.textEnabled()&&(h.is.active()?v.hover?(h.verbose("Changing text to hover text",v.hover),h.update.text(v.hover)):v.disable&&(h.verbose("Changing text to disable text",v.disable),h.update.text(v.disable)):v.hover?(h.verbose("Changing text to hover text",v.disable),h.update.text(v.hover)):v.enable&&(h.verbose("Changing text to enable text",v.enable),h.update.text(v.enable)))}},activate:function(){e.proxy(r.activateTest,x)()&&(h.debug("Setting state to active"),w.addClass(p.active),h.update.text(v.active)),e.proxy(r.onActivate,x)()},deactivate:function(){e.proxy(r.deactivateTest,x)()&&(h.debug("Setting state to inactive"),w.removeClass(p.active),h.update.text(v.inactive)),e.proxy(r.onDeactivate,x)()},sync:function(){h.verbose("Syncing other buttons to current state"),h.is.active()?o.not(w).state("activate"):o.not(w).state("deactivate")},get:{text:function(){return r.selector.text?w.find(r.selector.text).text():w.html()},textFor:function(e){return v[e]||!1}},flash:{text:function(e,t){var n=h.get.text();h.debug("Flashing text message",e,t),e=e||r.text.flash,t=t||r.flashDuration,h.update.text(e),setTimeout(function(){h.update.text(n)},t)}},reset:{text:function(){var e=v.active||w.data(g.storedText),t=v.inactive||w.data(g.storedText);h.is.textEnabled()&&(h.is.active()&&e?(h.verbose("Resetting active text",e),h.update.text(e)):t&&(h.verbose("Resetting inactive text",e),h.update.text(t)))}},update:{text:function(e){var t=h.get.text();e&&e!==t?(h.debug("Updating text",e),r.selector.text?w.data(g.storedText,e).find(r.selector.text).text(e):w.data(g.storedText,e).html(e)):h.debug("Text is already sane, ignoring update",e)}},setting:function(t,n){return h.debug("Changing setting",t,n),n===i?r[t]:(e.isPlainObject(t)?e.extend(!0,r,t):r[t]=n,i)},internal:function(t,n){return h.debug("Changing internal",t,n),n===i?h[t]:(e.isPlainObject(t)?e.extend(!0,h,t):h[t]=n,i)},debug:function(){r.debug&&(r.performance?h.performance.log(arguments):(h.debug=Function.prototype.bind.call(console.info,console,r.name+":"),h.debug.apply(console,arguments)))},verbose:function(){r.verbose&&r.debug&&(r.performance?h.performance.log(arguments):(h.verbose=Function.prototype.bind.call(console.info,console,r.name+":"),h.verbose.apply(console,arguments)))},error:function(){h.error=Function.prototype.bind.call(console.error,console,r.name+":"),h.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;r.performance&&(t=(new Date).getTime(),i=s||t,n=t-i,s=t,l.push({Element:x,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(h.performance.timer),h.performance.timer=setTimeout(h.performance.display,100)},display:function(){var t=r.name+":",n=0;s=!1,clearTimeout(h.performance.timer),e.each(l,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",a&&(t+=" '"+a+"'"),o.size()>1&&(t+=" ("+o.size()+")"),(console.group!==i||console.table!==i)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,o,r){var a,s,l;return o=o||d,r=x||r,"string"==typeof t&&C!==i&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(n,o){var r=n!=a?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(C[o])&&n!=a)C=C[o];else{if(!e.isPlainObject(C[r])||n==a)return C[o]!==i?(s=C[o],!1):C[r]!==i?(s=C[r],!1):(h.error(f.method),!1);C=C[r]}})),e.isFunction(s)?l=s.apply(r,o):s!==i&&(l=s),e.isArray(n)?n.push(l):"string"==typeof n?n=[n,l]:l!==i&&(n=l),s}},u?(C===i&&h.initialize(),h.invoke(c)):(C!==i&&h.destroy(),h.initialize())}),n!==i?n:this},e.fn.state.settings={name:"State",debug:!0,verbose:!0,namespace:"state",performance:!0,onActivate:function(){},onDeactivate:function(){},onChange:function(){},activateTest:function(){return!0},deactivateTest:function(){return!0},automatic:!0,sync:!1,flashDuration:3e3,filter:{text:".loading, .disabled",active:".disabled"},context:!1,error:{method:"The method you called is not defined."},metadata:{promise:"promise",storedText:"stored-text"},className:{focus:"focus",hover:"hover",down:"down",active:"active",loading:"loading"},selector:{text:!1},defaults:{input:{hover:!0,focus:!0,down:!0,loading:!1,active:!1},button:{hover:!0,focus:!1,down:!0,active:!0,loading:!0}},states:{hover:!0,focus:!0,down:!0,loading:!1,active:!1},text:{flash:!1,hover:!1,active:!1,inactive:!1,enable:!1,disable:!1}}}(jQuery,window,document),function(e,t,n,i){e.fn.chatroom=function(t){return e(this).each(function(){var n,o,r,a,s,l,c,u=e.extend(!0,{},e.fn.chatroom.settings,t),d=u.className,f=u.namespace,g=u.selector,p=u.error,h=e(this),m=h.find(g.expandButton),v=h.find(g.userListButton),b=h.find(g.userList),y=(h.find(g.room),h.find(g.userCount)),w=h.find(g.log),x=(h.find(g.message),h.find(g.messageInput)),C=h.find(g.messageButton),T=h.data("module"),S="",k={};c={width:{log:w.width(),userList:b.outerWidth()},initialize:function(){return Pusher===i&&c.error(p.pusher),u.key===i||u.channelName===i?(c.error(p.key),!1):u.endpoint.message||u.endpoint.authentication?(l=new Pusher(u.key),Pusher.channel_auth_endpoint=u.endpoint.authentication,n=l.subscribe(u.channelName),n.bind("pusher:subscription_succeeded",c.user.list.create),n.bind("pusher:subscription_error",c.error),n.bind("pusher:member_added",c.user.joined),n.bind("pusher:member_removed",c.user.left),n.bind("update_messages",c.message.receive),e.each(u.customEvents,function(e,t){n.bind(e,t)}),v.on("click."+f,c.event.toggleUserList),m.on("click."+f,c.event.toggleExpand),x.on("keydown."+f,c.event.input.keydown).on("keyup."+f,c.event.input.keyup),C.on("mouseenter."+f,c.event.hover).on("mouseleave."+f,c.event.hover).on("click."+f,c.event.submit),w.animate({scrollTop:w.prop("scrollHeight")},400),h.data("module",c).addClass(d.loading),i):(c.error(p.endpoint),!1)
},refresh:function(){v.removeClass(d.active),c.width={log:w.width(),userList:b.outerWidth()},v.hasClass(d.active)&&c.user.list.hide(),h.data("module",c)},user:{updateCount:function(){u.userCount&&(k=h.data("users"),a=0,e.each(k,function(){a++}),y.html(u.templates.userCount(a)))},joined:function(t){k=h.data("users"),"anonymous"!=t.id&&k[t.id]===i&&(k[t.id]=t.info,u.randomColor&&t.info.color===i&&(t.info.color=u.templates.color(t.id)),S=u.templates.userList(t.info),t.info.isAdmin?e(S).prependTo(b):e(S).appendTo(b),u.partingMessages&&(w.append(u.templates.joined(t.info)),c.message.scroll.test()),c.user.updateCount())},left:function(e){k=h.data("users"),e!==i&&"anonymous"!==e.id&&(delete k[e.id],h.data("users",k),b.find("[data-id="+e.id+"]").remove(),u.partingMessages&&(w.append(u.templates.left(e.info)),c.message.scroll.test()),c.user.updateCount())},list:{create:function(t){k={},t.each(function(e){"anonymous"!==e.id&&"undefined"!==e.id&&(u.randomColor&&e.info.color===i&&(e.info.color=u.templates.color(e.id)),S=e.info.isAdmin?u.templates.userList(e.info)+S:S+u.templates.userList(e.info),k[e.id]=e.info)}),h.data("users",k).data("user",k[t.me.id]).removeClass(d.loading),b.html(S),c.user.updateCount(),e.proxy(u.onJoin,b.children())()},show:function(){w.animate({width:c.width.log-c.width.userList},{duration:u.speed,easing:u.easing,complete:c.message.scroll.move})},hide:function(){w.stop().animate({width:c.width.log},{duration:u.speed,easing:u.easing,complete:c.message.scroll.move})}}},message:{scroll:{test:function(){s=w.prop("scrollHeight")-w.height(),Math.abs(w.scrollTop()-s)<u.scrollArea&&c.message.scroll.move()},move:function(){s=w.prop("scrollHeight")-w.height(),w.scrollTop(s)}},send:function(t){c.utils.emptyString(t)||e.api({url:u.endpoint.message,method:"POST",data:{message:{content:t,timestamp:(new Date).getTime()}}})},receive:function(e){r=e.data,k=h.data("users"),o=h.data("user"),k[r.userID]!==i&&(o===i||o.id!=r.userID)&&(r.user=k[r.userID],c.message.display(r))},display:function(t){w.append(u.templates.message(t)),c.message.scroll.test(),e.proxy(u.onMessage,w.children().last())()}},expand:function(){h.addClass(d.expand),e.proxy(u.onExpand,h)(),c.refresh()},contract:function(){h.removeClass(d.expand),e.proxy(u.onContract,h)(),c.refresh()},event:{input:{keydown:function(e){13==e.which&&C.addClass(d.down)},keyup:function(e){13==e.which&&(C.removeClass(d.down),c.event.submit())}},submit:function(){var e=x.val(),t=h.data("user");t===i||c.utils.emptyString(e)||(c.message.send(e),c.message.display({user:t,text:e}),c.message.scroll.move(),x.val(""))},toggleExpand:function(){h.hasClass(d.expand)?(m.removeClass(d.active),c.contract()):(m.addClass(d.active),c.expand())},toggleUserList:function(){w.is(":animated")||(v.hasClass(d.active)?(v.removeClass("active"),c.user.list.hide()):(v.addClass(d.active),c.user.list.show()))}},utils:{emptyString:function(e){return"string"==typeof e?-1==e.search(/\S/):!1}},setting:function(t,n){return n===i?u[t]:(e.isPlainObject(t)?e.extend(!0,u,t):u[t]=n,i)},internal:function(t,n){return n===i?c[t]:(e.isPlainObject(t)?e.extend(!0,c,t):c[t]=n,i)},debug:function(){u.debug&&(u.performance?c.performance.log(arguments):(c.debug=Function.prototype.bind.call(console.info,console,u.name+":"),c.debug.apply(console,arguments)))},verbose:function(){u.verbose&&u.debug&&(u.performance?c.performance.log(arguments):(c.verbose=Function.prototype.bind.call(console.info,console,u.name+":"),c.verbose.apply(console,arguments)))},error:function(){c.error=Function.prototype.bind.call(console.error,console,u.name+":"),c.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;u.performance&&(t=(new Date).getTime(),i=time||t,n=t-i,time=t,performance.push({Element:element,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(c.performance.timer),c.performance.timer=setTimeout(c.performance.display,100)},display:function(){var t=u.name+":",n=0;time=!1,clearTimeout(c.performance.timer),e.each(performance,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",moduleSelector&&(t+=" '"+moduleSelector+"'"),t+=" ("+$allDropdowns.size()+")",(console.group!==i||console.table!==i)&&performance.length>0&&(console.groupCollapsed(t),console.table?console.table(performance):e.each(performance,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),performance=[]}},invoke:function(t,n,o){var r,a;return n=n||queryArguments,o=element||o,"string"==typeof t&&T!==i&&(t=t.split(/[\. ]/),r=t.length-1,e.each(t,function(t,n){e.isPlainObject(T[n])&&t!=r?T=T[n]:T[n]!==i?a=T[n]:c.error(p.method)})),e.isFunction(a)?a.apply(o,n):a||!1}},methodInvoked?(T===i&&c.initialize(),c.invoke(query)):(T!==i&&c.destroy(),c.initialize())}),invokedResponse?invokedResponse:this},e.fn.chatroom.settings={name:"Chat",debug:!1,namespace:"chat",channel:"present-chat",onJoin:function(){},onMessage:function(){},onExpand:function(){},onContract:function(){},customEvents:{},partingMessages:!1,userCount:!0,randomColor:!0,speed:300,easing:"easeOutQuint",scrollArea:9999,endpoint:{message:!1,authentication:!1},error:{method:"The method you called is not defined",endpoint:"Please define a message and authentication endpoint.",key:"You must specify a pusher key and channel.",pusher:"You must include the Pusher library."},className:{expand:"expand",active:"active",hover:"hover",down:"down",loading:"loading"},selector:{userCount:".actions .message",userListButton:".actions .list.button",expandButton:".actions .expand.button",room:".room",userList:".room .list",log:".room .log",message:".room .log .message",author:".room log .message .author",messageInput:".talk input",messageButton:".talk .send.button"},templates:{userCount:function(e){return e+" users in chat"},color:function(){var e=["#000000","#333333","#666666","#999999","#CC9999","#CC6666","#CC3333","#993333","#663333","#CC6633","#CC9966","#CC9933","#999966","#CCCC66","#99CC66","#669933","#669966","#33A3CC","#336633","#33CCCC","#339999","#336666","#336699","#6666CC","#9966CC","#333399","#663366","#996699","#993366","#CC6699"];return e[Math.floor(Math.random()*e.length)]},message:function(e){var t="";return e.user.isAdmin?(e.user.color="#55356A",t+='<div class="admin message">',t+='<span class="quirky ui flag team"></span>'):t+='<div class="message">',t+="<p>",t+=e.user.color!==i?'<span class="author" style="color: '+e.user.color+';">'+e.user.name+"</span>: ":'<span class="author">'+e.user.name+"</span>: ",t+=""+e.text+" </p>"+"</div>"},joined:function(e){return typeof e.name!==i?'<div class="status">'+e.name+" has joined the chat.</div>":!1},left:function(e){return typeof e.name!==i?'<div class="status">'+e.name+" has left the chat.</div>":!1},userList:function(e){var t="";return e.isAdmin&&(e.color="#55356A"),t+='<div class="user" data-id="'+e.id+'">'+' <div class="image">'+'   <img src="'+e.avatarURL+'">'+" </div>",t+=e.color!==i?' <p><a href="/users/'+e.id+'" target="_blank" style="color: '+e.color+';">'+e.name+"</a></p>":' <p><a href="/users/'+e.id+'" target="_blank">'+e.name+"</a></p>",t+="</div>"}}}}(jQuery,window,document),function(e,t,n,i){e.fn.checkbox=function(t){var n,o=e(this),r=o.selector||"",a=(new Date).getTime(),s=[],l=arguments[0],c="string"==typeof l,u=[].slice.call(arguments,1);return o.each(function(){var o,d=e.extend(!0,{},e.fn.checkbox.settings,t),f=d.className,g=d.namespace,p=d.error,h="."+g,m="module-"+g,v=e(this),b=e(this).next(d.selector.label).first(),y=e(this).find(d.selector.input),w=v.selector||"",x=v.data(m),C=this;o={initialize:function(){o.verbose("Initializing checkbox",d),d.context&&""!==w?(o.verbose("Adding delegated events"),e(C,d.context).on(w,"click"+h,o.toggle).on(w+" + "+d.selector.label,"click"+h,o.toggle)):(v.on("click"+h,o.toggle).data(m,o),b.on("click"+h,o.toggle)),o.instantiate()},instantiate:function(){o.verbose("Storing instance of module",o),x=o,v.data(m,o)},destroy:function(){o.verbose("Destroying previous module"),v.off(h).removeData(m)},is:{radio:function(){return v.hasClass(f.radio)}},can:{disable:function(){return"boolean"==typeof d.required?d.required:!o.is.radio()}},enable:function(){o.debug("Enabling checkbox",y),y.prop("checked",!0),e.proxy(d.onChange,y.get())(),e.proxy(d.onEnable,y.get())()},disable:function(){o.debug("Disabling checkbox"),y.prop("checked",!1),e.proxy(d.onChange,y.get())(),e.proxy(d.onDisable,y.get())()},toggle:function(){o.verbose("Determining new checkbox state"),y.prop("checked")!==i&&y.prop("checked")?o.can.disable()&&o.disable():o.enable()},setting:function(t,n){return n===i?d[t]:(e.isPlainObject(t)?e.extend(!0,d,t):d[t]=n,i)},internal:function(t,n){return n===i?o[t]:(e.isPlainObject(t)?e.extend(!0,o,t):o[t]=n,i)},debug:function(){d.debug&&(d.performance?o.performance.log(arguments):(o.debug=Function.prototype.bind.call(console.info,console,d.name+":"),o.debug.apply(console,arguments)))},verbose:function(){d.verbose&&d.debug&&(d.performance?o.performance.log(arguments):(o.verbose=Function.prototype.bind.call(console.info,console,d.name+":"),o.verbose.apply(console,arguments)))},error:function(){o.error=Function.prototype.bind.call(console.error,console,d.name+":"),o.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;d.performance&&(t=(new Date).getTime(),i=a||t,n=t-i,a=t,s.push({Element:C,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(o.performance.timer),o.performance.timer=setTimeout(o.performance.display,100)},display:function(){var t=d.name+":",n=0;a=!1,clearTimeout(o.performance.timer),e.each(s,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",r&&(t+=" '"+r+"'"),(console.group!==i||console.table!==i)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,r,a){var s,l,c;return r=r||u,a=C||a,"string"==typeof t&&x!==i&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,function(n,r){var a=n!=s?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(x[r])&&n!=s)x=x[r];else{if(!e.isPlainObject(x[a])||n==s)return x[r]!==i?(l=x[r],!1):x[a]!==i?(l=x[a],!1):(o.error(p.method),!1);x=x[a]}})),e.isFunction(l)?c=l.apply(a,r):l!==i&&(c=l),e.isArray(n)?n.push(c):"string"==typeof n?n=[n,c]:c!==i&&(n=c),l}},c?(x===i&&o.initialize(),o.invoke(l)):(x!==i&&o.destroy(),o.initialize())}),n!==i?n:this},e.fn.checkbox.settings={name:"Checkbox",namespace:"checkbox",verbose:!0,debug:!0,performance:!0,context:!1,required:"auto",onChange:function(){},onEnable:function(){},onDisable:function(){},error:{method:"The method you called is not defined."},selector:{input:"input[type=checkbox], input[type=radio]",label:"label"},className:{radio:"radio"}}}(jQuery,window,document),function(e,t,n,i){e.fn.dimmer=function(t){var o,r=e(this),a=(new Date).getTime(),s=[],l=arguments[0],c="string"==typeof l,u=[].slice.call(arguments,1);return r.each(function(){var d,f,g,p=e.isPlainObject(t)?e.extend(!0,{},e.fn.dimmer.settings,t):e.extend({},e.fn.dimmer.settings),h=p.selector,m=p.namespace,v=p.className,b=p.error,y="."+m,w="module-"+m,x=r.selector||"",C="ontouchstart"in n.documentElement?"touchstart":"click",T=e(this),S=this,k=T.data(w);console.log(S,t),g={preinitialize:function(){g.is.dimmer()?(f=T.parent(),d=T):(f=T,d=g.has.dimmer()?f.children(h.dimmer).first():g.create())},initialize:function(){g.debug("Initializing dimmer",p),"hover"==p.on?f.on("mouseenter"+y,g.show).on("mouseleave"+y,g.hide):"click"==p.on&&f.on(C+y,g.toggle),g.is.page()&&(g.debug("Setting as a page dimmer",f),g.set.pageDimmer()),p.closable&&(g.verbose("Adding dimmer close event",d),d.on(C+y,g.event.click)),g.set.dimmable(),g.instantiate()},instantiate:function(){g.verbose("Storing instance of module",g),k=g,T.data(w,k)},destroy:function(){g.verbose("Destroying previous module",d),T.removeData(w),f.off(y),d.off(y)},event:{click:function(t){g.verbose("Determining if event occured on dimmer",t),(0===d.find(t.target).size()||e(t.target).is(h.content))&&(g.hide(),t.stopImmediatePropagation())}},addContent:function(t){var n=e(t).detach();g.debug("Add content to dimmer",n),n.parent()[0]!==d[0]&&d.append(n)},create:function(){return e(p.template.dimmer()).appendTo(f)},animate:{show:function(t){t=t||function(){},g.set.dimmed(),e.fn.transition!==i?d.transition(p.transition+" in",g.get.duration(),function(){g.set.active(),t()}):(g.verbose("Showing dimmer animation with javascript"),d.stop().css({opacity:0,width:"100%",height:"100%"}).fadeTo(g.get.duration(),1,function(){d.removeAttr("style"),g.set.active(),t()}))},hide:function(t){t=t||function(){},g.remove.dimmed(),e.fn.transition!==i?(g.verbose("Hiding dimmer with css"),d.transition(p.transition+" out",g.get.duration(),function(){g.remove.active(),t()})):(g.verbose("Hiding dimmer with javascript"),d.stop().fadeOut(g.get.duration(),function(){d.removeAttr("style"),g.remove.active(),t()}))}},get:{dimmer:function(){return d},duration:function(){return"object"==typeof p.duration?g.is.active()?p.duration.hide:p.duration.show:p.duration}},has:{dimmer:function(){return T.children(h.dimmer).size()>0}},is:{dimmer:function(){return T.is(h.dimmer)},dimmable:function(){return T.is(h.dimmable)},active:function(){return d.hasClass(v.active)},animating:function(){return d.is(":animated")||d.hasClass(v.transition)},page:function(){return f.is("body")},enabled:function(){return!f.hasClass(v.disabled)},disabled:function(){return f.hasClass(v.disabled)},pageDimmer:function(){return d.hasClass(v.pageDimmer)}},can:{show:function(){return!d.hasClass(v.disabled)}},set:{active:function(){d.removeClass(v.transition).addClass(v.active)},dimmable:function(){f.addClass(v.dimmable)},dimmed:function(){f.addClass(v.dimmed)},pageDimmer:function(){d.addClass(v.pageDimmer)},disabled:function(){d.addClass(v.disabled)}},remove:{active:function(){d.removeClass(v.transition).removeClass(v.active)},dimmed:function(){f.removeClass(v.dimmed)},disabled:function(){d.removeClass(v.disabled)}},show:function(t){g.debug("Showing dimmer",d,p),g.is.active()||g.is.animating()||!g.is.enabled()?g.debug("Dimmer is already shown or disabled"):(g.animate.show(t),e.proxy(p.onShow,S)(),e.proxy(p.onChange,S)())},hide:function(t){g.is.active()&&!g.is.animating()?(g.debug("Hiding dimmer",d),g.animate.hide(t),e.proxy(p.onHide,S)(),e.proxy(p.onChange,S)()):g.debug("Dimmer is not visible")},toggle:function(){g.verbose("Toggling dimmer visibility",d),g.is.active()?g.hide():g.show()},setting:function(t,n){return n===i?p[t]:(e.isPlainObject(t)?e.extend(!0,p,t):p[t]=n,i)},internal:function(t,n){return n===i?g[t]:(e.isPlainObject(t)?e.extend(!0,g,t):g[t]=n,i)},debug:function(){p.debug&&(p.performance?g.performance.log(arguments):(g.debug=Function.prototype.bind.call(console.info,console,p.name+":"),g.debug.apply(console,arguments)))},verbose:function(){p.verbose&&p.debug&&(p.performance?g.performance.log(arguments):(g.verbose=Function.prototype.bind.call(console.info,console,p.name+":"),g.verbose.apply(console,arguments)))},error:function(){g.error=Function.prototype.bind.call(console.error,console,p.name+":"),g.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;p.performance&&(t=(new Date).getTime(),i=a||t,n=t-i,a=t,s.push({Element:S,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(g.performance.timer),g.performance.timer=setTimeout(g.performance.display,100)},display:function(){var t=p.name+":",n=0;a=!1,clearTimeout(g.performance.timer),e.each(s,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",x&&(t+=" '"+x+"'"),r.size()>1&&(t+=" ("+r.size()+")"),(console.group!==i||console.table!==i)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,n,r){var a,s,l;return n=n||u,r=S||r,"string"==typeof t&&k!==i&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(n,o){var r=n!=a?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(k[o])&&n!=a)k=k[o];else{if(!e.isPlainObject(k[r])||n==a)return k[o]!==i?(s=k[o],!1):k[r]!==i?(s=k[r],!1):(g.error(b.method),!1);k=k[r]}})),e.isFunction(s)?l=s.apply(r,n):s!==i&&(l=s),e.isArray(o)?o.push(l):"string"==typeof o?o=[o,l]:l!==i&&(o=l),s}},g.preinitialize(),c?(k===i&&g.initialize(),g.invoke(l)):(k!==i&&g.destroy(),g.initialize())}),o!==i?o:this},e.fn.dimmer.settings={name:"Dimmer",namespace:"dimmer",verbose:!0,debug:!0,performance:!0,transition:"fade",on:!1,closable:!0,duration:{show:500,hide:500},onChange:function(){},onShow:function(){},onHide:function(){},error:{method:"The method you called is not defined."},selector:{dimmable:".ui.dimmable",dimmer:".ui.dimmer",content:".ui.dimmer > .content, .ui.dimmer > .content > .center"},template:{dimmer:function(){return e("<div />").attr("class","ui dimmer")}},className:{active:"active",dimmable:"ui dimmable",dimmed:"dimmed",disabled:"disabled",pageDimmer:"page",hide:"hide",show:"show",transition:"transition"}}}(jQuery,window,document),function(e,t,n,i){e.fn.dropdown=function(t){var o,r=e(this),a=e(n),s=r.selector||"",l="ontouchstart"in n.documentElement,c=(new Date).getTime(),u=[],d=arguments[0],f="string"==typeof d,g=[].slice.call(arguments,1);return r.each(function(){var n,p=e.isPlainObject(t)?e.extend(!0,{},e.fn.dropdown.settings,t):e.extend({},e.fn.dropdown.settings),h=p.className,m=p.metadata,v=p.namespace,b=p.selector,y=p.error,w="."+v,x="module-"+v,C=e(this),T=C.find(b.item),S=C.find(b.text),k=C.find(b.input),P=C.children(b.menu),$=this,D=C.data(x);n={initialize:function(){n.debug("Initializing dropdown",p),n.set.selected(),l&&n.bind.touchEvents(),n.bind.mouseEvents(),a.one("mousemove"+w,n.set.hasMouse),n.instantiate()},instantiate:function(){n.verbose("Storing instance of dropdown",n),D=n,C.data(x,n)},destroy:function(){n.verbose("Destroying previous dropdown for",C),T.off(w),C.off(w).removeData(x)},bind:{touchEvents:function(){n.debug("Touch device detected binding touch events"),C.on("touchstart"+w,n.event.test.toggle),T.on("touchstart"+w,n.event.item.mouseenter).on("touchstart"+w,n.event.item.click)},mouseEvents:function(){n.verbose("Mouse detected binding mouse events"),"click"==p.on?C.on("click"+w,n.event.test.toggle):"hover"==p.on?C.on("mouseenter"+w,n.delay.show).on("mouseleave"+w,n.delay.hide):C.on(p.on+w,n.toggle),T.on("mouseenter"+w,n.event.item.mouseenter).on("mouseleave"+w,n.event.item.mouseleave).on("click"+w,n.event.item.click)},intent:function(){n.verbose("Binding hide intent event to document"),l&&a.on("touchstart"+w,n.event.test.touch).on("touchmove"+w,n.event.test.touch),a.on("click"+w,n.event.test.hide)}},unbind:{intent:function(){n.verbose("Removing hide intent event from document"),l&&a.off("touchstart"+w),a.off("click"+w)}},event:{test:{toggle:function(e){n.determine.intent(e,n.toggle),e.preventDefault(),e.stopImmediatePropagation()},touch:function(e){n.determine.intent(e,function(){"touchstart"==e.type?n.timer=setTimeout(n.hide,p.delay.touch):"touchmove"==e.type&&clearTimeout(n.timer)}),e.stopPropagation()},hide:function(e){n.determine.intent(e,n.hide)}},item:{mouseenter:function(t){var i=e(this).find(b.menu),o=e(this).siblings(b.item).children(b.menu);i.size()>0&&(clearTimeout(n.itemTimer),n.itemTimer=setTimeout(function(){n.animate.hide(!1,o),n.verbose("Showing sub-menu",i),n.animate.show(!1,i)},2*p.delay.show),t.preventDefault())},mouseleave:function(){var t=e(this).find(b.menu);t.size()>0&&(clearTimeout(n.itemTimer),n.itemTimer=setTimeout(function(){n.verbose("Hiding sub-menu",t),n.animate.hide(!1,t)},p.delay.hide))},click:function(){var t=e(this),i=t.data(m.text)||t.text(),o=t.data(m.value)||i.toLowerCase();0===t.find(b.menu).size()&&(n.determine.selectAction(i,o),e.proxy(p.onChange,$)(o,i))}},resetStyle:function(){e(this).removeAttr("style")}},determine:{selectAction:function(t,i){n.verbose("Determining action",p.action),e.isFunction(n.action[p.action])?(n.verbose("Triggering preset action",p.action,t,i),n.action[p.action](t,i)):e.isFunction(p.action)?(n.verbose("Triggering user action",p.action,t,i),p.action(t,i)):n.error(y.action)},intent:function(t,i){return n.debug("Determining whether event occurred in dropdown",t.target),i=i||function(){},0===e(t.target).closest(P).size()?(n.verbose("Triggering event",i),i(),!0):(n.verbose("Event occurred in dropdown, canceling callback"),!1)}},action:{nothing:function(){},hide:function(){n.hide()},activate:function(e,t){t=t||e,n.set.selected(t),n.set.value(t),n.hide()},auto:function(e,t){t=t||e,n.set.selected(t),n.set.value(t),n.hide()},changeText:function(e,t){t=t||e,n.set.selected(t),n.hide()},updateForm:function(e,t){t=t||e,n.set.selected(t),n.set.value(t),n.hide()}},get:{text:function(){return S.text()},value:function(){return k.val()},item:function(t){var o;return t=t||n.get.value()||n.get.text(),t?T.each(function(){var n=e(this),r=n.data(m.text)||n.text(),a=n.data(m.value)||r.toLowerCase();return a==t||r==t?(o=e(this),!1):i}):t=n.get.text(),o||!1}},set:{text:function(e){n.debug("Changing text",e,S),S.removeClass(h.placeholder),S.text(e)},value:function(e){n.debug("Adding selected value to hidden input",e,k),k.val(e)},active:function(){C.addClass(h.active)},visible:function(){C.addClass(h.visible)},selected:function(e){var t,i=n.get.item(e);i&&(n.debug("Setting selected menu item to",i),t=i.data(m.text)||i.text(),T.removeClass(h.active),i.addClass(h.active),n.set.text(t))}},remove:{active:function(){C.removeClass(h.active)},visible:function(){C.removeClass(h.visible)}},is:{selection:function(){return C.hasClass(h.selection)},visible:function(e){return e?e.is(":animated, :visible"):P.is(":animated, :visible")},hidden:function(e){return e?e.is(":not(:animated, :visible)"):P.is(":not(:animated, :visible)")}},can:{click:function(){return l||"click"==p.on},show:function(){return!C.hasClass(h.disabled)}},animate:{show:function(t,o){var r=o||P;t=t||function(){},n.is.hidden(r)&&(n.verbose("Doing menu show animation",r),"none"==p.transition?t():e.fn.transition!==i?r.transition({animation:p.transition+" in",duration:p.duration,complete:t,queue:!1}):"slide down"==p.transition?r.hide().clearQueue().children().clearQueue().css("opacity",0).delay(50).animate({opacity:1},p.duration,"easeOutQuad",n.event.resetStyle).end().slideDown(100,"easeOutQuad",function(){e.proxy(n.event.resetStyle,this)(),t()}):"fade"==p.transition?r.hide().clearQueue().fadeIn(p.duration,function(){e.proxy(n.event.resetStyle,this)(),t()}):n.error(y.transition))},hide:function(t,o){var r=o||P;t=t||function(){},n.is.visible(r)&&(n.verbose("Doing menu hide animation",r),e.fn.transition!==i?r.transition({animation:p.transition+" out",duration:p.duration,complete:t,queue:!1}):"none"==p.transition?t():"slide down"==p.transition?r.show().clearQueue().children().clearQueue().css("opacity",1).animate({opacity:0},100,"easeOutQuad",n.event.resetStyle).end().delay(50).slideUp(100,"easeOutQuad",function(){e.proxy(n.event.resetStyle,this)(),t()}):"fade"==p.transition?r.show().clearQueue().fadeOut(150,function(){e.proxy(n.event.resetStyle,this)(),t()}):n.error(y.transition))}},show:function(){n.debug("Checking if dropdown can show"),n.is.hidden()&&(n.hideOthers(),n.set.active(),n.animate.show(n.set.visible),n.can.click()&&n.bind.intent(),e.proxy(p.onShow,$)())},hide:function(){n.is.visible()&&(n.debug("Hiding dropdown"),n.can.click()&&n.unbind.intent(),n.remove.active(),n.animate.hide(n.remove.visible),e.proxy(p.onHide,$)())},delay:{show:function(){n.verbose("Delaying show event to ensure user intent"),clearTimeout(n.timer),n.timer=setTimeout(n.show,p.delay.show)},hide:function(){n.verbose("Delaying hide event to ensure user intent"),clearTimeout(n.timer),n.timer=setTimeout(n.hide,p.delay.hide)}},hideOthers:function(){n.verbose("Finding other dropdowns to hide"),r.not(C).has(b.menu+":visible").dropdown("hide")},toggle:function(){n.verbose("Toggling menu visibility"),n.is.hidden()?n.show():n.hide()},setting:function(t,n){return n===i?p[t]:(e.isPlainObject(t)?e.extend(!0,p,t):p[t]=n,i)},internal:function(t,o){return o===i?n[t]:(e.isPlainObject(t)?e.extend(!0,n,t):n[t]=o,i)},debug:function(){p.debug&&(p.performance?n.performance.log(arguments):(n.debug=Function.prototype.bind.call(console.info,console,p.name+":"),n.debug.apply(console,arguments)))},verbose:function(){p.verbose&&p.debug&&(p.performance?n.performance.log(arguments):(n.verbose=Function.prototype.bind.call(console.info,console,p.name+":"),n.verbose.apply(console,arguments)))},error:function(){n.error=Function.prototype.bind.call(console.error,console,p.name+":"),n.error.apply(console,arguments)},performance:{log:function(e){var t,i,o;p.performance&&(t=(new Date).getTime(),o=c||t,i=t-o,c=t,u.push({Element:$,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":i})),clearTimeout(n.performance.timer),n.performance.timer=setTimeout(n.performance.display,100)},display:function(){var t=p.name+":",o=0;c=!1,clearTimeout(n.performance.timer),e.each(u,function(e,t){o+=t["Execution Time"]}),t+=" "+o+"ms",s&&(t+=" '"+s+"'"),(console.group!==i||console.table!==i)&&u.length>0&&(console.groupCollapsed(t),console.table?console.table(u):e.each(u,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),u=[]}},invoke:function(t,r,a){var s,l,c;return r=r||g,a=$||a,"string"==typeof t&&D!==i&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,function(o,r){var a=o!=s?r+t[o+1].charAt(0).toUpperCase()+t[o+1].slice(1):t;if(e.isPlainObject(D[r])&&o!=s)D=D[r];else{if(!e.isPlainObject(D[a])||o==s)return D[r]!==i?(l=D[r],!1):D[a]!==i?(l=D[a],!1):(n.error(y.method),!1);D=D[a]}})),e.isFunction(l)?c=l.apply(a,r):l!==i&&(c=l),e.isArray(o)?o.push(c):"string"==typeof o?o=[o,c]:c!==i&&(o=c),l}},f?(D===i&&n.initialize(),n.invoke(d)):(D!==i&&n.destroy(),n.initialize())}),o?o:this},e.fn.dropdown.settings={name:"Dropdown",namespace:"dropdown",verbose:!0,debug:!0,performance:!0,on:"click",action:"activate",delay:{show:200,hide:300,touch:50},transition:"slide down",duration:250,onChange:function(){},onShow:function(){},onHide:function(){},error:{action:"You called a dropdown action that was not defined",method:"The method you called is not defined.",transition:"The requested transition was not found"},metadata:{text:"text",value:"value"},selector:{menu:".menu",item:".menu > .item",text:"> .text",input:'> input[type="hidden"]'},className:{active:"active",placeholder:"default",disabled:"disabled",visible:"visible",selection:"selection"}}}(jQuery,window,document),function(e,t,n,i){e.fn.modal=function(o){var r,a=e(this),s=e(t),l=e(n),c=(new Date).getTime(),u=[],d=arguments[0],f="string"==typeof d,g=[].slice.call(arguments,1);return a.each(function(){var p,h,m,v,b=e.isPlainObject(o)?e.extend(!0,{},e.fn.modal.settings,o):e.extend({},e.fn.modal.settings),y=b.selector,w=b.className,x=b.namespace,C=b.error,T="."+x,S="module-"+x,k=a.selector||"",P=e(this),$=e(b.context),D=a.not(P),A=P.find(y.close),I=this,E=P.data(S);v={initialize:function(){v.verbose("Initializing dimmer",$),h=$.dimmer({closable:!1,show:.95*b.duration,hide:1.05*b.duration}).dimmer("add content",P),m=h.dimmer("get dimmer"),v.verbose("Attaching close events",A),A.on("click"+T,v.event.close),s.on("resize",function(){v.event.debounce(v.refresh,50)}),v.instantiate()},instantiate:function(){v.verbose("Storing instance of modal"),E=v,P.data(S,E)},destroy:function(){v.verbose("Destroying previous modal"),P.removeData(S).off(T),A.off(T),$.dimmer("destroy")},refresh:function(){v.remove.scrolling(),v.cacheSizes(),v.set.type(),v.set.position()},attachEvents:function(t,n){var i=e(t);n=e.isFunction(v[n])?v[n]:v.toggle,i.size()>0?(v.debug("Attaching modal events to element",t,n),i.off(T).on("click"+T,n)):v.error(C.notFound)},event:{close:function(){v.verbose("Closing element pressed"),e(this).is(y.approve)&&e.proxy(b.onApprove,I)(),e(this).is(y.deny)&&e.proxy(b.onDeny,I)(),v.hide()},click:function(e){v.verbose("Determining if event occured on dimmer",e),0===m.find(e.target).size()&&(v.hide(),e.stopImmediatePropagation())},debounce:function(e,t){clearTimeout(v.timer),v.timer=setTimeout(e,t)},keyboard:function(e){var t=e.which,n=27;t==n&&(b.closable?(v.debug("Escape key pressed hiding modal"),v.hide()):v.debug("Escape key pressed, but closable is set to false"),e.preventDefault())},resize:function(){h.dimmer("is active")&&v.refresh()}},toggle:function(){v.is.active()?v.hide():v.show()},show:function(){v.showDimmer(),v.cacheSizes(),v.set.position(),v.hideAll(),b.transition&&e.fn.transition!==i?P.transition(b.transition+" in",b.duration,v.set.active):P.fadeIn(b.duration,b.easing,v.set.active),v.debug("Triggering dimmer"),e.proxy(b.onShow,I)()},showDimmer:function(){v.debug("Showing modal"),h.dimmer("show")},hide:function(){b.closable&&m.off("click"+T),h.dimmer("is active")&&h.dimmer("hide"),v.is.active()?(v.hideModal(),e.proxy(b.onHide,I)()):v.debug("Cannot hide modal, modal is not visible")},hideDimmer:function(){v.debug("Hiding dimmer"),h.dimmer("hide")},hideModal:function(){v.debug("Hiding modal"),v.remove.keyboardShortcuts(),b.transition&&e.fn.transition!==i?P.transition(b.transition+" out",b.duration,function(){v.remove.active(),v.restore.focus()}):P.fadeOut(b.duration,b.easing,function(){v.remove.active(),v.restore.focus()})},hideAll:function(){D.filter(":visible").modal("hide")},add:{keyboardShortcuts:function(){v.verbose("Adding keyboard shortcuts"),l.on("keyup"+T,v.event.keyboard)}},save:{focus:function(){p=e(n.activeElement).blur()}},restore:{focus:function(){p.size()>0&&p.focus()}},remove:{active:function(){P.removeClass(w.active)},keyboardShortcuts:function(){v.verbose("Removing keyboard shortcuts"),l.off("keyup"+T)},scrolling:function(){h.removeClass(w.scrolling),P.removeClass(w.scrolling)}},cacheSizes:function(){v.cache={height:P.outerHeight()+b.offset,contextHeight:"body"==b.context?e(t).height():h.height()},v.debug("Caching modal and container sizes",v.cache)},can:{fit:function(){return v.cache.height<v.cache.contextHeight}},is:{active:function(){return P.hasClass(w.active)}},set:{active:function(){v.add.keyboardShortcuts(),v.save.focus(),v.set.type(),P.addClass(w.active),b.closable&&m.on("click"+T,v.event.click)},scrolling:function(){h.addClass(w.scrolling),P.addClass(w.scrolling)},type:function(){v.can.fit()?(v.verbose("Modal fits on screen"),v.remove.scrolling()):(v.verbose("Modal cannot fit on screen setting to scrolling"),v.set.scrolling())},position:function(){v.verbose("Centering modal on page",v.cache,v.cache.height/2),v.can.fit()?P.css({top:"",marginTop:-(v.cache.height/2)}):P.css({marginTop:"1em",top:l.scrollTop()})}},setting:function(t,n){return n===i?b[t]:(e.isPlainObject(t)?e.extend(!0,b,t):b[t]=n,i)},internal:function(t,n){return n===i?v[t]:(e.isPlainObject(t)?e.extend(!0,v,t):v[t]=n,i)},debug:function(){b.debug&&(b.performance?v.performance.log(arguments):(v.debug=Function.prototype.bind.call(console.info,console,b.name+":"),v.debug.apply(console,arguments)))},verbose:function(){b.verbose&&b.debug&&(b.performance?v.performance.log(arguments):(v.verbose=Function.prototype.bind.call(console.info,console,b.name+":"),v.verbose.apply(console,arguments)))},error:function(){v.error=Function.prototype.bind.call(console.error,console,b.name+":"),v.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;b.performance&&(t=(new Date).getTime(),i=c||t,n=t-i,c=t,u.push({Element:I,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(v.performance.timer),v.performance.timer=setTimeout(v.performance.display,100)},display:function(){var t=b.name+":",n=0;c=!1,clearTimeout(v.performance.timer),e.each(u,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",k&&(t+=" '"+k+"'"),(console.group!==i||console.table!==i)&&u.length>0&&(console.groupCollapsed(t),console.table?console.table(u):e.each(u,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),u=[]}},invoke:function(t,n,o){var a,s,l;return n=n||g,o=I||o,"string"==typeof t&&E!==i&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(n,o){var r=n!=a?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;
if(e.isPlainObject(E[o])&&n!=a)E=E[o];else{if(!e.isPlainObject(E[r])||n==a)return E[o]!==i?(s=E[o],!1):E[r]!==i?(s=E[r],!1):(v.error(C.method),!1);E=E[r]}})),e.isFunction(s)?l=s.apply(o,n):s!==i&&(l=s),e.isArray(r)?r.push(l):"string"==typeof r?r=[r,l]:l!==i&&(r=l),s}},f?(E===i&&v.initialize(),v.invoke(d)):(E!==i&&v.destroy(),v.initialize())}),r!==i?r:this},e.fn.modal.settings={name:"Modal",namespace:"modal",verbose:!0,debug:!0,performance:!0,closable:!0,context:"body",duration:500,easing:"easeOutExpo",offset:0,transition:"scale",onShow:function(){},onHide:function(){},onApprove:function(){},onDeny:function(){},selector:{close:".close, .actions .button",approve:".actions .positive, .actions .approve",deny:".actions .negative, .actions .cancel"},error:{method:"The method you called is not defined."},className:{active:"active",scrolling:"scrolling"}}}(jQuery,window,document),function(e,t,n,i){e.fn.nag=function(n){var o,r=e(this),a=r.selector||"",s=(new Date).getTime(),l=[],c=arguments[0],u="string"==typeof c,d=[].slice.call(arguments,1);return e(this).each(function(){var f,g,p,h,m,v,b,y,w,x=e.extend(!0,{},e.fn.nag.settings,n),C=x.className,T=x.selector,S=x.error,k=x.namespace,P="."+k,$=k+"-module",D=e(this),A=D.find(T.close),I=e(x.context),E=this,R=D.data($),O=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)};w={initialize:function(){w.verbose("Initializing element"),f=D.offset(),g=D.outerHeight(),p=I.outerWidth(),h=I.outerHeight(),m=I.offset(),D.data($,w),A.on("click"+P,w.dismiss),x.context==t&&"fixed"==x.position&&D.addClass(C.fixed),x.sticky&&(w.verbose("Adding scroll events"),"absolute"==x.position?I.on("scroll"+P,w.event.scroll).on("resize"+P,w.event.scroll):e(t).on("scroll"+P,w.event.scroll).on("resize"+P,w.event.scroll),e.proxy(w.event.scroll,this)()),x.displayTime>0&&setTimeout(w.hide,x.displayTime),w.should.show()?D.is(":visible")||w.show():w.hide()},destroy:function(){w.verbose("Destroying instance"),D.removeData($).off(P),x.sticky&&I.off(P)},refresh:function(){w.debug("Refreshing cached calculations"),f=D.offset(),g=D.outerHeight(),p=I.outerWidth(),h=I.outerHeight(),m=I.offset()},show:function(){w.debug("Showing nag",x.animation.show),"fade"==x.animation.show?D.fadeIn(x.duration,x.easing):D.slideDown(x.duration,x.easing)},hide:function(){w.debug("Showing nag",x.animation.hide),"fade"==x.animation.show?D.fadeIn(x.duration,x.easing):D.slideUp(x.duration,x.easing)},onHide:function(){w.debug("Removing nag",x.animation.hide),D.remove(),x.onHide&&x.onHide()},stick:function(){if(w.refresh(),"fixed"==x.position){var n=e(t).prop("pageYOffset")||e(t).scrollTop(),i=D.hasClass(C.bottom)?m.top+(h-g)-n:m.top-n;D.css({position:"fixed",top:i,left:m.left,width:p-x.scrollBarWidth})}else D.css({top:b})},unStick:function(){D.css({top:""})},dismiss:function(e){x.storageMethod&&w.storage.set(x.storedKey,x.storedValue),w.hide(),e.stopImmediatePropagation(),e.preventDefault()},should:{show:function(){return x.persist?(w.debug("Persistent nag is set, can show nag"),!0):w.storage.get(x.storedKey)!=x.storedValue?(w.debug("Stored value is not set, can show nag",w.storage.get(x.storedKey)),!0):(w.debug("Stored value is set, cannot show nag",w.storage.get(x.storedKey)),!1)},stick:function(){return v=I.prop("pageYOffset")||I.scrollTop(),b=D.hasClass(C.bottom)?h-D.outerHeight()+v:v,b>f.top?!0:"fixed"==x.position?!0:!1}},storage:{set:function(n,o){w.debug("Setting stored value",n,o,x.storageMethod),"local"==x.storageMethod&&t.store!==i?t.store.set(n,o):e.cookie!==i?e.cookie(n,o):w.error(S.noStorage)},get:function(n){return w.debug("Getting stored value",n,x.storageMethod),"local"==x.storageMethod&&t.store!==i?t.store.get(n):e.cookie!==i?e.cookie(n):(w.error(S.noStorage),i)}},event:{scroll:function(){y!==i&&clearTimeout(y),y=setTimeout(function(){w.should.stick()?O(w.stick):w.unStick()},x.lag)}},setting:function(t,n){return w.debug("Changing setting",t,n),n===i?x[t]:(e.isPlainObject(t)?e.extend(!0,x,t):x[t]=n,i)},internal:function(t,n){return w.debug("Changing internal",t,n),n===i?w[t]:(e.isPlainObject(t)?e.extend(!0,w,t):w[t]=n,i)},debug:function(){x.debug&&(x.performance?w.performance.log(arguments):(w.debug=Function.prototype.bind.call(console.info,console,x.name+":"),w.debug.apply(console,arguments)))},verbose:function(){x.verbose&&x.debug&&(x.performance?w.performance.log(arguments):(w.verbose=Function.prototype.bind.call(console.info,console,x.name+":"),w.verbose.apply(console,arguments)))},error:function(){w.error=Function.prototype.bind.call(console.error,console,x.name+":"),w.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;x.performance&&(t=(new Date).getTime(),i=s||t,n=t-i,s=t,l.push({Element:E,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(w.performance.timer),w.performance.timer=setTimeout(w.performance.display,100)},display:function(){var t=x.name+":",n=0;s=!1,clearTimeout(w.performance.timer),e.each(l,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",a&&(t+=" '"+a+"'"),r.size()>1&&(t+=" ("+r.size()+")"),(console.group!==i||console.table!==i)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,n,r){var a,s,l;return n=n||d,r=E||r,"string"==typeof t&&R!==i&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(n,o){var r=n!=a?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(R[o])&&n!=a)R=R[o];else{if(!e.isPlainObject(R[r])||n==a)return R[o]!==i?(s=R[o],!1):R[r]!==i?(s=R[r],!1):(w.error(S.method),!1);R=R[r]}})),e.isFunction(s)?l=s.apply(r,n):s!==i&&(l=s),e.isArray(o)?o.push(l):"string"==typeof o?o=[o,l]:l!==i&&(o=l),s}},u?(R===i&&w.initialize(),w.invoke(c)):(R!==i&&w.destroy(),w.initialize())}),o!==i?o:this},e.fn.nag.settings={name:"Nag",verbose:!0,debug:!0,performance:!0,namespace:"Nag",persist:!1,displayTime:0,animation:{show:"slide",hide:"slide"},position:"fixed",scrollBarWidth:18,storageMethod:"cookie",storedKey:"nag",storedValue:"dismiss",sticky:!1,lag:0,context:t,error:{noStorage:"Neither $.cookie or store is defined. A storage solution is required for storing state",method:"The method you called is not defined."},className:{bottom:"bottom",fixed:"fixed"},selector:{close:".icon.close"},speed:500,easing:"easeOutQuad",onHide:function(){}}}(jQuery,window,document),function(e,t,n,i){e.fn.popup=function(o){var r,a=e(this),s=e(n),l=a.selector||"",c=(new Date).getTime(),u=[],d=arguments[0],f="string"==typeof d,g=[].slice.call(arguments,1);return a.each(function(){var n,a=e.isPlainObject(o)?e.extend(!0,{},e.fn.popup.settings,o):e.extend({},e.fn.popup.settings),p=a.selector,h=a.className,m=a.error,v=a.metadata,b=a.namespace,y="."+a.namespace,w="module-"+b,x=e(this),C=e(t),T=x.offsetParent(),S=a.inline?x.next(a.selector.popup):C.children(a.selector.popup).last(),k=0,P=this,$=x.data(w);n={initialize:function(){n.debug("Initializing module",x),"hover"==a.on?x.on("mouseenter"+y,n.event.mouseenter).on("mouseleave"+y,n.event.mouseleave):x.on(a.on+""+y,n.event[a.on]),C.on("resize"+y,n.event.resize),n.instantiate()},instantiate:function(){n.verbose("Storing instance of module",n),$=n,x.data(w,$)},refresh:function(){S=a.inline?x.next(p.popup):C.children(p.popup).last(),T=x.offsetParent()},destroy:function(){n.debug("Destroying previous module"),C.off(y),x.off(y).removeData(w)},event:{mouseenter:function(t){var i=this;n.timer=setTimeout(function(){e.proxy(n.toggle,i)(),e(i).hasClass(h.visible)&&t.stopPropagation()},a.delay)},mouseleave:function(){clearTimeout(n.timer),x.is(":visible")&&n.hide()},click:function(t){e.proxy(n.toggle,this)(),e(this).hasClass(h.visible)&&t.stopPropagation()},resize:function(){S.is(":visible")&&n.position()}},create:function(){n.debug("Creating pop-up html");var t=x.data(v.html)||a.html,i=x.data(v.variation)||a.variation,o=x.data(v.title)||a.title,r=x.data(v.content)||x.attr("title")||a.content;t||r||o?(t||(t=a.template({title:o,content:r})),S=e("<div/>").addClass(h.popup).addClass(i).html(t),a.inline?(n.verbose("Inserting popup element inline",S),S.insertAfter(x)):(n.verbose("Appending popup element to body",S),S.appendTo(e("body"))),e.proxy(a.onCreate,S)()):n.error(m.content)},remove:function(){n.debug("Removing popup"),S.remove()},get:{offstagePosition:function(){var i={top:e(t).scrollTop(),bottom:e(t).scrollTop()+e(t).height(),left:0,right:e(t).width()},o={width:S.width(),height:S.outerHeight(),position:S.offset()},r={},a=[];return o.position&&(r={top:o.position.top<i.top,bottom:o.position.top+o.height>i.bottom,right:o.position.left+o.width>i.right,left:o.position.left<i.left}),n.verbose("Checking if outside viewable area",o.position),e.each(r,function(e,t){t&&a.push(e)}),a.length>0?a.join(" "):!1},nextPosition:function(e){switch(e){case"top left":e="bottom left";break;case"bottom left":e="top right";break;case"top right":e="bottom right";break;case"bottom right":e="top center";break;case"top center":e="bottom center";break;case"bottom center":e="right center";break;case"right center":e="left center";break;case"left center":e="top center"}return e}},toggle:function(){x=e(this),n.debug("Toggling pop-up"),n.refresh(),x.hasClass(h.visible)||("click"==a.on&&n.hideAll(),n.show())},position:function(i,o){var r,s,l=(e(t).width(),e(t).height(),x.outerWidth()),c=x.outerHeight(),u=S.width(),d=S.outerHeight(),f=a.inline?x.position():x.offset(),g=a.inline?T.outerWidth():C.outerWidth(),p=a.inline?T.outerHeight():C.outerHeight();switch(i=i||x.data(v.position)||a.position,o=o||x.data(v.arrowOffset)||a.arrowOffset,n.debug("Calculating offset for position",i),i){case"top left":r={bottom:p-f.top+a.distanceAway,right:g-f.left-l-o,top:"auto",left:"auto"};break;case"top center":r={bottom:p-f.top+a.distanceAway,left:f.left+l/2-u/2+o,top:"auto",right:"auto"};break;case"top right":r={top:"auto",bottom:p-f.top+a.distanceAway,left:f.left+o};break;case"left center":r={top:f.top+c/2-d/2,right:g-f.left+a.distanceAway-o,left:"auto",bottom:"auto"};break;case"right center":r={top:f.top+c/2-d/2,left:f.left+l+a.distanceAway+o,bottom:"auto",right:"auto"};break;case"bottom left":r={top:f.top+c+a.distanceAway,right:g-f.left-l-o,left:"auto",bottom:"auto"};break;case"bottom center":r={top:f.top+c+a.distanceAway,left:f.left+l/2-u/2+o,bottom:"auto",right:"auto"};break;case"bottom right":r={top:f.top+c+a.distanceAway,left:f.left+o,bottom:"auto",right:"auto"}}return e.extend(r,{width:S.width()+1}),S.css(r).removeClass(h.position).addClass(i),s=n.get.offstagePosition(),s?(n.debug("Element is outside boundaries ",s),a.maxSearchDepth>k?(i=n.get.nextPosition(i),k++,n.debug("Trying new position: ",i),n.position(i)):(n.error(m.recursion),k=0,!1)):(n.debug("Position is on stage",i),k=0,!0)},show:function(){n.debug("Showing pop-up",a.transition),0===S.size()&&n.create(),n.position(),x.addClass(h.visible),a.transition&&e.fn.transition!==i?S.transition(a.transition+" in",a.duration):S.stop().fadeIn(a.duration,a.easing),"click"==a.on&&a.clicktoClose&&(n.debug("Binding popup close event"),s.on("click."+b,n.gracefully.hide)),e.proxy(a.onShow,S)()},hideAll:function(){e(p.popup).filter(":visible").popup("hide")},hide:function(){x.removeClass(h.visible),S.is(":visible")&&(n.debug("Hiding pop-up"),a.transition&&e.fn.transition!==i?S.transition(a.transition+" out",a.duration,n.reset):S.stop().fadeOut(a.duration,a.easing,n.reset)),"click"==a.on&&a.clicktoClose&&s.off("click."+b),e.proxy(a.onHide,S)()},reset:function(){n.verbose("Resetting inline styles"),S.attr("style","").removeAttr("style"),a.inline||n.remove()},gracefully:{hide:function(t){0===e(t.target).closest(p.popup).size()&&n.hide()}},setting:function(t,n){return n===i?a[t]:(e.isPlainObject(t)?e.extend(!0,a,t):a[t]=n,i)},internal:function(t,o){return o===i?n[t]:(e.isPlainObject(t)?e.extend(!0,n,t):n[t]=o,i)},debug:function(){a.debug&&(a.performance?n.performance.log(arguments):(n.debug=Function.prototype.bind.call(console.info,console,a.name+":"),n.debug.apply(console,arguments)))},verbose:function(){a.verbose&&a.debug&&(a.performance?n.performance.log(arguments):(n.verbose=Function.prototype.bind.call(console.info,console,a.name+":"),n.verbose.apply(console,arguments)))},error:function(){n.error=Function.prototype.bind.call(console.error,console,a.name+":"),n.error.apply(console,arguments)},performance:{log:function(e){var t,i,o;a.performance&&(t=(new Date).getTime(),o=c||t,i=t-o,c=t,u.push({Element:P,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":i})),clearTimeout(n.performance.timer),n.performance.timer=setTimeout(n.performance.display,100)},display:function(){var t=a.name+":",o=0;c=!1,clearTimeout(n.performance.timer),e.each(u,function(e,t){o+=t["Execution Time"]}),t+=" "+o+"ms",l&&(t+=" '"+l+"'"),(console.group!==i||console.table!==i)&&u.length>0&&(console.groupCollapsed(t),console.table?console.table(u):e.each(u,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),u=[]}},invoke:function(t,o,a){var s,l,c;return o=o||g,a=P||a,"string"==typeof t&&$!==i&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,function(o,r){var a=o!=s?r+t[o+1].charAt(0).toUpperCase()+t[o+1].slice(1):t;if(e.isPlainObject($[r])&&o!=s)$=$[r];else{if(!e.isPlainObject($[a])||o==s)return $[r]!==i?(l=$[r],!1):$[a]!==i?(l=$[a],!1):(n.error(m.method),!1);$=$[a]}})),e.isFunction(l)?c=l.apply(a,o):l!==i&&(c=l),e.isArray(r)?r.push(c):"string"==typeof r?r=[r,c]:c!==i&&(r=c),l}},f?($===i&&n.initialize(),n.invoke(d)):($!==i&&n.destroy(),n.initialize())}),r!==i?r:this},e.fn.popup.settings={name:"Popup",debug:!0,verbose:!0,performance:!0,namespace:"popup",onCreate:function(){},onShow:function(){},onHide:function(){},variation:"",content:!1,html:!1,title:!1,on:"hover",clicktoClose:!0,position:"top center",delay:150,inline:!0,duration:150,easing:"easeOutQuint",transition:"scale",distanceAway:0,arrowOffset:0,maxSearchDepth:10,error:{content:"Your popup has no content specified",method:"The method you called is not defined.",recursion:"Popup attempted to reposition element to fit, but could not find an adequate position."},metadata:{arrowOffset:"arrowOffset",content:"content",html:"html",position:"position",title:"title",variation:"variation"},className:{popup:"ui popup",visible:"visible",loading:"loading",position:"top left center bottom right"},selector:{popup:".ui.popup"},template:function(e){var t="";return typeof e!==i&&(typeof e.title!==i&&e.title&&(t+='<div class="header">'+e.title+'</div class="header">'),typeof e.content!==i&&e.content&&(t+='<div class="content">'+e.content+"</div>")),t}}}(jQuery,window,document),function(e,t,n,i){e.fn.rating=function(t){var n,o=e(this),r=o.selector||"",a=(new Date).getTime(),s=[],l=arguments[0],c="string"==typeof l,u=[].slice.call(arguments,1);return o.each(function(){var d,f=e.isPlainObject(t)?e.extend(!0,{},e.fn.rating.settings,t):e.extend({},e.fn.rating.settings),g=f.namespace,p=f.className,h=f.metadata,m=f.selector,v=f.error,b="."+g,y="module-"+g,w=this,x=e(this).data(y),C=e(this),T=C.find(m.icon);d={initialize:function(){d.verbose("Initializing rating module",f),f.interactive?d.enable():d.disable(),f.initialRating&&(d.debug("Setting initial rating"),d.setRating(f.initialRating)),C.data(h.rating)&&(d.debug("Rating found in metadata"),d.setRating(C.data(h.rating))),d.instantiate()},instantiate:function(){d.verbose("Instantiating module",f),x=d,C.data(y,d)},destroy:function(){d.verbose("Destroying previous instance",x),C.removeData(y),T.off(b)},event:{mouseenter:function(){var t=e(this);t.nextAll().removeClass(p.hover),C.addClass(p.hover),t.addClass(p.hover).prevAll().addClass(p.hover)},mouseleave:function(){C.removeClass(p.hover),T.removeClass(p.hover)},click:function(){var t=e(this),n=d.getRating(),i=T.index(t)+1;f.clearable&&n==i?d.clearRating():d.setRating(i)}},clearRating:function(){d.debug("Clearing current rating"),d.setRating(0)},getRating:function(){var e=T.filter("."+p.active).size();return d.verbose("Current rating retrieved",e),e},enable:function(){d.debug("Setting rating to interactive mode"),T.on("mouseenter"+b,d.event.mouseenter).on("mouseleave"+b,d.event.mouseleave).on("click"+b,d.event.click),C.addClass(p.active)},disable:function(){d.debug("Setting rating to read-only mode"),T.off(b),C.removeClass(p.active)},setRating:function(t){var n=t-1>=0?t-1:0,i=T.eq(n);C.removeClass(p.hover),T.removeClass(p.hover).removeClass(p.active),t>0&&(d.verbose("Setting current rating to",t),i.addClass(p.active).prevAll().addClass(p.active)),e.proxy(f.onRate,w)(t)},setting:function(t,n){return n===i?f[t]:(e.isPlainObject(t)?e.extend(!0,f,t):f[t]=n,i)},internal:function(t,n){return n===i?d[t]:(e.isPlainObject(t)?e.extend(!0,d,t):d[t]=n,i)},debug:function(){f.debug&&(f.performance?d.performance.log(arguments):(d.debug=Function.prototype.bind.call(console.info,console,f.name+":"),d.debug.apply(console,arguments)))},verbose:function(){f.verbose&&f.debug&&(f.performance?d.performance.log(arguments):(d.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),d.verbose.apply(console,arguments)))},error:function(){d.error=Function.prototype.bind.call(console.error,console,f.name+":"),d.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;f.performance&&(t=(new Date).getTime(),i=a||t,n=t-i,a=t,s.push({Element:w,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(d.performance.timer),d.performance.timer=setTimeout(d.performance.display,100)},display:function(){var t=f.name+":",n=0;a=!1,clearTimeout(d.performance.timer),e.each(s,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",r&&(t+=" '"+r+"'"),o.size()>1&&(t+=" ("+o.size()+")"),(console.group!==i||console.table!==i)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,o,r){var a,s,l;return o=o||u,r=w||r,"string"==typeof t&&x!==i&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(n,o){var r=n!=a?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(x[o])&&n!=a)x=x[o];else{if(!e.isPlainObject(x[r])||n==a)return x[o]!==i?(s=x[o],!1):x[r]!==i?(s=x[r],!1):(d.error(v.method),!1);x=x[r]}})),e.isFunction(s)?l=s.apply(r,o):s!==i&&(l=s),e.isArray(n)?n.push(l):"string"==typeof n?n=[n,l]:l!==i&&(n=l),s}},c?(x===i&&d.initialize(),d.invoke(l)):(x!==i&&d.destroy(),d.initialize())}),n!==i?n:this},e.fn.rating.settings={name:"Rating",namespace:"rating",verbose:!0,debug:!0,performance:!0,initialRating:0,interactive:!0,clearable:!1,onRate:function(){},error:{method:"The method you called is not defined"},metadata:{rating:"rating"},className:{active:"active",hover:"hover",loading:"loading"},selector:{icon:".icon"}}}(jQuery,window,document),function(e,t,n,i){e.fn.search=function(n,o){var r,a=e(this),s=a.selector||"",l=(new Date).getTime(),c=[],u=arguments[0],d="string"==typeof u,f=[].slice.call(arguments,1);return e(this).each(function(){var g,p=e.extend(!0,{},e.fn.search.settings,o),h=p.className,m=p.selector,v=p.error,b=p.namespace,y="."+b,w=b+"-module",x=e(this),C=x.find(m.prompt),T=x.find(m.searchButton),S=x.find(m.results),k=(x.find(m.result),x.find(m.category),this),P=x.data(w);g={initialize:function(){g.verbose("Initializing module");var e=C[0],t=e.oninput!==i?"input":e.onpropertychange!==i?"propertychange":"keyup";C.on("focus"+y,g.event.focus).on("blur"+y,g.event.blur).on("keydown"+y,g.handleKeyboard),p.automatic&&C.on(t+y,g.search.throttle),T.on("click"+y,g.search.query),S.on("click"+y,m.result,g.results.select),g.instantiate()},instantiate:function(){g.verbose("Storing instance of module",g),P=g,x.data(w,g)},destroy:function(){g.verbose("Destroying instance"),x.removeData(w)},event:{focus:function(){x.addClass(h.focus),g.results.show()},blur:function(){g.search.cancel(),x.removeClass(h.focus),g.results.hide()}},handleKeyboard:function(t){var n,i=x.find(m.result),o=x.find(m.category),r=t.which,a={backspace:8,enter:13,escape:27,upArrow:38,downArrow:40},s=h.active,l=i.index(i.filter("."+s)),c=i.size();if(r==a.escape&&(g.verbose("Escape key pressed, blurring search field"),C.trigger("blur")),S.filter(":visible").size()>0)if(r==a.enter){if(g.verbose("Enter key pressed, selecting active result"),i.filter("."+s).exists())return e.proxy(g.results.select,i.filter("."+s))(),t.preventDefault(),!1}else r==a.upArrow?(g.verbose("Up key pressed, changing active result"),n=0>l-1?l:l-1,o.removeClass(s),i.removeClass(s).eq(n).addClass(s).closest(o).addClass(s),t.preventDefault()):r==a.downArrow&&(g.verbose("Down key pressed, changing active result"),n=l+1>=c?l:l+1,o.removeClass(s),i.removeClass(s).eq(n).addClass(s).closest(o).addClass(s),t.preventDefault());else r==a.enter&&(g.verbose("Enter key pressed, executing query"),g.search.query(),T.addClass(h.down),C.one("keyup",function(){T.removeClass(h.down)}))},search:{cancel:function(){var e=x.data("xhr")||!1;e&&"resolved"!=e.state()&&(g.debug("Cancelling last search"),e.abort())},throttle:function(){var e=C.val(),t=e.length;clearTimeout(g.timer),t>=p.minCharacters?g.timer=setTimeout(g.search.query,p.searchThrottle):g.results.hide()},query:function(){var t=C.val(),i=g.search.cache.read(t);i?(g.debug("Reading result for '"+t+"' from cache"),g.results.add(i)):(g.debug("Querying for '"+t+"'"),"object"==typeof n?g.search.local(t):g.search.remote(t),e.proxy(p.onSearchQuery,x)(t))},local:function(t){var i,o=[],r=[],a=e.isArray(p.searchFields)?p.searchFields:[p.searchFields],s=RegExp("(?:s|^)"+t,"i"),l=RegExp(t,"i");x.addClass(h.loading),e.each(a,function(t,i){e.each(n,function(t,n){"string"==typeof n[i]&&-1==e.inArray(n,o)&&-1==e.inArray(n,r)&&(s.test(n[i])?o.push(n):l.test(n[i])&&r.push(n))})}),i=g.results.generate({results:e.merge(o,r)}),x.removeClass(h.loading),g.search.cache.write(t,i),g.results.add(i)},remote:function(t){var i,o={stateContext:x,url:n,urlData:{query:t},success:function(e){i=g.results.generate(e),g.search.cache.write(t,i),g.results.add(i)},failure:g.error};g.search.cancel(),g.debug("Executing search"),e.extend(!0,o,p.apiSettings),e.api(o)},cache:{read:function(e){var t=x.data("cache");return p.cache&&"object"==typeof t&&t[e]!==i?t[e]:!1},write:function(e,t){var n=x.data("cache")!==i?x.data("cache"):{};n[e]=t,x.data("cache",n)}}},results:{generate:function(t){g.debug("Generating html from response",t);var n=p.templates[p.type],i="";return e.isPlainObject(t.results)&&!e.isEmptyObject(t.results)||e.isArray(t.results)&&t.results.length>0?(p.maxResults>0&&(t.results=e.makeArray(t.results).slice(0,p.maxResults)),t.results.length>0&&(e.isFunction(n)?i=n(t):g.error(v.noTemplate,!1))):i=g.message(v.noResults,"empty"),e.proxy(p.onResults,x)(t),i},add:function(t){("default"==p.onResultsAdd||"default"==e.proxy(p.onResultsAdd,S)(t))&&S.html(t),g.results.show()},show:function(){0===S.filter(":visible").size()&&C.filter(":focus").size()>0&&""!==S.html()&&(S.stop().fadeIn(200),e.proxy(p.onResultsOpen,S)())},hide:function(){S.filter(":visible").size()>0&&(S.stop().fadeOut(200),e.proxy(p.onResultsClose,S)())},select:function(n){g.debug("Search result selected");var i=e(this),o=i.find(".title"),r=o.html();if("default"==p.onSelect||"default"==e.proxy(p.onSelect,this)(n)){var a=i.find("a[href]").eq(0),s=a.attr("href")||!1,l=a.attr("target")||!1;g.results.hide(),C.val(r),s&&("_blank"==l||n.ctrlKey?t.open(s):t.location.href=s)}}},setting:function(t,n){return g.debug("Changing setting",t,n),n===i?p[t]:(e.isPlainObject(t)?e.extend(!0,p,t):p[t]=n,i)},internal:function(t,n){return g.debug("Changing internal",t,n),n===i?g[t]:(e.isPlainObject(t)?e.extend(!0,g,t):g[t]=n,i)},debug:function(){p.debug&&(p.performance?g.performance.log(arguments):(g.debug=Function.prototype.bind.call(console.info,console,p.name+":"),g.debug.apply(console,arguments)))},verbose:function(){p.verbose&&p.debug&&(p.performance?g.performance.log(arguments):(g.verbose=Function.prototype.bind.call(console.info,console,p.name+":"),g.verbose.apply(console,arguments)))},error:function(){g.error=Function.prototype.bind.call(console.error,console,p.name+":"),g.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;p.performance&&(t=(new Date).getTime(),i=l||t,n=t-i,l=t,c.push({Element:k,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(g.performance.timer),g.performance.timer=setTimeout(g.performance.display,100)},display:function(){var t=p.name+":",n=0;l=!1,clearTimeout(g.performance.timer),e.each(c,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",s&&(t+=" '"+s+"'"),a.size()>1&&(t+=" ("+a.size()+")"),(console.group!==i||console.table!==i)&&c.length>0&&(console.groupCollapsed(t),console.table?console.table(c):e.each(c,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),c=[]}},invoke:function(t,n,o){var a,s,l;return n=n||f,o=k||o,"string"==typeof t&&P!==i&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(n,o){var r=n!=a?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(P[o])&&n!=a)P=P[o];else{if(!e.isPlainObject(P[r])||n==a)return P[o]!==i?(s=P[o],!1):P[r]!==i?(s=P[r],!1):(g.error(v.method),!1);P=P[r]}})),e.isFunction(s)?l=s.apply(o,n):s!==i&&(l=s),e.isArray(r)?r.push(l):"string"==typeof r?r=[r,l]:l!==i&&(r=l),s}},d?(P===i&&g.initialize(),g.invoke(u)):(P!==i&&g.destroy(),g.initialize())}),r!==i?r:this},e.fn.search.settings={name:"Search Module",namespace:"search",debug:!0,verbose:!0,performance:!0,onSelect:"default",onResultsAdd:"default",onSearchQuery:function(){},onResults:function(){},onResultsOpen:function(){},onResultsClose:function(){},automatic:"true",type:"simple",minCharacters:3,searchThrottle:300,maxResults:7,cache:!0,searchFields:["title","description"],apiSettings:{},className:{active:"active",down:"down",focus:"focus",empty:"empty",loading:"loading"},error:{noResults:"Your search returned no results",logging:"Error in debug logging, exiting.",noTemplate:"A valid template name was not specified.",serverError:"There was an issue with querying the server.",method:"The method you called is not defined."},selector:{prompt:".prompt",searchButton:".search.button",results:".results",category:".category",result:".result"},templates:{message:function(e,t){var n="";return e!==i&&t!==i&&(n+='<div class="message '+t+'">',n+="empty"==t?'<div class="header">No Results</div class="header"><div class="description">'+e+'</div class="description">':' <div class="description">'+e+"</div>",n+="</div>"),n},categories:function(t){var n="";return t.results!==i?(e.each(t.results,function(t,o){o.results!==i&&o.results.length>0&&(n+='<div class="category"><div class="name">'+o.name+"</div>",e.each(o.results,function(e,t){n+='<div class="result">',n+='<a href="'+t.url+'"></a>',t.image!==i&&(n+='<div class="image"> <img src="'+t.image+'">'+"</div>"),n+='<div class="info">',t.price!==i&&(n+='<div class="price">'+t.price+"</div>"),t.title!==i&&(n+='<div class="title">'+t.title+"</div>"),t.description!==i&&(n+='<div class="description">'+t.description+"</div>"),n+="</div></div>"}),n+="</div>")}),t.resultPage&&(n+='<a href="'+t.resultPage.url+'" class="all">'+t.resultPage.text+"</a>"),n):!1},simple:function(t){var n="";return t.results!==i?(e.each(t.results,function(e,t){n+='<a class="result" href="'+t.url+'">',t.image!==i&&(n+='<div class="image"> <img src="'+t.image+'">'+"</div>"),n+='<div class="info">',t.price!==i&&(n+='<div class="price">'+t.price+"</div>"),t.title!==i&&(n+='<div class="title">'+t.title+"</div>"),t.description!==i&&(n+='<div class="description">'+t.description+"</div>"),n+="</div></a>"}),t.resultPage&&(n+='<a href="'+t.resultPage.url+'" class="all">'+t.resultPage.text+"</a>"),n):!1}}}}(jQuery,window,document),function(e,t,n,i){e.fn.shape=function(t){var o,r=e(this),a=(new Date).getTime(),s=[],l=arguments[0],c="string"==typeof l,u=[].slice.call(arguments,1);return r.each(function(){var d,f,g,p=r.selector||"",h=e.extend(!0,{},e.fn.shape.settings,t),m=h.namespace,v=h.selector,b=h.error,y=h.className,w="."+m,x="module-"+m,C=e(this),T=C.find(v.sides),S=C.find(v.side),k=this,P=C.data(x);g={initialize:function(){g.verbose("Initializing module for",k),g.set.defaultSide(),g.instantiate()},instantiate:function(){g.verbose("Storing instance of module",g),P=g,C.data(x,P)},destroy:function(){g.verbose("Destroying previous module for",k),C.removeData(x).off(w)},refresh:function(){g.verbose("Refreshing selector cache for",k),C=e(k),T=e(this).find(v.shape),S=e(this).find(v.side)},repaint:function(){g.verbose("Forcing repaint event");var e=T.get(0)||n.createElement("div");e.offsetWidth},animate:function(e,t){g.verbose("Animating box with properties",e),t=t||function(e){g.verbose("Executing animation callback"),e!==i&&e.stopPropagation(),g.reset(),g.set.active()},h.useCSS?g.get.transitionEvent()?(g.verbose("Starting CSS animation"),C.addClass(y.animating),g.set.stageSize(),g.repaint(),C.addClass(y.css),d.addClass(y.hidden),T.css(e).one(g.get.transitionEvent(),t)):t():(g.verbose("Starting javascript animation"),C.addClass(y.animating).removeClass(y.css),g.set.stageSize(),g.repaint(),d.animate({opacity:0},h.duration,h.easing),T.animate(e,h.duration,h.easing,t))},queue:function(e){g.debug("Queueing animation of",e),T.one(g.get.transitionEvent(),function(){g.debug("Executing queued animation"),setTimeout(function(){C.shape(e)},0)})},reset:function(){g.verbose("Animating states reset"),C.removeClass(y.css).removeClass(y.animating).attr("style","").removeAttr("style"),T.attr("style","").removeAttr("style"),S.attr("style","").removeAttr("style").removeClass(y.hidden),f.removeClass(y.animating).attr("style","").removeAttr("style")},is:{animating:function(){return C.hasClass(y.animating)}},get:{transform:{up:function(){var e={y:-((d.outerHeight()-f.outerHeight())/2),z:-(d.outerHeight()/2)};return{transform:"translateY("+e.y+"px) translateZ("+e.z+"px) rotateX(-90deg)"}},down:function(){var e={y:-((d.outerHeight()-f.outerHeight())/2),z:-(d.outerHeight()/2)};return{transform:"translateY("+e.y+"px) translateZ("+e.z+"px) rotateX(90deg)"}},left:function(){var e={x:-((d.outerWidth()-f.outerWidth())/2),z:-(d.outerWidth()/2)};return{transform:"translateX("+e.x+"px) translateZ("+e.z+"px) rotateY(90deg)"}},right:function(){var e={x:-((d.outerWidth()-f.outerWidth())/2),z:-(d.outerWidth()/2)};return{transform:"translateX("+e.x+"px) translateZ("+e.z+"px) rotateY(-90deg)"}},over:function(){var e={x:-((d.outerWidth()-f.outerWidth())/2)};return{transform:"translateX("+e.x+"px) rotateY(180deg)"}},back:function(){var e={x:-((d.outerWidth()-f.outerWidth())/2)};return{transform:"translateX("+e.x+"px) rotateY(-180deg)"}}},transitionEvent:function(){var e,t=n.createElement("element"),o={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in o)if(t.style[e]!==i)return o[e]},nextSide:function(){return d.next(v.side).size()>0?d.next(v.side):C.find(v.side).first()}},set:{defaultSide:function(){d=C.find("."+h.className.active),f=d.next(v.side).size()>0?d.next(v.side):C.find(v.side).first(),g.verbose("Active side set to",d),g.verbose("Next side set to",f)},stageSize:function(){var e={width:f.outerWidth(),height:f.outerHeight()};g.verbose("Resizing stage to fit new content",e),C.css({width:e.width,height:e.height})},nextSide:function(e){f=C.find(e),0===f.size()&&g.error(b.side),g.verbose("Next side manually set to",f)},active:function(){g.verbose("Setting new side to active",f),S.removeClass(y.active),f.addClass(y.active),e.proxy(h.onChange,f)(),g.set.defaultSide()}},flip:{up:function(){g.debug("Flipping up",f),g.is.animating()?g.queue("flip up"):(g.stage.above(),g.animate(g.get.transform.up()))},down:function(){g.debug("Flipping down",f),g.is.animating()?g.queue("flip down"):(g.stage.below(),g.animate(g.get.transform.down()))},left:function(){g.debug("Flipping left",f),g.is.animating()?g.queue("flip left"):(g.stage.left(),g.animate(g.get.transform.left()))
},right:function(){g.debug("Flipping right",f),g.is.animating()?g.queue("flip right"):(g.stage.right(),g.animate(g.get.transform.right()))},over:function(){g.debug("Flipping over",f),g.is.animating()?g.queue("flip over"):(g.stage.behind(),g.animate(g.get.transform.over()))},back:function(){g.debug("Flipping back",f),g.is.animating()?g.queue("flip back"):(g.stage.behind(),g.animate(g.get.transform.back()))}},stage:{above:function(){var e={origin:(d.outerHeight()-f.outerHeight())/2,depth:{active:f.outerHeight()/2,next:d.outerHeight()/2}};g.verbose("Setting the initial animation position as above",f,e),d.css({transform:"rotateY(0deg) translateZ("+e.depth.active+"px)"}),f.addClass(y.animating).css({display:"block",top:e.origin+"px",transform:"rotateX(90deg) translateZ("+e.depth.next+"px)"})},below:function(){var e={origin:(d.outerHeight()-f.outerHeight())/2,depth:{active:f.outerHeight()/2,next:d.outerHeight()/2}};g.verbose("Setting the initial animation position as below",f,e),d.css({transform:"rotateY(0deg) translateZ("+e.depth.active+"px)"}),f.addClass(y.animating).css({display:"block",top:e.origin+"px",transform:"rotateX(-90deg) translateZ("+e.depth.next+"px)"})},left:function(){var e={origin:(d.outerWidth()-f.outerWidth())/2,depth:{active:f.outerWidth()/2,next:d.outerWidth()/2}};g.verbose("Setting the initial animation position as left",f,e),d.css({transform:"rotateY(0deg) translateZ("+e.depth.active+"px)"}),f.addClass(y.animating).css({display:"block",left:e.origin+"px",transform:"rotateY(-90deg) translateZ("+e.depth.next+"px)"})},right:function(){var e={origin:(d.outerWidth()-f.outerWidth())/2,depth:{active:f.outerWidth()/2,next:d.outerWidth()/2}};g.verbose("Setting the initial animation position as left",f,e),d.css({transform:"rotateY(0deg) translateZ("+e.depth.active+"px)"}),f.addClass(y.animating).css({display:"block",left:e.origin+"px",transform:"rotateY(90deg) translateZ("+e.depth.next+"px)"})},behind:function(){var e={origin:(d.outerWidth()-f.outerWidth())/2,depth:{active:f.outerWidth()/2,next:d.outerWidth()/2}};g.verbose("Setting the initial animation position as behind",f,e),d.css({transform:"rotateY(0deg)"}),f.addClass(y.animating).css({display:"block",left:e.origin+"px",transform:"rotateY(-180deg)"})}},setting:function(t,n){return n===i?h[t]:(e.isPlainObject(t)?e.extend(!0,h,t):h[t]=n,i)},internal:function(t,n){return n===i?g[t]:(e.isPlainObject(t)?e.extend(!0,g,t):g[t]=n,i)},debug:function(){h.debug&&(h.performance?g.performance.log(arguments):(g.debug=Function.prototype.bind.call(console.info,console,h.name+":"),g.debug.apply(console,arguments)))},verbose:function(){h.verbose&&h.debug&&(h.performance?g.performance.log(arguments):(g.verbose=Function.prototype.bind.call(console.info,console,h.name+":"),g.verbose.apply(console,arguments)))},error:function(){g.error=Function.prototype.bind.call(console.error,console,h.name+":"),g.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;h.performance&&(t=(new Date).getTime(),i=a||t,n=t-i,a=t,s.push({Element:k,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(g.performance.timer),g.performance.timer=setTimeout(g.performance.display,100)},display:function(){var t=h.name+":",n=0;a=!1,clearTimeout(g.performance.timer),e.each(s,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",p&&(t+=" '"+p+"'"),r.size()>1&&(t+=" ("+r.size()+")"),(console.group!==i||console.table!==i)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,n,r){var a,s,l;return n=n||u,r=k||r,"string"==typeof t&&P!==i&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(n,o){var r=n!=a?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(P[o])&&n!=a)P=P[o];else{if(!e.isPlainObject(P[r])||n==a)return P[o]!==i?(s=P[o],!1):P[r]!==i?(s=P[r],!1):(g.error(b.method),!1);P=P[r]}})),e.isFunction(s)?l=s.apply(r,n):s!==i&&(l=s),e.isArray(o)?o.push(l):"string"==typeof o?o=[o,l]:l!==i&&(o=l),s}},c?(P===i&&g.initialize(),g.invoke(l)):(P!==i&&g.destroy(),g.initialize())}),o!==i?o:this},e.fn.shape.settings={name:"Shape",debug:!0,verbose:!0,performance:!0,namespace:"shape",beforeChange:function(){},onChange:function(){},useCSS:!0,duration:1e3,easing:"easeInOutQuad",error:{side:"You tried to switch to a side that does not exist.",method:"The method you called is not defined"},className:{css:"css",animating:"animating",hidden:"hidden",active:"active"},selector:{sides:".sides",side:".side"}}}(jQuery,window,document),function(e,t,n,i){e.fn.sidebar=function(t){var o,r=e(this),a=r.selector||"",s=(new Date).getTime(),l=[],c=arguments[0],u="string"==typeof c,d=[].slice.call(arguments,1);return r.each(function(){var f,g=e.isPlainObject(t)?e.extend(!0,{},e.fn.sidebar.settings,t):e.extend({},e.fn.sidebar.settings),p=(g.selector,g.className),h=g.namespace,m=g.error,v="."+h,b="module-"+h,y=e(this),w=e("body"),x=e("head"),C=e("style[title="+h+"]"),T=this,S=y.data(b);f={initialize:function(){f.debug("Initializing sidebar",y),f.instantiate()},instantiate:function(){f.verbose("Storing instance of module",f),S=f,y.data(b,f)},destroy:function(){f.verbose("Destroying previous module for",y),y.off(v).removeData(b)},refresh:function(){f.verbose("Refreshing selector cache"),C=e("style[title="+h+"]")},attachEvents:function(t,n){var i=e(t);n=e.isFunction(f[n])?f[n]:f.toggle,i.size()>0?(f.debug("Attaching sidebar events to element",t,n),i.off(v).on("click"+v,n)):f.error(m.notFound)},show:function(){f.debug("Showing sidebar"),f.is.closed()?(g.overlay||f.pushPage(),f.set.active()):f.debug("Sidebar is already visible")},hide:function(){f.is.open()&&(g.overlay||(f.pullPage(),f.remove.pushed()),f.remove.active())},toggle:function(){f.is.closed()?f.show():f.hide()},pushPage:function(){var e=f.get.direction(),t=f.is.vertical()?y.outerHeight():y.outerWidth();g.useCSS?(f.debug("Using CSS to animate body"),f.add.bodyCSS(e,t),f.set.pushed()):f.animatePage(e,t,f.set.pushed)},pullPage:function(){var e=f.get.direction();g.useCSS?(f.debug("Resetting body position css"),f.remove.bodyCSS()):(f.debug("Resetting body position using javascript"),f.animatePage(e,0)),f.remove.pushed()},animatePage:function(e,t){var n={};n["padding-"+e]=t,f.debug("Using javascript to animate body",n),w.animate(n,g.duration,f.set.pushed)},add:{bodyCSS:function(e,t){var n;e!==p.bottom&&(n='<style title="'+h+'">'+"body.pushed {"+"  margin-"+e+": "+t+"px !important;"+"}"+"</style>"),x.append(n),f.debug("Adding body css to head",C)}},remove:{bodyCSS:function(){f.debug("Removing body css styles",C),f.refresh(),C.remove()},active:function(){y.removeClass(p.active)},pushed:function(){f.verbose("Removing body push state",f.get.direction()),w.removeClass(p[f.get.direction()]).removeClass(p.pushed)}},set:{active:function(){y.addClass(p.active)},pushed:function(){f.verbose("Adding body push state",f.get.direction()),w.addClass(p[f.get.direction()]).addClass(p.pushed)}},get:{direction:function(){return y.hasClass(p.top)?p.top:y.hasClass(p.right)?p.right:y.hasClass(p.bottom)?p.bottom:p.left},transitionEvent:function(){var e,t=n.createElement("element"),o={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in o)if(t.style[e]!==i)return o[e]}},is:{open:function(){return y.is(":animated")||y.hasClass(p.active)},closed:function(){return!f.is.open()},vertical:function(){return y.hasClass(p.top)}},setting:function(t,n){return n===i?g[t]:(e.isPlainObject(t)?e.extend(!0,g,t):g[t]=n,i)},internal:function(t,n){return n===i?f[t]:(e.isPlainObject(t)?e.extend(!0,f,t):f[t]=n,i)},debug:function(){g.debug&&(g.performance?f.performance.log(arguments):(f.debug=Function.prototype.bind.call(console.info,console,g.name+":"),f.debug.apply(console,arguments)))},verbose:function(){g.verbose&&g.debug&&(g.performance?f.performance.log(arguments):(f.verbose=Function.prototype.bind.call(console.info,console,g.name+":"),f.verbose.apply(console,arguments)))},error:function(){f.error=Function.prototype.bind.call(console.error,console,g.name+":"),f.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;g.performance&&(t=(new Date).getTime(),i=s||t,n=t-i,s=t,l.push({Element:T,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(f.performance.timer),f.performance.timer=setTimeout(f.performance.display,100)},display:function(){var t=g.name+":",n=0;s=!1,clearTimeout(f.performance.timer),e.each(l,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",a&&(t+=" '"+a+"'"),r.size()>1&&(t+=" ("+r.size()+")"),(console.group!==i||console.table!==i)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,n,r){var a,s,l;return n=n||d,r=T||r,"string"==typeof t&&S!==i&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(n,o){var r=n!=a?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(S[o])&&n!=a)S=S[o];else{if(!e.isPlainObject(S[r])||n==a)return S[o]!==i?(s=S[o],!1):S[r]!==i?(s=S[r],!1):(f.error(m.method),!1);S=S[r]}})),e.isFunction(s)?l=s.apply(r,n):s!==i&&(l=s),e.isArray(o)?o.push(l):"string"==typeof o?o=[o,l]:l!==i&&(o=l),s}},u?(S===i&&f.initialize(),f.invoke(c)):(S!==i&&f.destroy(),f.initialize())}),o!==i?o:this},e.fn.sidebar.settings={name:"Sidebar",namespace:"sidebar",verbose:!0,debug:!0,performance:!0,useCSS:!0,overlay:!1,duration:300,side:"left",onChange:function(){},onShow:function(){},onHide:function(){},className:{active:"active",pushed:"pushed",top:"top",left:"left",right:"right",bottom:"bottom"},error:{method:"The method you called is not defined.",notFound:"There were no elements that matched the specified selector"}}}(jQuery,window,document),function(e,t,n,i){e.fn.tab=function(n){var o,r,a,s,l,c=e.extend(!0,{},e.fn.tab.settings,n),u=e(this),d=e(c.context).find(c.selector.tabs),f=u.selector||"",g={},p=!0,h=0,m=this,v=(new Date).getTime(),b=[],y=c.className,w=c.metadata,x=c.error,C="."+c.namespace,T="module-"+c.namespace,S=u.data(T),k=arguments[0],P=S!==i&&"string"==typeof k,$=[].slice.call(arguments,1);return s={initialize:function(){if(s.debug("Initializing Tabs",u),c.auto&&(s.verbose("Setting up automatic tab retrieval from server"),c.apiSettings={url:c.path+"/{$tab}"}),c.history){if(e.address===i)return s.error(x.state),!1;if(c.path===!1)return s.error(x.path),!1;s.verbose("Address library found adding state change event"),e.address.state(c.path).unbind("change").bind("change",s.event.history.change)}e.isWindow(m)||(s.debug("Attaching tab activation events to element",u),u.on("click"+C,s.event.click)),s.instantiate()},instantiate:function(){s.verbose("Storing instance of module",s),u.data(T,s)},destroy:function(){s.debug("Destroying tabs",u),u.removeData(T).off(C)},event:{click:function(t){s.debug("Navigation clicked");var n=e(this).data(w.tab);n!==i?(c.history?e.address.value(n):s.changeTab(n),t.preventDefault()):s.debug("No tab specified")},history:{change:function(t){var n=t.pathNames.join("/")||s.get.initialPath(),o=c.templates.determineTitle(n)||!1;s.debug("History change event",n,t),a=t,n!==i&&s.changeTab(n),o&&e.address.title(o)}}},refresh:function(){o&&(s.debug("Refreshing tab",o),s.changeTab(o))},cache:{read:function(e){return e!==i?g[e]:!1},add:function(e,t){e=e||o,s.debug("Adding cached content for",e),g[e]=t},remove:function(e){e=e||o,s.debug("Removing cached content for",e),delete g[e]}},changeTab:function(n){var l=t.history&&t.history.pushState,u=l&&c.ignoreFirstLoad&&p,d=c.auto||e.isPlainObject(c.apiSettings),f=d&&!u?s.utilities.pathToArray(n):s.get.defaultPathArray(n);n=s.utilities.arrayToPath(f),s.deactivate.all(),e.each(f,function(t,l){var g,h,m,v=f.slice(0,t+1),b=s.utilities.arrayToPath(v),y=s.is.tab(b),w=t+1==f.length,C=s.get.tabElement(b);return s.verbose("Looking for tab",l),y?(s.verbose("Tab was found",l),o=b,r=s.utilities.filterArray(f,v),w?m=!0:(g=f.slice(0,t+2),h=s.utilities.arrayToPath(g),m=!s.is.tab(h),m&&s.verbose("Tab parameters found",g)),m&&d?(u?(s.debug("Ignoring remote content on first tab load",b),p=!1,s.cache.add(n,C.html()),s.activate.all(b),e.proxy(c.onTabInit,C)(b,r,a),e.proxy(c.onTabLoad,C)(b,r,a)):(s.activate.navigation(b),s.content.fetch(b,n)),!1):(s.debug("Opened local tab",b),s.activate.all(b),e.proxy(c.onTabLoad,C)(b,r,a),i)):(s.error(x.missingTab,l),!1)})},content:{fetch:function(t,n){var l,u,d=s.get.tabElement(t),f={dataType:"html",stateContext:d,success:function(i){s.cache.add(n,i),s.content.update(t,i),t==o?(s.debug("Content loaded",t),s.activate.tab(t)):s.debug("Content loaded in background",t),e.proxy(c.onTabInit,d)(t,r,a),e.proxy(c.onTabLoad,d)(t,r,a)},urlData:{tab:n}},g=d.data(w.promise)||!1,p=g&&"pending"===g.state();n=n||t,u=s.cache.read(n),c.cache&&u?(s.debug("Showing existing content",n),s.content.update(t,u),s.activate.tab(t),e.proxy(c.onTabLoad,d)(t,r,a)):p?(s.debug("Content is already loading",n),d.addClass(y.loading)):e.api!==i?(console.log(c.apiSettings),l=e.extend(!0,{headers:{"X-Remote":!0}},c.apiSettings,f),s.debug("Retrieving remote content",n,l),e.api(l)):s.error(x.api)},update:function(e,t){s.debug("Updating html for",e);var n=s.get.tabElement(e);n.html(t)}},activate:{all:function(e){s.activate.tab(e),s.activate.navigation(e)},tab:function(e){var t=s.get.tabElement(e);s.verbose("Showing tab content for",t),t.addClass(y.active)},navigation:function(e){var t=s.get.navElement(e);s.verbose("Activating tab navigation for",t,e),t.addClass(y.active)}},deactivate:{all:function(){s.deactivate.navigation(),s.deactivate.tabs()},navigation:function(){u.removeClass(y.active)},tabs:function(){d.removeClass(y.active+" "+y.loading)}},is:{tab:function(e){return e!==i?s.get.tabElement(e).size()>0:!1}},get:{initialPath:function(){return u.eq(0).data(w.tab)||d.eq(0).data(w.tab)},path:function(){return e.address.value()},defaultPathArray:function(e){return s.utilities.pathToArray(s.get.defaultPath(e))},defaultPath:function(e){var t=u.filter("[data-"+w.tab+'^="'+e+'/"]').eq(0),n=t.data(w.tab)||!1;if(n){if(s.debug("Found default tab",n),c.maxDepth>h)return h++,s.get.defaultPath(n);s.error(x.recursion)}else s.debug("No default tabs found for",e,d);return h=0,e},navElement:function(e){return e=e||o,u.filter("[data-"+w.tab+'="'+e+'"]')},tabElement:function(e){var t,n,i,r;return e=e||o,i=s.utilities.pathToArray(e),r=s.utilities.last(i),t=d.filter("[data-"+w.tab+'="'+r+'"]'),n=d.filter("[data-"+w.tab+'="'+e+'"]'),t.size()>0?t:n},tab:function(){return o}},utilities:{filterArray:function(t,n){return e.grep(t,function(t){return-1==e.inArray(t,n)})},last:function(t){return e.isArray(t)?t[t.length-1]:!1},pathToArray:function(e){return e===i&&(e=o),"string"==typeof e?e.split("/"):[e]},arrayToPath:function(t){return e.isArray(t)?t.join("/"):!1}},setting:function(t,n){return n===i?c[t]:(e.isPlainObject(t)?e.extend(!0,c,t):c[t]=n,i)},internal:function(t,n){return n===i?s[t]:(e.isPlainObject(t)?e.extend(!0,s,t):s[t]=n,i)},debug:function(){c.debug&&(c.performance?s.performance.log(arguments):(s.debug=Function.prototype.bind.call(console.info,console,c.name+":"),s.debug.apply(console,arguments)))},verbose:function(){c.verbose&&c.debug&&(c.performance?s.performance.log(arguments):(s.verbose=Function.prototype.bind.call(console.info,console,c.name+":"),s.verbose.apply(console,arguments)))},error:function(){s.error=Function.prototype.bind.call(console.error,console,c.name+":"),s.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;c.performance&&(t=(new Date).getTime(),i=v||t,n=t-i,v=t,b.push({Element:m,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(s.performance.timer),s.performance.timer=setTimeout(s.performance.display,100)},display:function(){var t=c.name+":",n=0;v=!1,clearTimeout(s.performance.timer),e.each(b,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",f&&(t+=" '"+f+"'"),(console.group!==i||console.table!==i)&&b.length>0&&(console.groupCollapsed(t),console.table?console.table(b):e.each(b,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),b=[]}},invoke:function(t,n,o){var r,a,c;return n=n||$,o=m||o,"string"==typeof t&&S!==i&&(t=t.split(/[\. ]/),r=t.length-1,e.each(t,function(n,o){var l=n!=r?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(S[o])&&n!=r)S=S[o];else{if(!e.isPlainObject(S[l])||n==r)return S[o]!==i?(a=S[o],!1):S[l]!==i?(a=S[l],!1):(s.error(x.method),!1);S=S[l]}})),e.isFunction(a)?c=a.apply(o,n):a!==i&&(c=a),e.isArray(l)?l.push(c):"string"==typeof l?l=[l,c]:c!==i&&(l=c),a}},P?(S===i&&s.initialize(),s.invoke(k)):(S!==i&&s.destroy(),s.initialize()),l!==i?l:this},e.tab=function(n){e(t).tab(n)},e.fn.tab.settings={name:"Tab",verbose:!0,debug:!0,performance:!0,namespace:"tab",onTabInit:function(){},onTabLoad:function(){},templates:{determineTitle:function(){}},auto:!1,history:!1,path:!1,context:"body",maxDepth:25,ignoreFirstLoad:!1,alwaysRefresh:!1,cache:!0,apiSettings:!1,error:{api:"You attempted to load content without API module",method:"The method you called is not defined",missingTab:"Tab cannot be found",noContent:"The tab you specified is missing a content url.",path:"History enabled, but no path was specified",recursion:"Max recursive depth reached",state:"The state library has not been initialized"},metadata:{tab:"tab",loaded:"loaded",promise:"promise"},className:{loading:"loading",active:"active"},selector:{tabs:".ui.tab"}}}(jQuery,window,document),function(e,t,n,i){e.fn.transition=function(){var o,r=e(this),a=r.selector||"",s=(new Date).getTime(),l=[],c=arguments,u=c[0],d=[].slice.call(arguments,1),f="string"==typeof u;return t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)},r.each(function(){var t,g,p,h,m,v,b,y,w,x,C=e(this),T=this;x={initialize:function(){t=x.get.settings.apply(T,c),x.verbose("Converted arguments into settings object",t),p=t.error,h=t.className,y=t.namespace,m=t.metadata,w="module-"+y,v=x.get.animationEvent(),b=x.get.animationName(),g=C.data(w),g===i&&x.instantiate(),f&&(f=x.invoke(u)),f===!1&&x.animate()},instantiate:function(){x.verbose("Storing instance of module",x),g=x,C.data(w,g)},destroy:function(){x.verbose("Destroying previous module for",T),C.removeData(w)},animate:function(e){return t=e||t,x.debug("Preparing animation",t.animation),x.is.animating()?(t.queue&&x.queue(t.animation),!1):(x.save.conditions(),x.set.duration(t.duration),x.set.animating(),x.repaint(),C.addClass(h.transition).addClass(t.animation).one(v,x.complete),!x.has.direction()&&x.can.transition()&&x.set.direction(),x.can.animate()?(x.show(),x.debug("Starting tween",t.animation,C.attr("class")),i):(x.restore.conditions(),x.error(p.noAnimation),!1))},queue:function(e){x.debug("Queueing animation of",e),g.queuing=!0,C.one(v,function(){g.queuing=!1,x.animate.apply(this,t)})},complete:function(){x.verbose("CSS animation complete",t.animation),x.is.looping()||(C.hasClass(h.outward)?(x.restore.conditions(),x.hide()):C.hasClass(h.inward)?(x.restore.conditions(),x.show()):x.restore.conditions(),x.remove.animating()),e.proxy(t.complete,this)()},repaint:function(e){x.verbose("Forcing repaint event"),e=T.offsetWidth},has:{direction:function(e){return e=e||t.animation,C.hasClass(h.inward)||C.hasClass(h.outward)?!0:i}},set:{animating:function(){C.addClass(h.animating)},direction:function(){C.is(":visible")?(x.debug("Automatically determining the direction of animation","Outward"),C.addClass(h.outward).removeClass(h.inward)):(x.debug("Automatically determining the direction of animation","Inward"),C.addClass(h.inward).removeClass(h.outward))},looping:function(){x.debug("Transition set to loop"),C.addClass(h.looping)},duration:function(e){e=e||t.duration,e="number"==typeof e?e+"ms":e,x.verbose("Setting animation duration",e),C.css({"-webkit-animation-duration":e,"-moz-animation-duration":e,"-ms-animation-duration":e,"-o-animation-duration":e,"animation-duration":e})}},save:{conditions:function(){x.cache={className:C.attr("class"),style:C.attr("style")},x.verbose("Saving original attributes",x.cache)}},restore:{conditions:function(){return typeof x.cache===i?(x.error(p.cache),!1):(x.cache.className?C.attr("class",x.cache.className):C.removeAttr("class"),x.cache.style?C.attr("style",x.cache.style):C.removeAttr("style"),x.is.looping()&&x.remove.looping(),x.verbose("Restoring original attributes",x.cache),i)}},remove:{animating:function(){C.removeClass(h.animating)},looping:function(){x.debug("Transitions are no longer looping"),C.removeClass(h.looping),x.repaint()}},get:{settings:function(t,n,i){return e.isPlainObject(t)?e.extend(!0,{},e.fn.transition.settings,t):"function"==typeof i?e.extend(!0,{},e.fn.transition.settings,{animation:t,complete:i,duration:n}):"string"==typeof n||"number"==typeof n?e.extend(!0,{},e.fn.transition.settings,{animation:t,duration:n}):"object"==typeof n?e.extend(!0,{},e.fn.transition.settings,n,{animation:t}):"function"==typeof n?e.extend(!0,{},e.fn.transition.settings,{animation:t,complete:n}):e.extend(!0,{},e.fn.transition.settings,{animation:t})},animationName:function(){var e,t=n.createElement("div"),o={animation:"animationName",OAnimation:"oAnimationName",MozAnimation:"mozAnimationName",WebkitAnimation:"webkitAnimationName"};for(e in o)if(t.style[e]!==i)return x.verbose("Determining animation vendor name property",o[e]),o[e];return!1},animationEvent:function(){var e,t=n.createElement("div"),o={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"mozAnimationEnd",WebkitAnimation:"webkitAnimationEnd"};for(e in o)if(t.style[e]!==i)return x.verbose("Determining animation vendor end event",o[e]),o[e];return!1}},can:{animate:function(){return"none"!==C.css(b)?(x.debug("CSS definition found"),!0):(x.debug("Unable to find css definition"),!1)},transition:function(){var t=e("<div>").addClass(C.attr("class")).appendTo(e("body")),n=t.css(b),i=t.addClass(h.inward).css(b);return n!=i?(x.debug("In/out transitions exist"),t.remove(),!0):(x.debug("Static animation found"),t.remove(),!1)}},is:{animating:function(){return C.hasClass(h.animating)},looping:function(){return C.hasClass(h.looping)},visible:function(){return C.is(":visible")}},hide:function(){x.verbose("Hiding element"),C.removeClass(h.visible).addClass(h.transition).addClass(h.hidden),x.repaint()},show:function(){x.verbose("Showing element"),C.removeClass(h.hidden).addClass(h.transition).addClass(h.visible),x.repaint()},start:function(){x.verbose("Starting animation"),C.removeClass(h.disabled)},stop:function(){x.debug("Stopping animation"),C.addClass(h.disabled)},toggle:function(){x.debug("Toggling play status"),C.toggleClass(h.disabled)},setting:function(n,o){return o===i?t[n]:(e.isPlainObject(n)?e.extend(!0,t,n):t[n]=o,i)},internal:function(t,n){return n===i?x[t]:(e.isPlainObject(t)?e.extend(!0,x,t):x[t]=n,i)},debug:function(){t.debug&&(t.performance?x.performance.log(arguments):(x.debug=Function.prototype.bind.call(console.info,console,t.name+":"),x.debug.apply(console,arguments)))},verbose:function(){t.verbose&&t.debug&&(t.performance?x.performance.log(arguments):(x.verbose=Function.prototype.bind.call(console.info,console,t.name+":"),x.verbose.apply(console,arguments)))},error:function(){x.error=Function.prototype.bind.call(console.error,console,t.name+":"),x.error.apply(console,arguments)},performance:{log:function(e){var n,i,o;t.performance&&(n=(new Date).getTime(),o=s||n,i=n-o,s=n,l.push({Element:T,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":i})),clearTimeout(x.performance.timer),x.performance.timer=setTimeout(x.performance.display,100)},display:function(){var n=t.name+":",o=0;s=!1,clearTimeout(x.performance.timer),e.each(l,function(e,t){o+=t["Execution Time"]}),n+=" "+o+"ms",a&&(n+=" '"+a+"'"),r.size()>1&&(n+=" ("+r.size()+")"),(console.group!==i||console.table!==i)&&l.length>0&&(console.groupCollapsed(n),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,n,r){var a,s,l;return n=n||d,r=T||r,"string"==typeof t&&g!==i&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(n,o){var r=n!=a?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(g[o])&&n!=a)g=g[o];else{if(!e.isPlainObject(g[r])||n==a)return g[o]!==i?(s=g[o],!1):g[r]!==i?(s=g[r],!1):!1;g=g[r]}})),e.isFunction(s)?l=s.apply(r,n):s!==i&&(l=s),e.isArray(o)?o.push(l):"string"==typeof o?o=[o,l]:l!==i&&(o=l),s||!1}},x.initialize()}),o!==i?o:this},e.fn.transition.settings={name:"Transition",debug:!1,verbose:!0,performance:!0,namespace:"transition",complete:function(){},animation:"fade",duration:"700ms",queue:!0,className:{animating:"animating",disabled:"disabled",hidden:"hidden",inward:"in",loading:"loading",looping:"looping",outward:"out",transition:"ui transition",visible:"visible"},error:{noAnimation:"There is no css animation matching the one you specified.",method:"The method you called is not defined"}}}(jQuery,window,document),function(e,t,n,i){e.fn.video=function(t){var n,o=e(this),r=o.selector||"",a=(new Date).getTime(),s=[],l=arguments[0],c="string"==typeof l,u=[].slice.call(arguments,1);return o.each(function(){var d,f=e.isPlainObject(t)?e.extend(!0,{},e.fn.video.settings,t):e.extend({},e.fn.video.settings),g=f.selector,p=f.className,h=f.error,m=f.metadata,v=f.namespace,b="."+v,y="module-"+v,w=e(this),x=w.find(g.placeholder),C=w.find(g.playButton),T=w.find(g.embed),S=this,k=w.data(y);d={initialize:function(){d.debug("Initializing video"),x.on("click"+b,d.play),C.on("click"+b,d.play),d.instantiate()},instantiate:function(){d.verbose("Storing instance of module",d),k=d,w.data(y,d)},destroy:function(){d.verbose("Destroying previous instance of video"),w.removeData(y).off(b),x.off(b),C.off(b)},change:function(e,t,n){d.debug("Changing video to ",e,t,n),w.data(m.source,e).data(m.id,t).data(m.url,n),f.onChange()},reset:function(){d.debug("Clearing video embed and showing placeholder"),w.removeClass(p.active),T.html(" "),x.show(),f.onReset()},play:function(){d.debug("Playing video");var e=w.data(m.source)||!1,t=w.data(m.url)||!1,n=w.data(m.id)||!1;T.html(d.generate.html(e,n,t)),w.addClass(p.active),f.onPlay()},generate:{html:function(e,t,n){d.debug("Generating embed html");var i,o="auto"==f.width?w.width():f.width,r="auto"==f.height?w.height():f.height;return e&&t?"vimeo"==e?i='<iframe src="http://player.vimeo.com/video/'+t+"?="+d.generate.url(e)+'"'+' width="'+o+'" height="'+r+'"'+' frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>':"youtube"==e&&(i='<iframe src="http://www.youtube.com/embed/'+t+"?="+d.generate.url(e)+'"'+' width="'+o+'" height="'+r+'"'+' frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'):n?i='<iframe src="'+n+'"'+' width="'+o+'" height="'+r+'"'+' frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>':d.error(h.noVideo),i},url:function(e){var t=f.api?1:0,n=f.autoplay?1:0,i=f.hd?1:0,o=f.showUI?1:0,r=f.showUI?0:1,a="";return"vimeo"==e&&(a="api="+t+"&amp;title="+o+"&amp;byline="+o+"&amp;portrait="+o+"&amp;autoplay="+n,f.color&&(a+="&amp;color="+f.color)),"ustream"==e?(a="autoplay="+n,f.color&&(a+="&amp;color="+f.color)):"youtube"==e&&(a="enablejsapi="+t+"&amp;autoplay="+n+"&amp;autohide="+r+"&amp;hq="+i+"&amp;modestbranding=1",f.color&&(a+="&amp;color="+f.color)),a}},setting:function(t,n){return n===i?f[t]:(e.isPlainObject(t)?e.extend(!0,f,t):f[t]=n,i)},internal:function(t,n){return n===i?d[t]:(e.isPlainObject(t)?e.extend(!0,d,t):d[t]=n,i)},debug:function(){f.debug&&(f.performance?d.performance.log(arguments):(d.debug=Function.prototype.bind.call(console.info,console,f.name+":"),d.debug.apply(console,arguments)))},verbose:function(){f.verbose&&f.debug&&(f.performance?d.performance.log(arguments):(d.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),d.verbose.apply(console,arguments)))},error:function(){d.error=Function.prototype.bind.call(console.error,console,f.name+":"),d.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;f.performance&&(t=(new Date).getTime(),i=a||t,n=t-i,a=t,s.push({Element:S,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(d.performance.timer),d.performance.timer=setTimeout(d.performance.display,100)},display:function(){var t=f.name+":",n=0;a=!1,clearTimeout(d.performance.timer),e.each(s,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",r&&(t+=" '"+r+"'"),o.size()>1&&(t+=" ("+o.size()+")"),(console.group!==i||console.table!==i)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,o,r){var a,s,l;return o=o||u,r=S||r,"string"==typeof t&&k!==i&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(n,o){var r=n!=a?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(k[o])&&n!=a)k=k[o];else{if(!e.isPlainObject(k[r])||n==a)return k[o]!==i?(s=k[o],!1):k[r]!==i?(s=k[r],!1):(d.error(h.method),!1);k=k[r]}})),e.isFunction(s)?l=s.apply(r,o):s!==i&&(l=s),e.isArray(n)?n.push(l):"string"==typeof n?n=[n,l]:l!==i&&(n=l),s}},c?(k===i&&d.initialize(),d.invoke(l)):(k!==i&&d.destroy(),d.initialize())}),n!==i?n:this},e.fn.video.settings={name:"Video",namespace:"video",debug:!0,verbose:!0,performance:!0,metadata:{source:"source",id:"id",url:"url"},onPlay:function(){},onReset:function(){},onChange:function(){},onPause:function(){},onStop:function(){},width:"auto",height:"auto",autoplay:!1,color:"#442359",hd:!0,showUI:!1,api:!0,error:{noVideo:"No video specified",method:"The method you called is not defined"},className:{active:"active"},selector:{embed:".embed",placeholder:".placeholder",playButton:".play"}}}(jQuery,window,document),function(){var e,t,n=function(e,t){return function(){return e.apply(t,arguments)}};window.Waveform=t=function(){function t(e){if(this.redraw=n(this.redraw,this),this.container=e.container,this.canvas=e.canvas,this.data=e.data||[],this.outerColor=e.outerColor||"transparent",this.innerColor=e.innerColor||"#000000",this.interpolate=!0,e.interpolate===!1&&(this.interpolate=!1),null==this.canvas){if(!this.container)throw"Either canvas or container option must be passed";this.canvas=this.createCanvas(this.container,e.width||this.container.clientWidth,e.height||this.container.clientHeight)}this.patchCanvasForIE(this.canvas),this.context=this.canvas.getContext("2d"),this.width=parseInt(this.context.canvas.width,10),this.height=parseInt(this.context.canvas.height,10),e.data&&this.update(e)}return t.name="Waveform",t.prototype.setData=function(e){return this.data=e},t.prototype.setDataInterpolated=function(e){return this.setData(this.interpolateArray(e,this.width))},t.prototype.setDataCropped=function(e){return this.setData(this.expandArray(e,this.width))},t.prototype.update=function(e){return null!=e.interpolate&&(this.interpolate=e.interpolate),this.interpolate===!1?this.setDataCropped(e.data):this.setDataInterpolated(e.data),this.redraw()},t.prototype.redraw=function(){var e,t,n,i,o,r,a,s;for(this.clear(),this.context.fillStyle=this.innerColor,n=this.height/2,t=0,a=this.data,s=[],o=0,r=a.length;r>o;o++)e=a[o],i=this.width/this.data.length,"function"==typeof this.innerColor&&(this.context.fillStyle=this.innerColor(t/this.width,e)),this.context.clearRect(i*t,n-n*e,i,2*n*e),this.context.fillRect(i*t,n-n*e,i,2*n*e),s.push(t++);return s},t.prototype.clear=function(){return this.context.fillStyle=this.outerColor,this.context.clearRect(0,0,this.width,this.height),this.context.fillRect(0,0,this.width,this.height)},t.prototype.patchCanvasForIE=function(e){var t;return window.G_vmlCanvasManager!==void 0?(e=window.G_vmlCanvasManager.initElement(e),t=e.getContext,e.getContext=function(){var n;
return n=t.apply(e,arguments),e.getContext=t,n}):void 0},t.prototype.createCanvas=function(e,t,n){var i;return i=document.createElement("canvas"),e.appendChild(i),i.width=t,i.height=n,i},t.prototype.expandArray=function(e,t,n){var i,o,r,a;if(null==n&&(n=0),o=[],e.length>t)o=e.slice(e.length-t,e.length);else for(i=r=0,a=t-1;a>=0?a>=r:r>=a;i=a>=0?++r:--r)o[i]=e[i]||n;return o},t.prototype.linearInterpolate=function(e,t,n){return e+(t-e)*n},t.prototype.interpolateArray=function(e,t){var n,i,o,r,a,s,l;for(a=[],s=new Number((e.length-1)/(t-1)),a[0]=e[0],r=1;t-1>r;)l=r*s,o=new Number(Math.floor(l)).toFixed(),n=new Number(Math.ceil(l)).toFixed(),i=l-o,a[r]=this.linearInterpolate(e[o],e[n],i),r++;return a[t-1]=e[e.length-1],a},t.prototype.optionsForSyncedStream=function(e){var t,n;return null==e&&(e={}),t=!1,n=this,{whileplaying:this.redraw,whileloading:function(){var i;return t||(i=this,n.innerColor=function(t){return i.position/i.durationEstimate>t?e.playedColor||"rgba(255,  102, 0, 0.8)":i.bytesLoaded/i.bytesTotal>t?e.loadedColor||"rgba(0, 0, 0, 0.8)":e.defaultColor||"rgba(0, 0, 0, 0.4)"},t=!0),this.redraw}}},t.prototype.dataFromSoundCloudTrack=function(t){var n=this;return e.get("http://www.waveformjs.org/w",{url:t.waveform_url},function(e){return n.update({data:e})})},t}(),e=function(){var e,t,n,i,o,r,a,s,l,c;return a=function(e){var t,n,i;return i=document.createElement("script"),t=!1,i.src=e,i.async=!0,i.onload=i.onreadystatechange=function(){return t||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(t=!0,i.onload=i.onreadystatechange=null,!i||!i.parentNode)?void 0:i.parentNode.removeChild(i)},n||(n=document.getElementsByTagName("head")[0]),n.appendChild(i)},n=function(e){return encodeURIComponent(e)},o=function(i,r,s,l){var u,d;d=-1===(i||"").indexOf("?")?"?":"&",r=r||{};for(u in r)r.hasOwnProperty(u)&&(d+=n(u)+"="+n(r[u])+"&");return o="json"+ ++t,c[o]=function(e){s(e);try{delete c[o]}catch(t){}return c[o]=null},a(i+d+(l||e.callbackName||"callback")+"="+o),o},l=function(e){var t;return t=e},t=0,i=void 0,s=void 0,r=void 0,c=this,e={},{get:o,init:l}}()}.call(this);